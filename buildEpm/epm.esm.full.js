var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var n,i,r,o,a,s,c=function(){return c=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},c.apply(this,arguments)};function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function l(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError,function(t){t.LOG="log",t.INFO="info",t.WARN="warn",t.ERROR="error",t.ASSERT="assert"}(n||(n={})),function(t){t.BEACON="beacon",t.IMAGE="image",t.AJAX="ajax"}(i||(i={})),function(t){t.WEB="web",t.MINI_APP="mini_app"}(r||(r={})),function(t){t.JS_ERROR="JsError",t.RESOURCE_ERROR="ResourceError",t.FETCH_ERROR="FetchError",t.AJAX_ERROR="AjaxError",t.PROMISE_ERROR="PromiseError",t.WHITE_SCREEN_ERROR="WhiteScreenError",t.VUE_ERROR="VueError",t.REACT_ERROR="ReactError",t.CAPTURE_EVENT="CaptureEvent",t.CAPTURE_EXCEPTION="CaptureException"}(o||(o={})),function(t){t.BASIC="basic",t.VITALS="vitals",t.RESOURCE="resource",t.LONG_TASK="longtask"}(a||(a={})),function(t){t.INTEGER="INTEGER",t.STRING="STRING",t.BOOLEAN="BOOLEAN"}(s||(s={}));var p=function(t,e){this.options=t,this.context=e},d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function f(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var h={exports:{}};!function(t,e){!function(n,i){var r="function",o="undefined",a="object",s="string",c="major",u="model",l="name",p="type",d="vendor",f="version",h="architecture",m="console",v="mobile",g="tablet",w="smarttv",_="wearable",b="embedded",y="Amazon",S="Apple",E="ASUS",H="BlackBerry",R="Browser",x="Chrome",k="Firefox",O="Google",T="Huawei",C="LG",A="Microsoft",P="Motorola",I="Opera",N="Samsung",L="Sharp",q="Sony",j="Xiaomi",D="Zebra",U="Facebook",M="Chromium OS",B="Mac OS",z=" Browser",F=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].toUpperCase()]=t[n];return e},J=function(t,e){return typeof t===s&&-1!==V(e).indexOf(V(t))},V=function(t){return t.toLowerCase()},G=function(t,e){if(typeof t===s)return t=t.replace(/^\s\s*/,""),typeof e===o?t:t.substring(0,500)},K=function(t,e){for(var n,o,s,c,u,l,p=0;p<e.length&&!u;){var d=e[p],f=e[p+1];for(n=o=0;n<d.length&&!u&&d[n];)if(u=d[n++].exec(t))for(s=0;s<f.length;s++)l=u[++o],typeof(c=f[s])===a&&c.length>0?2===c.length?typeof c[1]==r?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==r||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):i:this[c[0]]=l?c[1].call(this,l,c[2]):i:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):i):this[c]=l||i;p+=2}},W=function(t,e){for(var n in e)if(typeof e[n]===a&&e[n].length>0){for(var r=0;r<e[n].length;r++)if(J(e[n][r],t))return"?"===n?i:n}else if(J(e[n],t))return"?"===n?i:n;return e.hasOwnProperty("*")?e["*"]:t},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},$={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,f],[/opios[\/ ]+([\w\.]+)/i],[f,[l,I+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[l,I+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[l,I]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[l,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[l,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[l,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[l,"UC"+R]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[l,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[l,"Smart Lenovo "+R]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+R],f],[/\bfocus\/([\w\.]+)/i],[f,[l,k+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[l,I+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[l,I+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[l,"MIUI "+R]],[/fxios\/([-\w\.]+)/i],[f,[l,k]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360"+z]],[/\b(qq)\/([\w\.]+)/i],[[l,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1"+z],f],[/samsungbrowser\/([\w\.]+)/i],[f,[l,N+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[l,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[l,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[l,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,U],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[l,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[l,x+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,x+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[l,"Android "+R]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[f,W,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],f],[/(wolvic)\/([\w\.]+)/i],[l,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[l,k+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[l,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[l,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,V]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",V]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,V]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,N],[p,g]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,N],[p,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[d,S],[p,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,S],[p,g]],[/(macintosh);/i],[u,[d,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,L],[p,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,T],[p,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,T],[p,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[d,j],[p,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,j],[p,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[p,v]],[/\b(opd2\d{3}a?) bui/i],[u,[d,"OPPO"],[p,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[p,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[p,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,P],[p,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,P],[p,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,C],[p,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,C],[p,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[p,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[p,v]],[/(pixel c)\b/i],[u,[d,O],[p,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,O],[p,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,q],[p,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,q],[p,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[p,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,y],[p,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,y],[p,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[p,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,H],[p,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,E],[p,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,E],[p,v]],[/(nexus 9)/i],[u,[d,"HTC"],[p,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[p,v]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[d,"TCL"],[p,g]],[/(itel) ((\w+))/i],[[d,V],u,[p,W,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[p,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[p,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[d,"Ulefone"],[p,v]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[d,"Nothing"],[p,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[p,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[p,g]],[/(surface duo)/i],[u,[d,A],[p,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[p,v]],[/(u304aa)/i],[u,[d,"AT&T"],[p,v]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[p,v]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[p,g]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[p,g]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[p,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[p,g]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[p,g]],[/\b(k88) b/i],[u,[d,"ZTE"],[p,g]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[p,v]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[p,v]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[p,g]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[p,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[p,g]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[p,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[p,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[p,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[p,v]],[/\b(ph-1) /i],[u,[d,"Essential"],[p,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[p,g]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[p,g]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[p,g]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[p,g]],[/(sprint) (\w+)/i],[d,u,[p,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,A],[p,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,D],[p,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,D],[p,v]],[/smart-tv.+(samsung)/i],[d,[p,w]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,N],[p,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,C],[p,w]],[/(apple) ?tv/i],[d,[u,S+" TV"],[p,w]],[/crkey/i],[[u,x+"cast"],[d,O],[p,w]],[/droid.+aft(\w+)( bui|\))/i],[u,[d,y],[p,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[d,L],[p,w]],[/(bravia[\w ]+)( bui|\))/i],[u,[d,q],[p,w]],[/(mitv-\w{5}) bui/i],[u,[d,j],[p,w]],[/Hbbtv.*(technisat) (.*);/i],[d,u,[p,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,G],[u,G],[p,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[p,m]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[p,m]],[/(playstation [345portablevi]+)/i],[u,[d,q],[p,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,A],[p,m]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[d,N],[p,_]],[/((pebble))app/i],[d,u,[p,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[d,S],[p,_]],[/droid.+; (glass) \d/i],[u,[d,O],[p,_]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,D],[p,_]],[/(quest( \d| pro)?)/i],[u,[d,U],[p,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[p,b]],[/(aeobc)\b/i],[u,[d,y],[p,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[p,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[p,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[l,[f,W,X]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,W,X],[l,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,B],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,f],[/\(bb(10);/i],[f,[l,H]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[l,k+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[l,x+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,M],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,f],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,f]]},Z=function(t,e){if(typeof t===a&&(e=t,t=i),!(this instanceof Z))return new Z(t,e).getResult();var m=typeof n!==o&&n.navigator?n.navigator:i,w=t||(m&&m.userAgent?m.userAgent:""),_=m&&m.userAgentData?m.userAgentData:i,b=e?function(t,e){var n={};for(var i in t)e[i]&&e[i].length%2==0?n[i]=e[i].concat(t[i]):n[i]=t[i];return n}($,e):$,y=m&&m.userAgent==w;return this.getBrowser=function(){var t={};return t[l]=i,t[f]=i,K.call(t,w,b.browser),t[c]=function(t){return typeof t===s?t.replace(/[^\d\.]/g,"").split(".")[0]:i}(t[f]),y&&m&&m.brave&&typeof m.brave.isBrave==r&&(t[l]="Brave"),t},this.getCPU=function(){var t={};return t[h]=i,K.call(t,w,b.cpu),t},this.getDevice=function(){var t={};return t[d]=i,t[u]=i,t[p]=i,K.call(t,w,b.device),y&&!t[p]&&_&&_.mobile&&(t[p]=v),y&&"Macintosh"==t[u]&&m&&typeof m.standalone!==o&&m.maxTouchPoints&&m.maxTouchPoints>2&&(t[u]="iPad",t[p]=g),t},this.getEngine=function(){var t={};return t[l]=i,t[f]=i,K.call(t,w,b.engine),t},this.getOS=function(){var t={};return t[l]=i,t[f]=i,K.call(t,w,b.os),y&&!t[l]&&_&&_.platform&&"Unknown"!=_.platform&&(t[l]=_.platform.replace(/chrome os/i,M).replace(/macos/i,B)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return w},this.setUA=function(t){return w=typeof t===s&&t.length>500?G(t,500):t,this},this.setUA(w),this};Z.VERSION="1.0.39",Z.BROWSER=F([l,f,c]),Z.CPU=F([h]),Z.DEVICE=F([u,d,p,m,v,w,g,_,b]),Z.ENGINE=Z.OS=F([l,f]),t.exports&&(e=t.exports=Z),e.UAParser=Z;var Q=typeof n!==o&&(n.jQuery||n.Zepto);if(Q&&!Q.ua){var Y=new Z;Q.ua=Y.getResult(),Q.ua.get=function(){return Y.getUA()},Q.ua.set=function(t){Y.setUA(t);var e=Y.getResult();for(var n in e)Q.ua[n]=e[n]}}}("object"==typeof window?window:d)}(h,h.exports);var m=f(h.exports),v="hinasdk_domain_test",g=Object.prototype.toString;function w(t){return"[object Object]"===g.call(t)}function _(t){return null!=t}function b(t){return Array.isArray(t)}function y(t){return"function"==typeof t}function S(t){return"string"==typeof t}function E(t){var e="";if(S(t))return t;if(null==t?void 0:t.stack)e=w(t.stack)?JSON.stringify(t.stack):t.stack;else{if(!t)return"未知js错误";e=w(t)?JSON.stringify(t):t.toString()}return e}function H(t){try{return JSON.parse(t)}catch(t){}return t}function R(t){try{return JSON.stringify(t)}catch(e){return t}}function x(t){return 0===Object.keys(t).length}function k(){return Date.now&&y(Date.now)?Date.now():(new Date).getTime()}function O(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Object.create(null);return t.forEach((function(t){t&&Object.keys(t).forEach((function(e){var i=t[e];w(i)?w(n[e])?n[e]=O(n[e],i):n[e]=O(i):n[e]=i}))})),n}function T(t,e){if(void 0===e&&(e=3),!t)return t;var n=t.toString(),i=n.indexOf(".");return n=-1!==i?n.substring(0,i+e+1):n.substring(0),parseFloat(n)}function C(){var t=function(t){t=t||window.location.hostname,/^[a-zA-Z0-9\u4e00-\u9fa5\-\\.]+$/.exec(t)||(t="");var e=t.split(".");if(e.length>=2&&!/^(\d+\.)+\d+$/.test(t))for(var n=".".concat(e.splice(e.length-1,1));e.length>0;)if(n=".".concat(e.splice(e.length-1,1)).concat(n),document.cookie="".concat(v,"=true; path=/; domain=").concat(n),-1!==document.cookie.indexOf("".concat(v,"=true")))return document.cookie="".concat(v,"=true; path=/; domain=").concat(n,"; max-age=0"),n;return""}();return""===t?"url解析失败":t}function A(){var t=k(),e=Math.floor(1e6*Math.random());return"".concat(t,"_").concat(e)}function P(){var t=k(),e=Math.floor(1e6*Math.random());return Number(String(t).slice(-5)+String(e).slice(0,4))}function I(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0}function N(t){try{return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x".concat(e)))})))}catch(e){return t}}function L(t){if(!t)return"";var e=t.match(/\/([^/]+)$/);return e?e[1]:""}function q(t){if(void 0===(null==t?void 0:t.stack)||!(null==t?void 0:t.stack))return[];for(var e,n=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,i=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,r=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,o=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,a=t.stack.split("\n"),s=[],c=0;c<a.length;c++){var u=a[c];(e=n.exec(u))||(e=i.exec(u))?s.push({source:e[2],filename:L(e[2]),lineno:e[3]?+e[3]:null,colno:e[4]?+e[4]:null}):(e=r.exec(u))?s.push({source:e[3],filename:L(e[3]),lineno:e[4]?+e[4]:null,colno:e[5]?+e[5]:null}):(e=o.exec(u))&&s.push({source:e[5],filename:L(e[5]),lineno:e[1]?+e[1]:null,colno:e[2]?+e[2]:null})}return s.length>0?[s[0]]:s}var j=function(t,e){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},j(t,e)};function D(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}j(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}"function"==typeof SuppressedError&&SuppressedError;var U=function(){function t(){this.name="CookieStorage"}return t.prototype.isSupport=function(t,e){var n=this;return void 0===t&&(t="cookie_support_test"),void 0===e&&(e="1"),navigator.cookieEnabled&&(n.set(t,e),n.get(t)===e&&(n.remove(t),!0))},t.prototype.get=function(t){var e,n,i=document.cookie.split(";");try{for(var r=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),o=r.next();!o.done;o=r.next()){var a=o.value.split("=");if(a[0].trim()===t)return decodeURIComponent(a[1])}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null},t.prototype.set=function(t,e,n,i,r,o,a){i=i||"/",t=t.trim(),e=e.trim();var s="".concat(t,"=").concat(encodeURIComponent(e),"; path=").concat(i,";");n=_(n)?n:63072e8,s+=" max-age=".concat(n,";"),a&&(s+=" secure;"),r&&(s+=" domain=".concat(r,";")),["Strict","Lax","None"].includes(o)&&(s+=" SameSite=".concat(o,";")),document.cookie=s},t.prototype.remove=function(t,e){void 0===e&&(e="/"),this.set(t,"1",0,e)},t.prototype.setDomain=function(t,e,n){var i=C();"url解析失败"===i&&(i=""),this.set(t,e,n,"/",i)},t}(),M=function(){function t(){this.name="LocalStorage"}return t.prototype.isSupport=function(){var t=!0;try{var e="__localStorageSupport__",n="testIsSupportStorage";this.set(e,n),this.get(e)!==n&&(t=!1),this.remove(e)}catch(e){t=!1}return t},t.prototype.key=function(t){return window.localStorage.key(t)},t.prototype.get=function(t){return window.localStorage.getItem(t)},t.prototype.length=function(){return window.localStorage.length},t.prototype.set=function(t,e){try{window.localStorage.setItem(t,e)}catch(t){}},t.prototype.remove=function(t){window.localStorage.removeItem(t)},t.prototype.parse=function(t){var e=this.get(t);try{e=JSON.parse(e)}catch(t){e=""}return e},t}(),B=function(){function t(){this.name="MemoryStorage",this.data={}}return t.prototype.get=function(t){var e=this.data[t];return _(null==e?void 0:e.expireTime)?e.expireTime<k()?null:e.value:null==e?void 0:e.value},t.prototype.set=function(t,e,n){if(_(n)){var i=k()+1e3*n;this.data[t]={value:e,expireTime:i}}this.data[t]={value:e}},t.prototype.setDomain=function(t,e,n){this.set(t,e,n)},t}(),z=new m;function F(){if(void 0===navigator.connection)return"unknown";var t=navigator.connection;return t.effectiveType?t.effectiveType:t.type?t.type:"取值异常"}function J(){return"undefined"!=typeof console}var V=function(t){this.options=t},G=function(t){function e(e){var n=t.call(this,e)||this;return n.options=e,n}return D(e,t),e.prototype.run=function(){var t=this;return new Promise((function(e){var n=t.options,i=n.imgUseCrossOrigin,r=n.url,o=n.data,a=new Image;i&&(a.crossOrigin="anonymous");var s=-1===r.indexOf("?")?"?":"&";a.src="".concat(r).concat(s).concat(o);var c=function(t){a=null,e({type:t})};a.onload=function(){c("success")},a.onerror=function(){c("success")}}))},e}(V),K=function(t){function e(e){var n=t.call(this,e)||this;return n.options=e,n}return D(e,t),e.prototype.run=function(){var t=this;return new Promise((function(e){var n=t.options,i=n.url,r=n.data,o=n.timeout,a=n.credentials,s=n.contentType,c=n.customHeaders,u=void 0===c?{}:c,l=new XMLHttpRequest;l.open("POST",i,!0),l.timeout=o||2e4,l.isMonitor=!0,a&&(l.withCredentials=!0),l.setRequestHeader("Content-Type",s||"application/x-www-form-urlencoded"),w(u)&&!x(u)&&Object.keys(u).forEach((function(t){l.setRequestHeader(t,u[t])})),l.send(r||null),l.ontimeout=function(){l.abort()},l.onreadystatechange=function(){4===l.readyState&&(l.status>=200&&l.status<300||304===l.status?e({data:JSON.parse(l.responseText)||{},type:"success"}):e({type:"fail",msg:"网络异常, 请求失败，状态码=".concat(l.status)}))}}))},e}(V),W=function(t){function e(e){var n=t.call(this,e)||this;return n.options=e,n}return D(e,t),e.prototype.run=function(){var t=this;return new Promise((function(e){var n=t.options,i=n.url,r=n.data;navigator.sendBeacon&&e(navigator.sendBeacon(i,r)?{type:"success"}:{type:"fail",msg:"sendBeacon 请求失败"})}))},e}(V);function X(t,e){void 0===e&&(e=n.LOG);var i=console[e]||console.log;"function"==typeof i&&i(t)}var $=function(){function t(t){this.options=t,this.storeName="hinasdk_crossdata",this.state=this.getDefaultState(),this.isFirstTime=!1,this.isFirstDay=!1,this.isSetFirstVisit=!0}return t.prototype.getDefaultState=function(){return{accountId:null,deviceId:null,anonymousId:null,sessionId:null,firstVisitTime:k(),props:{}}},t.prototype.log=function(t,e){void 0===e&&(e=n.LOG);var i=this.options.showLog;J()&&i&&X(t,e)},t.prototype.init=function(){var t,e=new U,i=new B,r=new M;e.isSupport()?this.storage=e:(this.log("Cookie storage is not supported, SDK internal cache has been enabled",n.WARN),this.storage=i),r.isSupport()?this.localStorage=r:this.log("localStorage is not supported, SDK internal cache has been enabled",n.WARN),!(t=this.storage.get(this.storeName))&&this.localStorage&&(t=this.localStorage.get(this.storeName)),t&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(t)&&(this.state=H(t)),t?(this.isSetFirstVisit=!1,this.save()):(this.isFirstDay=!0,this.isFirstTime=!0);var o=function(){var t=function(){for(var t=k(),e=0;t===k();)e++;return t.toString(16)+e.toString(16)},e=String(window.screen.height*window.screen.width);e=e&&/\d{5,}/.test(e)?e.toString(16):String(31242*Math.random()).replace(".","").slice(0,8);var n="".concat(t(),"-").concat(Math.random().toString(16).replace(".",""),"-").concat(function(){var t,e,n=navigator.userAgent,i=[],r=0;function o(t,e){var n,r=0;for(n=0;n<e.length;n++)r|=i[n]<<8*n;return t^r}for(t=0;t<n.length;t++)e=n.charCodeAt(t),i.unshift(255&e),i.length>=4&&(r=o(r,i),i=[]);return i.length>0&&(r=o(r,i)),r.toString(16)}(),"-").concat(e,"-").concat(t());return n||(String(Math.random())+String(Math.random())+String(Math.random())).slice(2,15)}();this.getAnonymousId()||this.setAnonymousId(o),this.getDeviceId()||this.setDeviceId(o)},t.prototype.clear=function(){this.state={},this.save()},t.prototype.save=function(){this.storage.setDomain(this.storeName,JSON.stringify(this.state)),this.localStorage&&this.localStorage.set(this.storeName,JSON.stringify(this.state))},t.prototype.set=function(t,e){this.state[t]=e,this.save()},t.prototype.checkSetValue=function(t,e){return!(!function(t){return"number"==typeof t}(e=null!=e?e:"")&&!S(e)&&(this.log("".concat(t,": id must be string or number"),n.WARN),1))},t.prototype.setDeviceId=function(t){void 0===t&&(t=""),this.checkSetValue("deviceId",t)&&this.set("deviceId",t)},t.prototype.setAccountId=function(t){void 0===t&&(t=""),this.checkSetValue("accountId",t)&&this.set("accountId",t)},t.prototype.setAnonymousId=function(t){this.state.anonymousId?this.log("Current anonymousId is ".concat(this.getAnonymousId(),", it has been set"),n.WARN):this.checkSetValue("anonymousId",t)&&this.set("anonymousId",t)},t.prototype.setSessionId=function(t){this.set("sessionId",t)},t.prototype.setProps=function(t){var e=O(this.state.props||{},t);for(var n in e)"string"==typeof e[n]&&(e[n]=e[n].slice(0,200));this.set("props",e)},t.prototype.getAnonymousId=function(){return this.state.anonymousId},t.prototype.getDeviceId=function(){return this.state.deviceId},t.prototype.getAccountId=function(){return this.state.accountId},t.prototype.getSessionId=function(){return this.state.sessionId||""},t.prototype.getSessionIdCreateTime=function(){var t=this.getSessionId().split("_")[0],e=Number(t);return Number.isNaN(e)?0:e},t.prototype.getCookie=function(){return this.storage.get(this.storeName)},t}(),Z=function(){function t(t,e,n,i){void 0===n&&(n="hinasdk_tab"),void 0===i&&(i="hinasdk_data_"),this.options=t,this.platform=e,this.batchKey=n,this.batchDataKey=i,this.init()}return t.prototype.log=function(t,e){void 0===e&&(e=n.LOG);var i=this.options.showLog;J()&&i&&X(t,e)},t.prototype.init=function(){var t=new M;t.isSupport()?(this.localStorage=t,this.isSupport=!0):(this.isSupport=!1,this.log("批量发送功能需要使用localstorage存储数据，但是您的浏览器不支持localstorage，所以不能使用该功能",n.WARN)),this.batchInterval()},t.prototype.getBatchConfig=function(){return this.options.batchSend},t.prototype.getStorageList=function(){if(!this.isSupport)return[];var t=[],e=this.localStorage.get(this.batchKey);return e&&(b(t=H(e))||(t=[])),t},t.prototype.batchInterval=function(){var t=this;if(this.isSupport){var e=this.getBatchConfig().sendInterval;setTimeout((function(){t.send().then((function(){t.batchInterval()}))}),e)}},t.prototype.send=function(){var t=this;return new Promise((function(e){var n=t.getStorageList();if(n.length>0&&t.isSupport){for(var i=t.getBatchConfig(),r=i.storageLimit,o=i.dataSendTimeout,a=k(),s=[],c={},u=n.length,l=0;l<u;l++){var p=n[l],d=p.dataKey,f=p.expireTime;f>=a?(c[d]={dataKey:d,expireTime:f},(b=t.localStorage.get(d))&&s.push(H(b))):(t.localStorage.remove(d),n.splice(l,1),u--,l--)}if(t.localStorage.set(t.batchKey,JSON.stringify(n)),(s=s.filter(Boolean)).length>r&&(s=s.slice(0,r)),0===s.length)e();else{var h=t.options,m=h.serverUrl,v=h.customHeaders,g=h.credentials,w=h.globalCallback,_=JSON.stringify(s),b=encodeURIComponent(N(_));new K({url:m,data:"data_list=".concat(b),timeout:o,credentials:g,customHeaders:v}).run().then((function(n){y(w)&&w(m,s,n.type,n.msg||""),"success"===n.type&&t.remove(c),e()}))}}else e()}))},t.prototype.remove=function(t){var e=this;if(this.isSupport){var n=this.getStorageList(),i=Object.keys(t);if(i.forEach((function(t){e.localStorage.remove(t)})),n.length===i.length)this.localStorage.set(this.batchKey,JSON.stringify([]));else{var r=n.filter((function(e){return!t[e.dataKey]}));this.localStorage.set(this.batchKey,JSON.stringify(r))}}},t.prototype.add=function(t){if(this.isSupport){var e=this.getBatchConfig(),n=e.sendInterval,i=e.storageLimit,r=this.batchDataKey+A(),o=this.getStorageList();o.unshift({dataKey:r,expireTime:k()+2*n}),this.localStorage.set(this.batchKey,JSON.stringify(o)),this.localStorage.set(r,JSON.stringify(t)),(o.length>i||"track_signup"===t.type||"H_pageview"===t.event)&&this.send()}},t}(),Q=function(){function t(t,e){void 0===e&&(e=!0),this.isReady=!1,this.consolePrefix="",this.useInstancing=!0,this.plugins=[],this.options=t,this.useInstancing=e}return t.prototype.log=function(t,e){void 0===e&&(e=n.LOG);var i=this.options.showLog;J()&&i&&("string"==typeof t&&this.consolePrefix&&(t="".concat(this.consolePrefix,"：").concat(t)),X(t,e))},t.prototype.runPlugins=function(t){for(var e=this,n=function(n){var i=t[n];i.init((function(t){if(i.transform){var n=i.transform(t);n&&e.report(n)}}))},i=0;i<t.length;i++)n(i)},t.prototype.applyPlugins=function(t){var e=this;if(this.isReady){b(t)||(t=[t]);var i=[];t.forEach((function(t){var n=new t(e.options,e);e.plugins.push(n),i.push(n)})),this.runPlugins(i)}else this.log("请先初始化SDK实例",n.WARN)},t}(),Y=function(t,e){return Y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Y(t,e)};"function"==typeof SuppressedError&&SuppressedError;var tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.sendReportData=function(t,e,r){var o=this.options,a=o.batchSend,s=o.globalCallback,c=o.serverUrl,u=o.dataSendTimeout,l=o.sendType,p=o.customHeaders,d=o.credentials,f=o.imgUseCrossOrigin;if(l=r||l,c){if(w(t)&&!x(t))if(a)this.batchSender.add(t);else{var h=t;S(t)||(h=R(t));var m=N(h),v={data:"data=".concat(encodeURIComponent(m)),url:c,timeout:u,imgUseCrossOrigin:f,customHeaders:p,credentials:d};(l===i.BEACON&&navigator.sendBeacon?new W(v):l===i.IMAGE&&v.data.length<2048?new G(v):new K(v)).run().then((function(n){return y(s)&&s(c,t,n.type,n.msg||""),y(e)&&e(c,t,n.type,n.msg||""),n}))}}else this.log("当前 serverUrl 为空，network 中不会发数据，请配置正确的 serverUrl！",n.WARN)},e}(Q),et=function(t){function n(e,n){var i=t.call(this,e,n)||this;return i.options=e,i.context=n,i.name="JsErrorPlugin",i.isReady=!1,i}return e(n,t),n.prototype.init=function(t){this.isReady||(this.isReady=!0,window.onerror=function(e,n,i,r,a){if("ResizeObserver loop limit exceeded"!==e.toString()){var s=E(a);t({H_js_error_id:I(s),H_error_category:o.JS_ERROR,H_error_type:a.name||o.JS_ERROR,H_error_message:a.message,H_error_stack:JSON.stringify({details:q(a),errorStack:s})})}})},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(p),nt=function(t){function n(e,n){var i=t.call(this,e,n)||this;return i.options=e,i.context=n,i.name="DomErrorPlugin",i.isReady=!1,i}return e(n,t),n.prototype.init=function(t){this.isReady||(this.isReady=!0,window.addEventListener("error",(function(e){if(e.target!==window){var n=e.target,i=n.src||n.href,r=function(t){var e=t.tagName.toLowerCase(),n=t.getAttributeNames(),i="";return n.forEach((function(e){i+=" ".concat(e,"='").concat(t.getAttribute(e),"'")})),"<".concat(e).concat(i,">")}(n);t({H_js_error_id:I(r),H_error_category:o.RESOURCE_ERROR,H_error_type:o.RESOURCE_ERROR,H_error_message:r,H_source_element:r,H_source_src:i})}}),!0))},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(p);function it(){if(void 0!==window.performance&&"function"==typeof window.performance.getEntriesByType){var t=performance.getEntriesByType("navigation")[0],e=t.startTime,n=t.redirectStart,i=t.redirectEnd,r=t.fetchStart,o=t.domainLookupStart,a=t.domainLookupEnd,s=t.connectStart,c=t.secureConnectionStart,u=t.connectEnd,l=t.requestStart,p=t.responseStart,d=t.responseEnd,f=t.domInteractive,h=t.domContentLoadedEventEnd,m=t.loadEventStart,v=t.loadEventEnd,g=t.redirectCount,w=t.duration,_=t.unloadEventEnd,b=t.unloadEventStart;return{H_first_byte_time:T(p-e),H_unload_time:T(_-b),H_redirect_time:T(i-n),H_redirect_count:g,H_cache_check_time:T(o-r),H_dns_time:T(a-o),H_tcp_time:T(u-s),H_ssl_time:T(u-c),H_first_byte_response_time:T(p-n),H_dom_ready_time:T(h-r),H_request_time:T(p-l),H_content_transfer_time:T(d-p),H_dom_parsing_time:T(f-d),H_page_load_time:T(v-e),H_resource_load_time:T(m-h),H_resource_duration:w,H_load_event_time:T(v-m)}}var y=performance.timing,S=y.navigationStart,E=y.responseStart,H=y.unloadEventEnd,R=y.unloadEventStart,x=y.requestStart,k=y.responseEnd,O=y.redirectStart,C=y.redirectEnd,A=y.domainLookupStart,P=y.fetchStart,I=y.domainLookupEnd,N=y.connectStart,L=y.connectEnd,q=y.secureConnectionStart,j=y.domContentLoadedEventEnd,D=y.domInteractive,U=y.loadEventStart,M=y.loadEventEnd;return{H_first_byte_time:T(E-S),H_unload_time:T(H-R),H_redirect_time:T(C-O),H_cache_check_time:T(A-P),H_dns_time:T(I-A),H_tcp_time:T(L-N),H_ssl_time:T(L-q),H_first_byte_response_time:T(E-O),H_dom_ready_time:T(j-P),H_request_time:T(E-x),H_content_transfer_time:T(k-E),H_dom_parsing_time:T(D-k),H_page_load_time:T(M-S),H_resource_load_time:T(U-j),H_load_event_time:T(M-U)}}var rt,ot,at,st,ct=-1,ut=function(t){addEventListener("pageshow",(function(e){e.persisted&&(ct=e.timeStamp,t(e))}),!0)},lt=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},pt=function(){var t=lt();return t&&t.activationStart||0},dt=function(t,e){var n=lt(),i="navigate";return ct>=0?i="back-forward-cache":n&&(document.prerendering||pt()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},ft=function(t,e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var i=new PerformanceObserver((function(t){Promise.resolve().then((function(){e(t.getEntries())}))}));return i.observe(Object.assign({type:t,buffered:!0},n||{})),i}}catch(t){}},ht=function(t,e,n,i){var r,o;return function(a){e.value>=0&&(a||i)&&((o=e.value-(r||0))||void 0===r)&&(r=e.value,e.delta=o,e.rating=function(t,e){return t>e[1]?"poor":t>e[0]?"needs-improvement":"good"}(e.value,n),t(e))}},mt=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},vt=function(t){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t()}))},gt=function(t){var e=!1;return function(){e||(t(),e=!0)}},wt=-1,_t=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},bt=function(t){"hidden"===document.visibilityState&&wt>-1&&(wt="visibilitychange"===t.type?t.timeStamp:0,St())},yt=function(){addEventListener("visibilitychange",bt,!0),addEventListener("prerenderingchange",bt,!0)},St=function(){removeEventListener("visibilitychange",bt,!0),removeEventListener("prerenderingchange",bt,!0)},Et=function(){return wt<0&&(wt=_t(),yt(),ut((function(){setTimeout((function(){wt=_t(),yt()}),0)}))),{get firstHiddenTime(){return wt}}},Ht=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},Rt=[1800,3e3],xt=function(t,e){e=e||{},Ht((function(){var n,i=Et(),r=dt("FCP"),o=ft("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(o.disconnect(),t.startTime<i.firstHiddenTime&&(r.value=Math.max(t.startTime-pt(),0),r.entries.push(t),n(!0)))}))}));o&&(n=ht(t,r,Rt,e.reportAllChanges),ut((function(i){r=dt("FCP"),n=ht(t,r,Rt,e.reportAllChanges),mt((function(){r.value=performance.now()-i.timeStamp,n(!0)}))})))}))},kt=[.1,.25],Ot=[2500,4e3],Tt={},Ct=function(t,e){e=e||{},Ht((function(){var n,i=Et(),r=dt("LCP"),o=function(t){e.reportAllChanges||(t=t.slice(-1)),t.forEach((function(t){t.startTime<i.firstHiddenTime&&(r.value=Math.max(t.startTime-pt(),0),r.entries=[t],n())}))},a=ft("largest-contentful-paint",o);if(a){n=ht(t,r,Ot,e.reportAllChanges);var s=gt((function(){Tt[r.id]||(o(a.takeRecords()),a.disconnect(),Tt[r.id]=!0,n(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,(function(){return function(t){var e=self.requestIdleCallback||self.setTimeout,n=-1;return t=gt(t),"hidden"===document.visibilityState?t():(n=e(t),vt(t)),n}(s)}),!0)})),vt(s),ut((function(i){r=dt("LCP"),n=ht(t,r,Ot,e.reportAllChanges),mt((function(){r.value=performance.now()-i.timeStamp,Tt[r.id]=!0,n(!0)}))}))}}))},At=[800,1800],Pt=function t(e){document.prerendering?Ht((function(){return t(e)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(e)}),!0):setTimeout(e,0)},It=function(t,e){e=e||{};var n=dt("TTFB"),i=ht(t,n,At,e.reportAllChanges);Pt((function(){var r=lt();r&&(n.value=Math.max(r.responseStart-pt(),0),n.entries=[r],i(!0),ut((function(){n=dt("TTFB",0),(i=ht(t,n,At,e.reportAllChanges))(!0)})))}))},Nt={passive:!0,capture:!0},Lt=new Date,qt=function(t,e){rt||(rt=e,ot=t,at=new Date,Ut(removeEventListener),jt())},jt=function(){if(ot>=0&&ot<at-Lt){var t={entryType:"first-input",name:rt.type,target:rt.target,cancelable:rt.cancelable,startTime:rt.timeStamp,processingStart:rt.timeStamp+ot};st.forEach((function(e){e(t)})),st=[]}},Dt=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,e){var n=function(){qt(t,e),r()},i=function(){r()},r=function(){removeEventListener("pointerup",n,Nt),removeEventListener("pointercancel",i,Nt)};addEventListener("pointerup",n,Nt),addEventListener("pointercancel",i,Nt)}(e,t):qt(e,t)}},Ut=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(e){return t(e,Dt,Nt)}))},Mt=[100,300];function Bt(){return new Promise((function(t){!function(t,e){e=e||{},Ht((function(){var n,i=Et(),r=dt("FID"),o=function(t){t.startTime<i.firstHiddenTime&&(r.value=t.processingStart-t.startTime,r.entries.push(t),n(!0))},a=function(t){t.forEach(o)},s=ft("first-input",a);n=ht(t,r,Mt,e.reportAllChanges),s&&(vt(gt((function(){a(s.takeRecords()),s.disconnect()}))),ut((function(){var i;r=dt("FID"),n=ht(t,r,Mt,e.reportAllChanges),st=[],ot=-1,rt=null,Ut(addEventListener),i=o,st.push(i),jt()})))}))}((function(e){t(e.value)}))}))}function zt(){return new Promise((function(t){!function(t,e){e=e||{},xt(gt((function(){var n,i=dt("CLS",0),r=0,o=[],a=function(t){t.forEach((function(t){if(!t.hadRecentInput){var e=o[0],n=o[o.length-1];r&&t.startTime-n.startTime<1e3&&t.startTime-e.startTime<5e3?(r+=t.value,o.push(t)):(r=t.value,o=[t])}})),r>i.value&&(i.value=r,i.entries=o,n())},s=ft("layout-shift",a);s&&(n=ht(t,i,kt,e.reportAllChanges),vt((function(){a(s.takeRecords()),n(!0)})),ut((function(){r=0,i=dt("CLS",0),n=ht(t,i,kt,e.reportAllChanges),mt((function(){return n()}))})),setTimeout(n,0))})))}((function(e){t(e.value)}),{reportAllChanges:!0})}))}function Ft(){return new Promise((function(t){if("PerformanceObserver"in window){var e=new PerformanceObserver((function(e){var n,i,r=e.getEntries();try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),a=o.next();!a.done;a=o.next()){var s=a.value;"first-paint"===s.name&&t(s.startTime)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}));e.observe({entryTypes:["paint"]})}else t(0)}))}var Jt=function(t){function n(e,n){var i=t.call(this,e,n)||this;return i.options=e,i.context=n,i.name="PerformancePlugin",i.isReady=!1,i}return e(n,t),n.prototype.init=function(t){if(!this.isReady){this.isReady=!0;var e=this.options.performanceOff;e.includes(a.VITALS)||Promise.all([new Promise((function(t){Ct((function(e){t(e.value)}))})),Bt(),zt(),new Promise((function(t){It((function(e){t(e.value)}))})),new Promise((function(t){xt((function(e){t(e.value)}))})),Ft()]).then((function(t){var e=u(t,6),n=e[0],i=e[1],r=e[2],o=e[3],a=e[4];return{H_first_paint_time:T(e[5]),H_first_contentful_paint_time:T(a),H_largest_contentful_paint_time:T(n),H_time_to_first_byte:T(o),H_first_input_delay:T(i),H_cumulative_layout_shift:T(r)}})).then((function(e){t(c({event:"H_performance_page",H_category:a.VITALS},e))})),e.includes(a.LONG_TASK)||function(t){if("PerformanceObserver"in window){var e=new PerformanceObserver((function(e){var n=e.getEntries(),i=0,r=[];n.forEach((function(t){var e=t.duration,n=t.name,o=t.startTime;i+=e,r.push({duration:T(e),startTime:T(o),name:n})})),t({H_long_task_time:T(i),H_long_task:n.length,H_long_task_list:r})}));e.observe({entryTypes:["longtask"]})}}((function(e){t(c({event:"H_performance_page",H_category:a.LONG_TASK,H_url:window.location.href},e))})),window.addEventListener("load",(function(){e.includes(a.BASIC)||t(c({event:"H_performance_loading",H_category:a.BASIC},it()))}))}},n.prototype.transform=function(t){return this.context.getReportData(t.event,t)},n}(p),Vt=function(t){function n(e,n){var i=t.call(this,e,n)||this;return i.options=e,i.context=n,i.name="FetchPlugin",i.isReady=!1,i}return e(n,t),n.prototype.init=function(t){if(window.fetch&&!this.isReady){this.isReady=!0;var e=this;!function(t,e,n,i){if(void 0!==t&&(e in t||i)){var r=n(t[e]);y(r)&&(t[e]=r)}}(window,"fetch",(function(n){return function(i,r){void 0===r&&(r={});var a=k(),s=r||{},u=s.headers,l=s.signal,p=s.method;return n(i,r).then((function(n){if(!n.ok){var s=c(c({},e.context.getRequestHeaders()),u||{}),l=k();n.clone().text().then((function(e){t({H_js_error_id:I("url=".concat(i,"&method=").concat(p)),H_error_category:o.FETCH_ERROR,H_error_type:o.FETCH_ERROR,H_error_message:i,H_request_url:i,H_request_headers:R(s),H_request_method:r.method.toLowerCase(),H_request_params:S(r.body)?r.body:"",H_response_status:n.status,H_response_status_text:n.statusText,H_request_time:a,H_response_time:l,H_response_data:e})}))}return n})).catch((function(n){if(l&&l.aborted)throw n;var s="";s=(s=n instanceof Error?null==n?void 0:n.message:R(n))||"网络错误，或者无法连接";var d=c(c({},e.context.getRequestHeaders()),u||{});throw t({H_js_error_id:I("url=".concat(i,"&method=").concat(p)),H_error_category:o.FETCH_ERROR,H_error_type:o.FETCH_ERROR,H_error_message:i,H_request_url:i,H_request_headers:R(d),H_request_method:r.method.toLowerCase(),H_request_params:S(r.body)?r.body:"",H_response_status:0,H_response_status_text:s,H_request_time:a,H_response_time:k(),H_response_data:s}),n}))}}))}},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(p),Gt=function(t){function n(e,n){var i=t.call(this,e,n)||this;return i.options=e,i.context=n,i.name="XhrPlugin",i.isReady=!1,i}return e(n,t),n.prototype.init=function(t){if(!this.isReady){this.isReady=!0;var e=this,n=XMLHttpRequest.prototype.open,i=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.H_request_method=t[0],this.H_request_url=t[1],this.H_request_time=k(),n.apply(this,t)},XMLHttpRequest.prototype.send=function(n){var r=this;this.addEventListener("abort",(function(){r.H_response_status_text="abort"})),this.addEventListener("error",(function(){r.H_response_status_text="error"})),this.addEventListener("timeout",(function(){r.H_response_status_text="timeout"})),this.addEventListener("loadend",(function(){var i=r,a=i.status,s=i.statusText,c=i.responseType,u=i.responseText,l=i.response,p=i.H_request_method,d=i.H_request_url,f=i.H_request_time,h=i.H_response_status_text;if(!(a>=200&&a<300)&&"abort"!==h&&!r.isMonitor){var m=c&&"text"!==c?l:u,v=h||s;"error"===h?v="网络错误，或者无法连接":"timeout"===h&&(v="请求超时"),t({H_js_error_id:I("url=".concat(d,"&method=").concat(p)),H_error_category:o.AJAX_ERROR,H_error_type:o.AJAX_ERROR,H_error_message:d,H_request_url:d,H_request_headers:R(e.context.getRequestHeaders()),H_request_method:p,H_request_params:w(n)?R(n):S(n)?n:"",H_response_status:a,H_response_status_text:v,H_request_time:f,H_response_time:k(),H_response_data:m&&R(m)})}delete r.H_request_method,delete r.H_request_url,delete r.H_request_time,delete r.H_response_status_text}));try{i.call(this,n)}catch(t){}}}},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(p),Kt=function(t){function n(e,n){var i=t.call(this,e,n)||this;return i.options=e,i.context=n,i.name="PromiseErrorPlugin",i.isReady=!1,i}return e(n,t),n.prototype.init=function(t){this.isReady||(this.isReady=!0,window.addEventListener("unhandledrejection",(function(e){var n=e.reason,i=o.PROMISE_ERROR,r="",a="";S(n)?r=n:void 0===n?r="undefined":(null==n?void 0:n.stack)?(i=n.name,r=n.message,a=JSON.stringify({errorStack:E(n),details:q(n)})):r=R(n);["axioserror","cancelederror","aborterror"].includes(i.toLowerCase())||t({H_js_error_id:I("message=".concat(r,"&stack=").concat(a)),H_error_category:o.PROMISE_ERROR,H_error_type:i||o.PROMISE_ERROR,H_error_message:r,H_error_stack:a})})))},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(p),Wt="4.0.0",Xt=function(t){function a(e,n){void 0===n&&(n=!0);var i=t.call(this,e,n)||this;return i.consolePrefix="性能监控SDK",i.presetProps={},i.requestHeaders={},i.useInstancing&&i.init(e),i}return e(a,t),a.prototype.init=function(t){var e=this;if(this.isReady)this.log("Monitor has been initialized",n.ERROR);else{var r={serverUrl:"",name:"",showLog:!1,errorCapture:!0,performance:!0,openPromiseCapture:!1,sendType:i.BEACON,customHeaders:{},credentials:!1,dataSendTimeout:3e3,batchSend:!1,imgUseCrossOrigin:!1,performanceOff:[],plugins:[]};this.options=c(c({},r),t),this.initState(),this.normalizeConfig(),this.initPlugins(),this.isReady=!0,window.addEventListener("beforeunload",(function(){e.store.setSessionId("")}))}},a.prototype.initState=function(){this.store=new $(this.options),this.store.init()},a.prototype.normalizeConfig=function(){var t=this.options,e=t.serverUrl,i=t.batchSend;""===(e=(e=e||"").trim())&&this.log("当前 serverUrl 为空，network 中不会发数据，请配置正确的 serverUrl！",n.WARN),(!0===i||w(i)&&!x(i))&&(this.options.batchSend=c({dataSendTimeout:6e3,sendInterval:6e3,storageLimit:200},i),this.batchSender=new Z(this.options,r.WEB,"hinaepm_tab","hinaepm_data_"))},a.prototype.initPlugins=function(){var t=this,e=this.options,n=e.errorCapture,i=e.performance,r=e.openPromiseCapture,o=e.plugins,a=void 0===o?[]:o;a=a||[];var s=[],c=[];if(n&&(s=[new et(this.options,this),new nt(this.options,this),new Vt(this.options,this),new Gt(this.options,this)],!0===r)){var p=new Kt(this.options,this);s.push(p)}i&&(c=[new Jt(this.options,this)]);this.plugins=l(l([],u(s),!1),u(c),!1),a.forEach((function(e){var n=new e(t.options,t);t.plugins.push(n)})),this.runPlugins(this.plugins)},a.prototype.report=function(t,e,n){var i=this.options.beforeSend,r=t;y(i)&&(r=i(r)),this.log(r),this.sendReportData(r,e,n)},a.prototype.getReportData=function(t,e){var n=this.options.sourcemapVersion;n||(n="1.0.0");var i=this.store.getAnonymousId(),r=this.store.getAccountId(),o=this.store.getSessionId(),a=k(),s=c(c(c({},this.getReportProperties()),{H_js_sourcemap_version:n}),e||{}),u={anonymous_id:i,type:"track",event:t,time:a,_track_id:P(),properties:s};(r&&(u.account_id=r),o)?k()-this.store.getSessionIdCreateTime()>18e5&&(o=A(),this.store.setSessionId(o)):(o=A(),this.store.setSessionId(o));return s.H_session_id=o,u.send_time=k(),u},a.prototype.getReportProperties=function(){return c(c(c({},function(t){var e=z.getResult(),n=e.browser,i=e.device,r=e.os,o=e.ua,a={H_timezone_offset:(new Date).getTimezoneOffset(),H_viewport_width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,H_viewport_height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,H_screen_width:window.screen.width,H_screen_height:window.screen.height,H_lib_version:t,H_lib:"js",H_lib_method:"code",H_browser:n.name.toLowerCase(),H_browser_version:n.version,H_os:r.name,H_os_version:r.version,H_browser_user_agent:o,H_language:S(navigator.language)?navigator.language.toLowerCase():"取值异常",H_network_type:F()};return"mobile"===i.type?a.H_model=i.vendor?i.model:"UnknownPhone":a.H_model=i.model,a}(Wt)),this.getCommonProperties()),{H_url:window.location.href,H_title:document.title})},a.prototype.captureException=function(t,e,n){t instanceof Error||(t=new Error(t)),w(e)||(e={});var i=E(t),r=this.getReportData("H_performance_js",{H_js_error_id:I(i),H_error_category:o.CAPTURE_EXCEPTION,H_error_type:o.CAPTURE_EXCEPTION,H_error_message:t.message,H_error_stack:JSON.stringify({details:q(t),errorStack:i}),H_capture_extra:JSON.stringify(e)});this.report(r,n)},a.prototype.captureEvent=function(t,e){if(w(t)){var n=t.message,i=t.extra;w(i)||(i={});var r=this.getReportData("H_performance_js",{H_js_error_id:I(n||""),H_error_category:o.CAPTURE_EVENT,H_error_type:o.CAPTURE_EVENT,H_error_message:n||"",H_capture_message:n||"",H_capture_extra:JSON.stringify(i)});this.report(r,e)}else this.log("captureEvent event参数错误：event必须是一个对象")},a.prototype.setCommonProperties=function(t){w(t)&&!x(t)&&(this.presetProps=O(this.presetProps,t))},a.prototype.getCommonProperties=function(){return this.presetProps},a.prototype.clearCommonProperties=function(t){var e=this;void 0===t&&(t=!0),!0===t?this.presetProps={}:b(t)&&t.forEach((function(t){t in e.presetProps&&delete e.presetProps[t]}))},a.prototype.setRequestHeaders=function(t){void 0===t&&(t={}),w(t)&&!x(t)&&(this.requestHeaders=O(this.requestHeaders,t))},a.prototype.getRequestHeaders=function(){return this.requestHeaders},a.prototype.clearRequestHeaders=function(t){void 0===t&&(t=!0),!0===t?this.requestHeaders={}:b(t)&&t.forEach((function(t){}))},a}(tt);var $t=new Xt({},!1);export{n as ConsoleTypes,o as ErrorTypes,Xt as Monitor,a as PerformanceFeat,r as PlatformTypes,p as PluginBase,i as ReportTypes,s as VariablesTypes,$t as default};
