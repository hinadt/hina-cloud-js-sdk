var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n,r,o,i=function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};function s(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function c(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError,function(t){t.LOG="log",t.INFO="info",t.WARN="warn",t.ERROR="error",t.ASSERT="assert"}(n||(n={})),function(t){t.BEACON="beacon",t.IMAGE="image",t.AJAX="ajax"}(r||(r={})),function(t){t.INTEGER="INTEGER",t.STRING="STRING",t.BOOLEAN="BOOLEAN"}(o||(o={}));var u=function(t,e){this.options=t,this.context=e,this.disabled=!1};c(c([],a(["utm_source","utm_medium","utm_campaign","utm_content","utm_term"]),!1),a(["ha_utm"]),!1);var p="hinasdk_domain_test",d=Object.prototype.toString;function l(t){return"[object Object]"===d.call(t)}function h(t){return null!=t}function f(t){return Array.isArray(t)}function m(t){return"function"==typeof t}function _(t){return"string"==typeof t}function g(t){var e="";if(_(t))return t;if(null==t?void 0:t.stack)e=l(t.stack)?JSON.stringify(t.stack):t.stack;else{if(!t)return"未知js错误";e=l(t)?JSON.stringify(t):t.toString()}return e}function v(t){try{return JSON.parse(t)}catch(t){}return t}function y(t){try{return JSON.stringify(t)}catch(e){return t}}function S(t){return 0===Object.keys(t).length}function H(){return Date.now&&m(Date.now)?Date.now():(new Date).getTime()}function w(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Object.create(null);return t.forEach((function(t){t&&Object.keys(t).forEach((function(e){var r=t[e];l(r)?l(n[e])?n[e]=w(n[e],r):n[e]=w(r):n[e]=r}))})),n}function E(t,e){if(void 0===e&&(e=3),!t)return t;var n=t.toString(),r=n.indexOf(".");return n=-1!==r?n.substring(0,r+e+1):n.substring(0),parseFloat(n)}function b(){var t=function(t){t=t||window.location.hostname,/^[a-zA-Z0-9\u4e00-\u9fa5\-\\.]+$/.exec(t)||(t="");var e=t.split(".");if(e.length>=2&&!/^(\d+\.)+\d+$/.test(t))for(var n=".".concat(e.splice(e.length-1,1));e.length>0;)if(n=".".concat(e.splice(e.length-1,1)).concat(n),document.cookie="".concat(p,"=true; path=/; domain=").concat(n),-1!==document.cookie.indexOf("".concat(p,"=true")))return document.cookie="".concat(p,"=true; path=/; domain=").concat(n,"; max-age=0"),n;return""}();return""===t?"url解析失败":t}function R(){var t=H(),e=Math.floor(1e6*Math.random());return"".concat(t,"_").concat(e)}function x(){var t=H(),e=Math.floor(1e6*Math.random());return Number(String(t).slice(-5)+String(e).slice(0,4))}function O(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0}function P(t){try{return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x".concat(e)))})))}catch(e){return t}}function T(t){if(!t)return"";var e=t.match(/\/([^/]+)$/);return e?e[1]:""}function C(t){if(void 0===(null==t?void 0:t.stack)||!(null==t?void 0:t.stack))return[];for(var e,n=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,r=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,s=t.stack.split("\n"),a=[],c=0;c<s.length;c++){var u=s[c];(e=n.exec(u))||(e=r.exec(u))?a.push({source:e[2],filename:T(e[2]),lineno:e[3]?+e[3]:null,colno:e[4]?+e[4]:null}):(e=o.exec(u))?a.push({source:e[3],filename:T(e[3]),lineno:e[4]?+e[4]:null,colno:e[5]?+e[5]:null}):(e=i.exec(u))&&a.push({source:e[5],filename:T(e[5]),lineno:e[1]?+e[1]:null,colno:e[2]?+e[2]:null})}return a.length>0?[a[0]]:a}var I=function(){function t(){this.name="CookieStorage"}return t.prototype.isSupport=function(t,e){var n=this;void 0===t&&(t="cookie_support_test"),void 0===e&&(e="1");return navigator.cookieEnabled&&(n.set(t,e),n.get(t)===e&&(n.remove(t),!0))},t.prototype.get=function(t){var e,n,r=document.cookie.split(";");try{for(var o=s(r),i=o.next();!i.done;i=o.next()){var a=i.value.split("=");if(a[0].trim()===t)return decodeURIComponent(a[1])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return null},t.prototype.set=function(t,e,n,r,o,i,s){r=r||"/",t=t.trim(),e=e.trim();var a="".concat(t,"=").concat(encodeURIComponent(e),"; path=").concat(r,";");n=h(n)?n:63072e8,a+=" max-age=".concat(n,";"),s&&(a+=" secure;"),o&&(a+=" domain=".concat(o,";")),["Strict","Lax","None"].includes(i)&&(a+=" SameSite=".concat(i,";")),document.cookie=a},t.prototype.remove=function(t,e){void 0===e&&(e="/"),this.set(t,"1",0,e)},t.prototype.setDomain=function(t,e,n){var r=b();"url解析失败"===r&&(r=""),this.set(t,e,n,"/",r)},t}(),A=function(){function t(){this.name="LocalStorage"}return t.prototype.isSupport=function(){var t=!0;try{var e="__localStorageSupport__",n="testIsSupportStorage";this.set(e,n),this.get(e)!==n&&(t=!1),this.remove(e)}catch(e){t=!1}return t},t.prototype.key=function(t){return window.localStorage.key(t)},t.prototype.get=function(t){return window.localStorage.getItem(t)},t.prototype.length=function(){return window.localStorage.length},t.prototype.set=function(t,e){try{window.localStorage.setItem(t,e)}catch(t){}},t.prototype.remove=function(t){window.localStorage.removeItem(t)},t.prototype.parse=function(t){var e=this.get(t);try{e=JSON.parse(e)}catch(t){e=""}return e},t}(),L=function(){function t(){this.name="MemoryStorage",this.data={}}return t.prototype.get=function(t){var e=this.data[t];return h(null==e?void 0:e.expireTime)?e.expireTime<H()?null:e.value:null==e?void 0:e.value},t.prototype.set=function(t,e,n){if(h(n)){var r=H()+1e3*n;this.data[t]={value:e,expireTime:r}}this.data[t]={value:e}},t.prototype.setDomain=function(t,e,n){this.set(t,e,n)},t}();function q(t,e){if(void 0===e&&(e=n.LOG),"undefined"!=typeof console){var r=console[e]||console.log;"function"==typeof r&&r(t)}}var k,N={all:k=k||new Map,on:function(t,e){var n=k.get(t);n?n.push(e):k.set(t,[e])},emit:function(t,e){var n=k.get(t);n&&n.forEach((function(t){t(e)}))},off:function(t,e){var n=k.get(t);if(n)if(e){var r=n.indexOf(e);r>=0&&n.splice(r,1)}else k.set(t,[])}},D=function(){function t(t,e){this.options=t,this.isFirstTime=!1,this.isFirstDay=!1,this.state=e}return t.prototype.log=function(t,e){void 0===e&&(e=n.LOG),this.options.showLog&&q(t,e)},t.prototype.checkSetValue=function(t,e){return!(("number"!=typeof(r=e=null!=e?e:"")||Number.isNaN(r))&&!_(e))||(this.log("".concat(t,": id must be string or number"),n.WARN),!1);var r},t.prototype.setDeviceId=function(t){void 0===t&&(t=""),this.checkSetValue("deviceId",t)&&this.set("deviceId",t)},t.prototype.setAccountId=function(t){void 0===t&&(t=""),this.checkSetValue("accountId",t)&&(this.set("accountId",t),N.emit("changeAccountId"))},t.prototype.setAnonymousId=function(t){this.state.anonymousId?this.log("Current anonymousId is ".concat(this.getAnonymousId(),", it has been set"),n.WARN):this.checkSetValue("anonymousId",t)&&this.set("anonymousId",t)},t.prototype.setProps=function(t){var e=w(this.state.props||{},t);for(var n in e)"string"==typeof e[n]&&(e[n]=e[n].slice(0,200));this.set("props",e)},t.prototype.getAnonymousId=function(){return this.state.anonymousId},t.prototype.getDeviceId=function(){return this.state.deviceId},t.prototype.getAccountId=function(){return this.state.accountId},t.prototype.clear=function(){this.state={},this.save()},t.prototype.set=function(t,e){this.state[t]=e,this.save()},t.prototype.afterInit=function(t){t?(this.isFirstDay=function(t){var e;try{var n=new Date,r=n.getFullYear(),o=n.getMonth()+1,i=n.getDate(),s=new Date(t),a=s.getFullYear(),c=s.getMonth()+1,u=s.getDate();e=r===a&&o===c&&i===u}catch(t){e=!1}return e}(this.state.firstVisitTime),this.save()):(this.isFirstDay=!0,this.isFirstTime=!0);var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return"x"===t?e.toString(16):(3&e|8).toString(16)}));this.getAnonymousId()||this.setAnonymousId(e),this.getDeviceId()||this.setDeviceId(e)},t}(),M=function(t){function r(e){var n=this,r={accountId:null,deviceId:null,anonymousId:null,sessionId:null,firstVisitTime:H(),props:{}};return(n=t.call(this,e,r)||this).options=e,n.storeName="hinasdk_crossdata",n.hLatestUtm={},n.hUtm={},n.customUtm={},n}return e(r,t),r.prototype.getUtmFromProps=function(t){for(var e in this.state.props){var n=this.state.props[e];e.startsWith("H_latest_")?this.hLatestUtm[e]=n:e.startsWith("H_")&&(this.hUtm[e]=n),t.includes(e)&&(this.customUtm[e]=n)}},r.prototype.init=function(){var t,e=new I,r=new L,o=new A;e.isSupport()?this.storage=e:(this.log("Cookie storage is not supported, SDK internal cache has been enabled",n.WARN),this.storage=r),o.isSupport()?this.localStorage=o:this.log("localStorage is not supported, SDK internal cache has been enabled",n.WARN),!(t=this.storage.get(this.storeName))&&this.localStorage&&(t=this.localStorage.get(this.storeName)),t&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(t)?this.state=v(t):t=null,this.afterInit(t)},r.prototype.save=function(){this.storage.setDomain(this.storeName,JSON.stringify(this.state)),this.localStorage&&this.localStorage.set(this.storeName,JSON.stringify(this.state))},r.prototype.getCookie=function(){return this.storage.get(this.storeName)},r.prototype.setSessionId=function(t){this.set("sessionId",t)},r.prototype.getSessionId=function(){return this.state.sessionId||""},r.prototype.getSessionIdCreateTime=function(){var t=this.getSessionId().split("_")[0],e=Number(t);return Number.isNaN(e)?0:e},r}(D),j=function(){function t(){this.isReady=!1,this.isReady||this.init(),this.isReady=!0}return t.prototype.init=function(){this.os=this.getOs(),this.osVersion=this.getOsVersion();var t=this.getBrowser(),e=t.type,n=t.version;this.browserName=e,this.browserVersion=n,this.model=this.getModel()},t.prototype.getOs=function(){var t=navigator.userAgent;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)&&!window.MSStream?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":/CrOS/.test(t)?"Chrome OS":"取值异常"},t.prototype.getOsVersion=function(){var t=navigator.userAgent;if(/Windows/i.test(t)){var e=/Windows NT ([\d.]+)/;return t.match(e)?t.match(e)[1]:""}if(/(iPhone|iPad|iPod)/.test(t)&&!window.MSStream){e=/OS ([\d_]+)/;return t.match(e)?t.match(e)[1].replace(/_/g,"."):""}if(/Android/.test(t)){e=/Android ([\d.]+)/;return t.match(e)?t.match(e)[1]:""}if(/Mac/i.test(t)){e=/Mac OS X ([\d_]+)/;return t.match(e)?t.match(e)[1].replace(/_/g,"."):""}return""},t.prototype.getBrowser=function(){var t,e={type:"",version:""};try{var n=null===(t=navigator.userAgent)||void 0===t?void 0:t.toLowerCase(),r=[];if(null!==n.match(/baidubrowser/)?(e.type="baidu",r.push(/baidubrowser\/([\d.]+)/)):null!==n.match(/bidubrowser/)?(e.type="baidu",r.push(/bidubrowser\/([\d.]+)/)):null!==n.match(/edg/)?(e.type="edge",r.push(/edg\/([\d.]+)/)):null!==n.match(/edgios/)?(e.type="edge",r.push(/edgios\/([\d.]+)/)):null!==n.match(/liebaofast/)?(e.type="liebao",r.push(/liebaofast\/([\d.]+)/)):null!==n.match(/sogoumobilebrowser/)?(e.type="sogou",r.push(/sogoumobilebrowser\/([\d.]+)/)):null!==n.match(/lbbrowser/)?(e.type="liebao",r.push(/lbbrowser\/([\d.]+)/)):null!==n.match(/crios/)?(e.type="chrome",r.push(/crios\/([\d.]+)/)):null!==n.match(/qihoobrowser/)?(e.type="360",r.push(/qihoobrowser\/([\d.]+)/)):null!==n.match(/mxios/)?(e.type="maxthon",r.push(/mxios\/([\d.]+)/)):null!==n.match(/fxios/)?(e.type="firefox",r.push(/fxios\/([\d.\w]+)/)):null!==n.match(/edge/)?(e.type="edge",r.push(/edge\/([\d.]+)/)):null!==n.match(/metasr/)?(e.type="sogou",r.push(/metasr ([\d.]+)/)):null!==n.match(/micromessenger/)?(e.type="micromessenger",r.push(/micromessenger\/([\d.]+)/)):null!==n.match(/mqqbrowser/)?(e.type="qq",r.push(/mqqbrowser\/([\d.]+)/)):null!==n.match(/qqbrowserlite/)?(e.type="qq",r.push(/qqbrowserlite\/([\d.]+)/)):null!==n.match(/tencenttraveler/)?(e.type="qq",r.push(/tencenttraveler\/([\d.]+)/)):null!==n.match(/qqbrowser/)?(e.type="qq",r.push(/qqbrowser\/([\d.]+)/)):null!==n.match(/maxthon/)?(e.type="maxthon",r.push(/maxthon\/([\d.]+)/)):null!==n.match(/ubrowser/)?(e.type="uc",r.push(/ubrowser\/([\d.]+)/)):null!==n.match(/ucbrowser/)?(e.type="uc",r.push(/ucbrowser\/([\d.]+)/)):null!==n.match(/firefox/)?(e.type="firefox",r.push(/firefox\/([\d.]+)/)):null!==n.match(/opera/)?(e.type="opera",r.push(/opera\/([\d.]+)/)):null!==n.match(/opr/)?(e.type="opera",r.push(/opr\/([\d.]+)/)):null!==n.match(/chrome/)?(e.type="chrome",r.push(/chrome\/([\d.]+)/)):null!==n.match(/safari/)?(e.type="safari",r.push(/version\/([\d.]+)/)):null===n.match(/trident/)&&null===n.match(/msie/)||(e.type="ie"),"ie"===e.type){var o=n.match(/trident\/([\d.]+)/)?n.match(/trident\/([\d.]+)/)[1]:"",i=n.match(/msie ([\d.]+)/)?n.match(/msie ([\d.]+)/)[1]:"";""!==o?e.version=String(parseInt(o,10)+4):""!==i&&(e.version=i)}else r&&(e.version=n.match(r[0])?n.match(r[0])[1]:"")}catch(t){e.type="取值异常"}return e},t.prototype.getModel=function(){var t=navigator.userAgent;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)){if(/iPhone|iPad|iPod/i.test(t))return t.match(/iPhone|iPad|iPod/i)[0];if(/Android/i.test(t))return t.match(/Android/i)[0]}var e=t.match(/Mac/);if(e)return e[0];var n=t.match(/Windows/);if(n)return n[0];var r=t.match(/Linux/);return r?r[0]:"取值异常"},t}();var U,B,J=function(){function t(t){this.options=t}return t.prototype.run=function(){var t=this;return new Promise((function(e){var n=t.options,r=n.imgUseCrossOrigin,o=n.url,i=n.data,s=new Image;r&&(s.crossOrigin="anonymous");var a=-1===o.indexOf("?")?"?":"&";s.src="".concat(o).concat(a).concat(i);var c=function(t){s=null,e({type:t})};s.onload=function(){c("success")},s.onerror=function(){c("success")}}))},t}(),F=function(){function t(t){this.options=t}return t.prototype.run=function(){var t=this;return new Promise((function(e){var n=t.options,r=n.url,o=n.data,i=n.timeout,s=n.credentials,a=n.contentType,c=n.customHeaders,u=void 0===c?{}:c,p=new XMLHttpRequest;p.open("POST",r,!0),p.timeout=i||2e4,p.isMonitor=!0,s&&(p.withCredentials=!0),p.setRequestHeader("Content-Type",a||"application/x-www-form-urlencoded"),l(u)&&!S(u)&&Object.keys(u).forEach((function(t){p.setRequestHeader(t,u[t])})),p.send(o||null),p.ontimeout=function(){p.abort()},p.onreadystatechange=function(){4===p.readyState&&(p.status>=200&&p.status<300||304===p.status?e({data:JSON.parse(p.responseText)||{},type:"success"}):e({type:"fail",msg:"网络异常, 请求失败，状态码=".concat(p.status)}))}}))},t}(),W=function(){function t(t){this.options=t}return t.prototype.run=function(){var t=this;return new Promise((function(e){var n=t.options,r=n.url,o=n.data;navigator.sendBeacon&&e(navigator.sendBeacon(r,o)?{type:"success"}:{type:"fail",msg:"sendBeacon 请求失败"})}))},t}(),V=function(){function t(t,e,n){void 0===e&&(e="hinasdk_tab"),void 0===n&&(n="hinasdk_data_"),this.options=t,this.batchKey=e,this.batchDataKey=n,this.isSending=!1,this.init()}return t.prototype.log=function(t,e){void 0===e&&(e=n.LOG),this.options.showLog&&q(t,e)},t.prototype.init=function(){var t=new A;t.isSupport()?(this.localStorage=t,this.isSupport=!0):(this.isSupport=!1,this.log("批量发送功能需要使用localstorage存储数据，但是您的浏览器不支持localstorage，所以不能使用该功能",n.WARN)),this.batchInterval()},t.prototype.getBatchConfig=function(){return this.options.batchSend},t.prototype.getStorageList=function(){if(!this.isSupport)return[];var t=[],e=this.localStorage.get(this.batchKey);return e&&(f(t=v(e))||(t=[])),t},t.prototype.batchInterval=function(){var t=this;if(this.isSupport){var e=this.getBatchConfig().sendInterval;setTimeout((function(){t.send().then((function(){t.batchInterval()}))}),e)}},t.prototype.send=function(){var t=this;return new Promise((function(e){var n=t.getStorageList();if(n.length>0&&t.isSupport){for(var r=t.getBatchConfig().dataSendTimeout,o=H(),i=[],s={},a=n.length,c=0;c<a;c++){var u=n[c],p=u.dataKey,d=u.expireTime;if(d>=o)s[p]={dataKey:p,expireTime:d},(S=t.localStorage.get(p))&&i.push(v(S));else t.localStorage.remove(p),n.splice(c,1),a--,c--}if(t.localStorage.set(t.batchKey,JSON.stringify(n)),0===i.length)e();else{var l=t.options,h=l.serverUrl,f=l.customHeaders,_=l.credentials,g=l.globalCallback,y=JSON.stringify(i),S=encodeURIComponent(P(y));t.isSending=!0,new F({url:h,data:"data_list=".concat(S),timeout:r,credentials:_,customHeaders:f}).run().then((function(n){m(g)&&g(h,i,n.type,n.msg||""),"success"===n.type&&t.remove(s),e(),t.isSending=!1}))}}else e()}))},t.prototype.remove=function(t){var e=this;if(this.isSupport){var n=this.getStorageList(),r=Object.keys(t);if(r.forEach((function(t){e.localStorage.remove(t)})),n.length===r.length)this.localStorage.set(this.batchKey,JSON.stringify([]));else{var o=n.filter((function(e){return!t[e.dataKey]}));this.localStorage.set(this.batchKey,JSON.stringify(o))}}},t.prototype.add=function(t){if(this.isSupport){var e=this.getBatchConfig(),n=e.sendInterval,r=e.storageLimit,o=this.batchDataKey+R(),i=this.getStorageList();i.unshift({dataKey:o,expireTime:H()+2*n}),this.localStorage.set(this.batchKey,JSON.stringify(i)),this.localStorage.set(o,JSON.stringify(t)),!this.isSending&&(i.length>r||"track_signup"===t.type||"H_pageview"===t.event)&&this.send()}},t}(),K=function(){function t(t,e){void 0===e&&(e=!0),this.isReady=!1,this.consolePrefix="埋点SDK",this.useInstancing=!0,this.plugins=[],this.options=t,this.useInstancing=e}return t.prototype.log=function(t,e){void 0===e&&(e=n.LOG),this.options.showLog&&("string"==typeof t&&this.consolePrefix&&(t="".concat(this.consolePrefix,"：").concat(t)),q(t,e))},t.prototype.runPlugins=function(t){var e=this;t.forEach((function(t){t.disabled||t.init((function(n){if(t.transform){var r=t.transform(n);r&&e.report(r)}}))}))},t.prototype.applyPlugins=function(t){var e=this;if(this.isReady){f(t)||(t=[t]);var r=[];t.forEach((function(t){var n=new t(e.options,e);e.plugins.push(n),r.push(n)})),this.runPlugins(r)}else this.log("请先初始化SDK实例",n.WARN)},t}(),G=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return e(o,t),o.prototype.sendReportData=function(t,e,o){var i=this.options,s=i.batchSend,a=i.globalCallback,c=i.serverUrl,u=i.dataSendTimeout,p=i.sendType,d=i.customHeaders,h=i.credentials,f=i.imgUseCrossOrigin;if(p=o||p,c){if(l(t)&&!S(t))if(s)this.batchSender.add(t);else{var g=t;_(t)||(g=y(t));var v=P(g),H={data:"data=".concat(encodeURIComponent(v)),url:c,timeout:u,imgUseCrossOrigin:f,customHeaders:d,credentials:h};(p===r.BEACON&&navigator.sendBeacon?new W(H):p===r.IMAGE&&H.data.length<2048?new J(H):new F(H)).run().then((function(n){return m(a)&&a(c,t,n.type,n.msg||""),m(e)&&e(c,t,n.type,n.msg||""),n}))}}else this.log("当前 serverUrl 为空，network 中不会发数据，请配置正确的 serverUrl！",n.WARN)},o}(K);!function(t){t.BASIC="basic",t.VITALS="vitals",t.RESOURCE="resource",t.LONG_TASK="longtask"}(U||(U={})),function(t){t.JS_ERROR="JsError",t.RESOURCE_ERROR="ResourceError",t.FETCH_ERROR="FetchError",t.AJAX_ERROR="AjaxError",t.PROMISE_ERROR="PromiseError",t.WHITE_SCREEN_ERROR="WhiteScreenError",t.VUE_ERROR="VueError",t.REACT_ERROR="ReactError",t.CAPTURE_EVENT="CaptureEvent",t.CAPTURE_EXCEPTION="CaptureException"}(B||(B={}));var X=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.options=e,r.context=n,r.name="JsErrorPlugin",r.isReady=!1,r}return e(n,t),n.prototype.init=function(t){this.isReady||(this.isReady=!0,window.onerror=function(e,n,r,o,i){if("ResizeObserver loop limit exceeded"!==e.toString()){var s=g(i);t({H_js_error_id:O(s),H_error_category:B.JS_ERROR,H_error_type:i.name||B.JS_ERROR,H_error_message:i.message,H_error_stack:JSON.stringify({details:C(i),errorStack:s})})}})},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(u),z=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.options=e,r.context=n,r.name="DomErrorPlugin",r.isReady=!1,r}return e(n,t),n.prototype.init=function(t){this.isReady||(this.isReady=!0,window.addEventListener("error",(function(e){if(e.target!==window){var n=e.target,r=n.src||n.href,o=(s=(i=n).tagName.toLowerCase(),a=i.getAttributeNames(),c="",a.forEach((function(t){c+=" ".concat(t,"='").concat(i.getAttribute(t),"'")})),"<".concat(s).concat(c,">"));t({H_js_error_id:O(o),H_error_category:B.RESOURCE_ERROR,H_error_type:B.RESOURCE_ERROR,H_error_message:o,H_source_element:o,H_source_src:r})}var i,s,a,c}),!0))},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(u);function $(){if(void 0!==window.performance&&"function"==typeof window.performance.getEntriesByType){var t=performance.getEntriesByType("navigation")[0],e=t.startTime,n=t.redirectStart,r=t.redirectEnd,o=t.fetchStart,i=t.domainLookupStart,s=t.domainLookupEnd,a=t.connectStart,c=t.secureConnectionStart,u=t.connectEnd,p=t.requestStart,d=t.responseStart,l=t.responseEnd,h=t.domInteractive,f=t.domContentLoadedEventEnd,m=t.loadEventStart,_=t.loadEventEnd,g=t.redirectCount,v=t.duration,y=t.unloadEventEnd,S=t.unloadEventStart;return{H_first_byte_time:E(d-e),H_unload_time:E(y-S),H_redirect_time:E(r-n),H_redirect_count:g,H_cache_check_time:E(i-o),H_dns_time:E(s-i),H_tcp_time:E(u-a),H_ssl_time:E(u-c),H_first_byte_response_time:E(d-n),H_dom_ready_time:E(f-o),H_request_time:E(d-p),H_content_transfer_time:E(l-d),H_dom_parsing_time:E(h-l),H_page_load_time:E(_-e),H_resource_load_time:E(m-f),H_resource_duration:v,H_load_event_time:E(_-m)}}var H=performance.timing,w=H.navigationStart,b=H.responseStart,R=H.unloadEventEnd,x=H.unloadEventStart,O=H.requestStart,P=H.responseEnd,T=H.redirectStart,C=H.redirectEnd,I=H.domainLookupStart,A=H.fetchStart,L=H.domainLookupEnd,q=H.connectStart,k=H.connectEnd,N=H.secureConnectionStart,D=H.domContentLoadedEventEnd,M=H.domInteractive,j=H.loadEventStart,U=H.loadEventEnd;return{H_first_byte_time:E(b-w),H_unload_time:E(R-x),H_redirect_time:E(C-T),H_cache_check_time:E(I-A),H_dns_time:E(L-I),H_tcp_time:E(k-q),H_ssl_time:E(k-N),H_first_byte_response_time:E(b-T),H_dom_ready_time:E(D-A),H_request_time:E(b-O),H_content_transfer_time:E(P-b),H_dom_parsing_time:E(M-P),H_page_load_time:E(U-w),H_resource_load_time:E(j-D),H_load_event_time:E(U-j)}}var Y,Z,Q,tt,et=-1,nt=function(t){addEventListener("pageshow",(function(e){e.persisted&&(et=e.timeStamp,t(e))}),!0)},rt=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},ot=function(){var t=rt();return t&&t.activationStart||0},it=function(t,e){var n=rt(),r="navigate";return et>=0?r="back-forward-cache":n&&(document.prerendering||ot()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},st=function(t,e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver((function(t){Promise.resolve().then((function(){e(t.getEntries())}))}));return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch(t){}},at=function(t,e,n,r){var o,i;return function(s){e.value>=0&&(s||r)&&((i=e.value-(o||0))||void 0===o)&&(o=e.value,e.delta=i,e.rating=function(t,e){return t>e[1]?"poor":t>e[0]?"needs-improvement":"good"}(e.value,n),t(e))}},ct=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},ut=function(t){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t()}))},pt=function(t){var e=!1;return function(){e||(t(),e=!0)}},dt=-1,lt=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},ht=function(t){"hidden"===document.visibilityState&&dt>-1&&(dt="visibilitychange"===t.type?t.timeStamp:0,mt())},ft=function(){addEventListener("visibilitychange",ht,!0),addEventListener("prerenderingchange",ht,!0)},mt=function(){removeEventListener("visibilitychange",ht,!0),removeEventListener("prerenderingchange",ht,!0)},_t=function(){return dt<0&&(dt=lt(),ft(),nt((function(){setTimeout((function(){dt=lt(),ft()}),0)}))),{get firstHiddenTime(){return dt}}},gt=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},vt=[1800,3e3],yt=function(t,e){e=e||{},gt((function(){var n,r=_t(),o=it("FCP"),i=st("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(i.disconnect(),t.startTime<r.firstHiddenTime&&(o.value=Math.max(t.startTime-ot(),0),o.entries.push(t),n(!0)))}))}));i&&(n=at(t,o,vt,e.reportAllChanges),nt((function(r){o=it("FCP"),n=at(t,o,vt,e.reportAllChanges),ct((function(){o.value=performance.now()-r.timeStamp,n(!0)}))})))}))},St=[.1,.25],Ht=[2500,4e3],wt={},Et=function(t,e){e=e||{},gt((function(){var n,r=_t(),o=it("LCP"),i=function(t){e.reportAllChanges||(t=t.slice(-1)),t.forEach((function(t){t.startTime<r.firstHiddenTime&&(o.value=Math.max(t.startTime-ot(),0),o.entries=[t],n())}))},s=st("largest-contentful-paint",i);if(s){n=at(t,o,Ht,e.reportAllChanges);var a=pt((function(){wt[o.id]||(i(s.takeRecords()),s.disconnect(),wt[o.id]=!0,n(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,(function(){return function(t){var e=self.requestIdleCallback||self.setTimeout,n=-1;return t=pt(t),"hidden"===document.visibilityState?t():(n=e(t),ut(t)),n}(a)}),{once:!0,capture:!0})})),ut(a),nt((function(r){o=it("LCP"),n=at(t,o,Ht,e.reportAllChanges),ct((function(){o.value=performance.now()-r.timeStamp,wt[o.id]=!0,n(!0)}))}))}}))},bt=[800,1800],Rt=function t(e){document.prerendering?gt((function(){return t(e)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(e)}),!0):setTimeout(e,0)},xt=function(t,e){e=e||{};var n=it("TTFB"),r=at(t,n,bt,e.reportAllChanges);Rt((function(){var o=rt();o&&(n.value=Math.max(o.responseStart-ot(),0),n.entries=[o],r(!0),nt((function(){n=it("TTFB",0),(r=at(t,n,bt,e.reportAllChanges))(!0)})))}))},Ot={passive:!0,capture:!0},Pt=new Date,Tt=function(t,e){Y||(Y=e,Z=t,Q=new Date,At(removeEventListener),Ct())},Ct=function(){if(Z>=0&&Z<Q-Pt){var t={entryType:"first-input",name:Y.type,target:Y.target,cancelable:Y.cancelable,startTime:Y.timeStamp,processingStart:Y.timeStamp+Z};tt.forEach((function(e){e(t)})),tt=[]}},It=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,e){var n=function(){Tt(t,e),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,Ot),removeEventListener("pointercancel",r,Ot)};addEventListener("pointerup",n,Ot),addEventListener("pointercancel",r,Ot)}(e,t):Tt(e,t)}},At=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(e){return t(e,It,Ot)}))},Lt=[100,300];function qt(){return new Promise((function(t){!function(t,e){e=e||{},gt((function(){var n,r=_t(),o=it("FID"),i=function(t){t.startTime<r.firstHiddenTime&&(o.value=t.processingStart-t.startTime,o.entries.push(t),n(!0))},s=function(t){t.forEach(i)},a=st("first-input",s);n=at(t,o,Lt,e.reportAllChanges),a&&(ut(pt((function(){s(a.takeRecords()),a.disconnect()}))),nt((function(){var r;o=it("FID"),n=at(t,o,Lt,e.reportAllChanges),tt=[],Z=-1,Y=null,At(addEventListener),r=i,tt.push(r),Ct()})))}))}((function(e){t(e.value)}))}))}function kt(){return new Promise((function(t){!function(t,e){e=e||{},yt(pt((function(){var n,r=it("CLS",0),o=0,i=[],s=function(t){t.forEach((function(t){if(!t.hadRecentInput){var e=i[0],n=i[i.length-1];o&&t.startTime-n.startTime<1e3&&t.startTime-e.startTime<5e3?(o+=t.value,i.push(t)):(o=t.value,i=[t])}})),o>r.value&&(r.value=o,r.entries=i,n())},a=st("layout-shift",s);a&&(n=at(t,r,St,e.reportAllChanges),ut((function(){s(a.takeRecords()),n(!0)})),nt((function(){o=0,r=it("CLS",0),n=at(t,r,St,e.reportAllChanges),ct((function(){return n()}))})),setTimeout(n,0))})))}((function(e){t(e.value)}),{reportAllChanges:!0})}))}var Nt=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.options=e,r.context=n,r.name="PerformancePlugin",r.isReady=!1,r}return e(n,t),n.prototype.init=function(t){if(!this.isReady){this.isReady=!0;var e,n=this.options.performanceOff;n.includes(U.VITALS)||Promise.all([new Promise((function(t){Et((function(e){t(e.value)}))})),qt(),kt(),new Promise((function(t){xt((function(e){t(e.value)}))})),new Promise((function(t){yt((function(e){t(e.value)}))})),new Promise((function(t){"PerformanceObserver"in window?new PerformanceObserver((function(e){var n,r,o=e.getEntries();try{for(var i=s(o),a=i.next();!a.done;a=i.next()){var c=a.value;"first-paint"===c.name&&t(c.startTime)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}})).observe({entryTypes:["paint"]}):t(0)}))]).then((function(t){var e=a(t,6),n=e[0],r=e[1],o=e[2],i=e[3],s=e[4];return{H_first_paint_time:E(e[5]),H_first_contentful_paint_time:E(s),H_largest_contentful_paint_time:E(n),H_time_to_first_byte:E(i),H_first_input_delay:E(r),H_cumulative_layout_shift:E(o)}})).then((function(e){t(i({event:"H_performance_page",H_category:U.VITALS},e))})),n.includes(U.LONG_TASK)||(e=function(e){t(i({event:"H_performance_page",H_category:U.LONG_TASK,H_url:window.location.href},e))},"PerformanceObserver"in window&&new PerformanceObserver((function(t){var n=t.getEntries(),r=0,o=[];n.forEach((function(t){var e=t.duration,n=t.name,i=t.startTime;r+=e,o.push({duration:E(e),startTime:E(i),name:n})})),e({H_long_task_time:E(r),H_long_task:n.length,H_long_task_list:o})})).observe({entryTypes:["longtask"]})),window.addEventListener("load",(function(){n.includes(U.BASIC)||t(i({event:"H_performance_loading",H_category:U.BASIC},$()))}))}},n.prototype.transform=function(t){return this.context.getReportData(t.event,t)},n}(u),Dt=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.options=e,r.context=n,r.name="FetchPlugin",r.isReady=!1,r}return e(n,t),n.prototype.init=function(t){if(window.fetch&&!this.isReady){this.isReady=!0;var e=this;!function(t,e,n,r){if(void 0!==t&&(e in t||r)){var o=n(t[e]);m(o)&&(t[e]=o)}}(window,"fetch",(function(n){return function(r,o){void 0===o&&(o={});var s=H(),a=o||{},c=a.headers,u=a.signal,p=a.method;return n(r,o).then((function(n){if(!n.ok){var a=i(i({},e.context.getRequestHeaders()),c||{}),u=H();n.clone().text().then((function(e){t({H_js_error_id:O("url=".concat(r,"&method=").concat(p)),H_error_category:B.FETCH_ERROR,H_error_type:B.FETCH_ERROR,H_error_message:r,H_request_url:r,H_request_headers:y(a),H_request_method:o.method.toLowerCase(),H_request_params:_(o.body)?o.body:"",H_response_status:n.status,H_response_status_text:n.statusText,H_request_time:s,H_response_time:u,H_response_data:e})}))}return n})).catch((function(n){if(u&&u.aborted)throw n;var a="";a=(a=n instanceof Error?null==n?void 0:n.message:y(n))||"网络错误，或者无法连接";var d=i(i({},e.context.getRequestHeaders()),c||{});throw t({H_js_error_id:O("url=".concat(r,"&method=").concat(p)),H_error_category:B.FETCH_ERROR,H_error_type:B.FETCH_ERROR,H_error_message:r,H_request_url:r,H_request_headers:y(d),H_request_method:o.method.toLowerCase(),H_request_params:_(o.body)?o.body:"",H_response_status:0,H_response_status_text:a,H_request_time:s,H_response_time:H(),H_response_data:a}),n}))}}))}},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(u),Mt=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.options=e,r.context=n,r.name="XhrPlugin",r.isReady=!1,r}return e(n,t),n.prototype.init=function(t){if(!this.isReady){this.isReady=!0;var e=this,n=XMLHttpRequest.prototype.open,r=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.H_request_method=t[0],this.H_request_url=t[1],this.H_request_time=H(),n.apply(this,t)},XMLHttpRequest.prototype.send=function(n){var o=this;this.addEventListener("abort",(function(){o.H_response_status_text="abort"})),this.addEventListener("error",(function(){o.H_response_status_text="error"})),this.addEventListener("timeout",(function(){o.H_response_status_text="timeout"})),this.addEventListener("loadend",(function(){var r=o,i=r.status,s=r.statusText,a=r.responseType,c=r.responseText,u=r.response,p=r.H_request_method,d=r.H_request_url,h=r.H_request_time,f=r.H_response_status_text;if(!(i>=200&&i<300)&&"abort"!==f&&!o.isMonitor){var m=a&&"text"!==a?u:c,g=f||s;"error"===f?g="网络错误，或者无法连接":"timeout"===f&&(g="请求超时"),t({H_js_error_id:O("url=".concat(d,"&method=").concat(p)),H_error_category:B.AJAX_ERROR,H_error_type:B.AJAX_ERROR,H_error_message:d,H_request_url:d,H_request_headers:y(e.context.getRequestHeaders()),H_request_method:p,H_request_params:l(n)?y(n):_(n)?n:"",H_response_status:i,H_response_status_text:g,H_request_time:h,H_response_time:H(),H_response_data:m&&y(m)})}delete o.H_request_method,delete o.H_request_url,delete o.H_request_time,delete o.H_response_status_text}));try{r.call(this,n)}catch(t){}}}},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(u),jt=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.options=e,r.context=n,r.name="PromiseErrorPlugin",r.isReady=!1,r}return e(n,t),n.prototype.init=function(t){this.isReady||(this.isReady=!0,window.addEventListener("unhandledrejection",(function(e){var n=e.reason,r=B.PROMISE_ERROR,o="",i="";_(n)?o=n:void 0===n?o="undefined":(null==n?void 0:n.stack)?(r=n.name,o=n.message,i=JSON.stringify({errorStack:g(n),details:C(n)})):o=y(n);["axioserror","cancelederror","aborterror"].includes(r.toLowerCase())||t({H_js_error_id:O("message=".concat(o,"&stack=").concat(i)),H_error_category:B.PROMISE_ERROR,H_error_type:r||B.PROMISE_ERROR,H_error_message:o,H_error_stack:i})})))},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(u),Ut=function(t){function o(e,n){void 0===n&&(n=!0);var r=t.call(this,e,n)||this;return r.consolePrefix="性能监控SDK",r.generalProperties={H_lib_version:"4.0.4",H_lib:"js",H_lib_method:"code",H_timezone_offset:(new Date).getTimezoneOffset()},r.requestHeaders={},r.customProperties={},r.useInstancing&&r.init(e),r}return e(o,t),o.prototype.init=function(t){var e=this;if(this.isReady)this.log("Monitor has been initialized",n.ERROR);else{var o={serverUrl:"",name:"",showLog:!1,errorCapture:!0,performance:!0,openPromiseCapture:!1,sendType:r.BEACON,customHeaders:{},credentials:!1,dataSendTimeout:3e3,batchSend:!1,imgUseCrossOrigin:!1,performanceOff:[],plugins:[]};this.options=i(i({},o),t),this.initState(),this.normalizeConfig(),this.initPlugins(),this.isReady=!0,window.addEventListener("beforeunload",(function(){e.store.setSessionId("")}))}},o.prototype.initState=function(){this.store=new M(this.options),this.store.init()},o.prototype.normalizeConfig=function(){var t=this.options,e=t.serverUrl,r=t.batchSend;""===(e=(e=e||"").trim())&&this.log("当前 serverUrl 为空，network 中不会发数据，请配置正确的 serverUrl！",n.WARN),(!0===r||l(r)&&!S(r))&&(this.options.batchSend=i({dataSendTimeout:6e3,sendInterval:6e3,storageLimit:200},r),this.batchSender=new V(this.options,"hinaepm_tab","hinaepm_data_"))},o.prototype.initPlugins=function(){var t=this,e=this.options,n=e.errorCapture,r=e.performance,o=e.openPromiseCapture,i=e.plugins,s=void 0===i?[]:i;s=s||[];var a=new X(this.options,this),c=new z(this.options,this),u=new Dt(this.options,this),p=new Mt(this.options,this),d=new jt(this.options,this),l=new Nt(this.options,this);a.disabled=!n,c.disabled=!n,u.disabled=!n,p.disabled=!n,d.disabled=!(n&&o),l.disabled=!r,this.plugins=[a,c,u,p,d,l],f(s)&&s.forEach((function(e){var n=new e(t.options,t);t.plugins.push(n)})),this.runPlugins(this.plugins)},o.prototype.report=function(t,e,n){var r=this.options.beforeSend,o=t;m(r)&&(o=r(o)),this.log(o),this.sendReportData(o,e,n)},o.prototype.getReportData=function(t,e){var n=this.options.sourcemapVersion;n||(n="1.0.0");var r=this.store.getAnonymousId(),o=this.store.getAccountId(),s=this.store.getSessionId(),a=H(),c=i(i(i(i({},this.getGeneralProperties()),this.customProperties),{H_js_sourcemap_version:n}),e||{}),u={anonymous_id:r,type:"track",event:t,time:a,_track_id:x(),properties:c};(o&&!/^[0-9a-f]{8,}-[0-9a-f]{4,}-[0-9a-f]{4,}-[0-9a-f]{4,}-[0-9a-f]{12,}$/.test(o)&&(u.account_id=o),s)?H()-this.store.getSessionIdCreateTime()>18e5&&(s=R(),this.store.setSessionId(s)):(s=R(),this.store.setSessionId(s));return c.H_session_id=s,u.send_time=H(),u},o.prototype.getGeneralProperties=function(){var t=new j;return this.generalProperties=i(i({},this.generalProperties),{H_viewport_width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,H_viewport_height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,H_screen_width:window.screen.width,H_screen_height:window.screen.height,H_browser:t.browserName,H_browser_version:t.browserVersion,H_os:t.os,H_os_version:t.osVersion,H_model:t.model,H_browser_user_agent:navigator.userAgent,H_language:_(navigator.language)?navigator.language.toLowerCase():"取值异常",H_url:window.location.href,H_title:document.title}),this.generalProperties},o.prototype.captureException=function(t,e,n){t instanceof Error||(t=new Error(t)),l(e)||(e={});var r=g(t),o=this.getReportData("H_performance_js",{H_js_error_id:O(r),H_error_category:B.CAPTURE_EXCEPTION,H_error_type:B.CAPTURE_EXCEPTION,H_error_message:t.message,H_error_stack:JSON.stringify({details:C(t),errorStack:r}),H_capture_extra:JSON.stringify(e)});this.report(o,n)},o.prototype.captureEvent=function(t,e){if(l(t)){var n=t.message,r=t.extra;l(r)||(r={});var o=this.getReportData("H_performance_js",{H_js_error_id:O(n||""),H_error_category:B.CAPTURE_EVENT,H_error_type:B.CAPTURE_EVENT,H_error_message:n||"",H_capture_message:n||"",H_capture_extra:JSON.stringify(r)});this.report(o,e)}else this.log("captureEvent event参数错误：event必须是一个对象")},o.prototype.setCommonProperties=function(t){l(t)&&!S(t)&&(this.customProperties=w(this.customProperties,t))},o.prototype.getCommonProperties=function(){return i(i({},this.getGeneralProperties()),this.customProperties)},o.prototype.clearCommonProperties=function(t){var e=this;void 0===t&&(t=!0),!0===t?this.customProperties={}:f(t)&&t.forEach((function(t){t in e.customProperties&&delete e.customProperties[t]}))},o.prototype.setRequestHeaders=function(t){void 0===t&&(t={}),l(t)&&!S(t)&&(this.requestHeaders=w(this.requestHeaders,t))},o.prototype.getRequestHeaders=function(){return this.requestHeaders},o.prototype.clearRequestHeaders=function(t){var e=this;void 0===t&&(t=!0),!0===t?this.requestHeaders={}:f(t)&&t.forEach((function(t){t in e.requestHeaders&&delete e.requestHeaders[t]}))},o.componentName="Monitor",o}(G);var Bt=new Ut({},!1);export{n as ConsoleTypes,B as ErrorTypes,Ut as Monitor,U as PerformanceFeat,u as PluginBase,r as ReportTypes,o as VariablesTypes,Bt as default};
