!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).hinaEpmStatistic={})}(this,(function(e){"use strict";var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},t(e,r)};function r(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var n,o,i,s,a,c,u=function(){return u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)};function p(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function l(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError,e.ConsoleTypes=void 0,(n=e.ConsoleTypes||(e.ConsoleTypes={})).LOG="log",n.INFO="info",n.WARN="warn",n.ERROR="error",n.ASSERT="assert",e.ReportTypes=void 0,(o=e.ReportTypes||(e.ReportTypes={})).BEACON="beacon",o.IMAGE="image",o.AJAX="ajax",e.PlatformTypes=void 0,(i=e.PlatformTypes||(e.PlatformTypes={})).WEB="web",i.MINI_APP="mini_app",e.ErrorTypes=void 0,(s=e.ErrorTypes||(e.ErrorTypes={})).JS_ERROR="JsError",s.RESOURCE_ERROR="ResourceError",s.FETCH_ERROR="FetchError",s.AJAX_ERROR="AjaxError",s.PROMISE_ERROR="PromiseError",s.WHITE_SCREEN_ERROR="WhiteScreenError",s.VUE_ERROR="VueError",s.REACT_ERROR="ReactError",s.CAPTURE_EVENT="CaptureEvent",s.CAPTURE_EXCEPTION="CaptureException",e.PerformanceFeat=void 0,(a=e.PerformanceFeat||(e.PerformanceFeat={})).BASIC="basic",a.VITALS="vitals",a.RESOURCE="resource",a.LONG_TASK="longtask",e.VariablesTypes=void 0,(c=e.VariablesTypes||(e.VariablesTypes={})).INTEGER="INTEGER",c.STRING="STRING",c.BOOLEAN="BOOLEAN";var d=function(e,t){this.options=e,this.context=t},f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function h(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m={exports:{}};!function(e,t){!function(r,n){var o="function",i="undefined",s="object",a="string",c="major",u="model",p="name",l="type",d="vendor",f="version",h="architecture",m="console",v="mobile",g="tablet",w="smarttv",_="wearable",b="embedded",y="Amazon",S="Apple",E="ASUS",H="BlackBerry",T="Browser",R="Chrome",x="Firefox",k="Google",O="Huawei",C="LG",P="Microsoft",A="Motorola",I="Opera",N="Samsung",L="Sharp",q="Sony",j="Xiaomi",D="Zebra",M="Facebook",U="Chromium OS",B="Mac OS",F=" Browser",z=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},J=function(e,t){return typeof e===a&&-1!==V(t).indexOf(V(e))},V=function(e){return e.toLowerCase()},G=function(e,t){if(typeof e===a)return e=e.replace(/^\s\s*/,""),typeof t===i?e:e.substring(0,500)},K=function(e,t){for(var r,i,a,c,u,p,l=0;l<t.length&&!u;){var d=t[l],f=t[l+1];for(r=i=0;r<d.length&&!u&&d[r];)if(u=d[r++].exec(e))for(a=0;a<f.length;a++)p=u[++i],typeof(c=f[a])===s&&c.length>0?2===c.length?typeof c[1]==o?this[c[0]]=c[1].call(this,p):this[c[0]]=c[1]:3===c.length?typeof c[1]!==o||c[1].exec&&c[1].test?this[c[0]]=p?p.replace(c[1],c[2]):n:this[c[0]]=p?c[1].call(this,p,c[2]):n:4===c.length&&(this[c[0]]=p?c[3].call(this,p.replace(c[1],c[2])):n):this[c]=p||n;l+=2}},W=function(e,t){for(var r in t)if(typeof t[r]===s&&t[r].length>0){for(var o=0;o<t[r].length;o++)if(J(t[r][o],e))return"?"===r?n:r}else if(J(t[r],e))return"?"===r?n:r;return t.hasOwnProperty("*")?t["*"]:e},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},$={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,f],[/opios[\/ ]+([\w\.]+)/i],[f,[p,I+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[p,I+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[p,I]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[p,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[p,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[p,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[p,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[p,"UC"+T]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[p,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[p,"Smart Lenovo "+T]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+T],f],[/\bfocus\/([\w\.]+)/i],[f,[p,x+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[p,I+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[p,I+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[p,"MIUI "+T]],[/fxios\/([-\w\.]+)/i],[f,[p,x]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360"+F]],[/\b(qq)\/([\w\.]+)/i],[[p,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1"+F],f],[/samsungbrowser\/([\w\.]+)/i],[f,[p,N+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[p,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[p,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[p,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,M],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[p,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[p,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[p,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[p,R+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,R+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[p,"Android "+T]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[f,W,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[p,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],f],[/(wolvic)\/([\w\.]+)/i],[p,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[p,x+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[p,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[p,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,V]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",V]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,V]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,N],[l,g]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,N],[l,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[d,S],[l,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,S],[l,g]],[/(macintosh);/i],[u,[d,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,L],[l,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,O],[l,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,O],[l,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[d,j],[l,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,j],[l,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[l,v]],[/\b(opd2\d{3}a?) bui/i],[u,[d,"OPPO"],[l,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[l,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[l,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,A],[l,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,A],[l,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,C],[l,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,C],[l,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[l,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[l,v]],[/(pixel c)\b/i],[u,[d,k],[l,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,k],[l,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,q],[l,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,q],[l,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[l,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,y],[l,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,y],[l,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[l,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,H],[l,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,E],[l,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,E],[l,v]],[/(nexus 9)/i],[u,[d,"HTC"],[l,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[l,v]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[d,"TCL"],[l,g]],[/(itel) ((\w+))/i],[[d,V],u,[l,W,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[l,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[l,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[d,"Ulefone"],[l,v]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[d,"Nothing"],[l,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[l,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[l,g]],[/(surface duo)/i],[u,[d,P],[l,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[l,v]],[/(u304aa)/i],[u,[d,"AT&T"],[l,v]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[l,v]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[l,g]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[l,g]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[l,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[l,g]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[l,g]],[/\b(k88) b/i],[u,[d,"ZTE"],[l,g]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[l,v]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[l,v]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[l,g]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[l,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[l,g]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[l,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[l,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[l,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[l,v]],[/\b(ph-1) /i],[u,[d,"Essential"],[l,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[l,g]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[l,g]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[l,g]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[l,g]],[/(sprint) (\w+)/i],[d,u,[l,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,P],[l,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,D],[l,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,D],[l,v]],[/smart-tv.+(samsung)/i],[d,[l,w]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,N],[l,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,C],[l,w]],[/(apple) ?tv/i],[d,[u,S+" TV"],[l,w]],[/crkey/i],[[u,R+"cast"],[d,k],[l,w]],[/droid.+aft(\w+)( bui|\))/i],[u,[d,y],[l,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[d,L],[l,w]],[/(bravia[\w ]+)( bui|\))/i],[u,[d,q],[l,w]],[/(mitv-\w{5}) bui/i],[u,[d,j],[l,w]],[/Hbbtv.*(technisat) (.*);/i],[d,u,[l,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,G],[u,G],[l,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[l,m]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[l,m]],[/(playstation [345portablevi]+)/i],[u,[d,q],[l,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,P],[l,m]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[d,N],[l,_]],[/((pebble))app/i],[d,u,[l,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[d,S],[l,_]],[/droid.+; (glass) \d/i],[u,[d,k],[l,_]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,D],[l,_]],[/(quest( \d| pro)?)/i],[u,[d,M],[l,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[l,b]],[/(aeobc)\b/i],[u,[d,y],[l,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[l,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[l,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[p,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[p,[f,W,X]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,W,X],[p,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,B],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,f],[/\(bb(10);/i],[f,[p,H]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[p,x+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[p,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[p,R+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,U],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,f],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,f]]},Z=function(e,t){if(typeof e===s&&(t=e,e=n),!(this instanceof Z))return new Z(e,t).getResult();var m=typeof r!==i&&r.navigator?r.navigator:n,w=e||(m&&m.userAgent?m.userAgent:""),_=m&&m.userAgentData?m.userAgentData:n,b=t?function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r}($,t):$,y=m&&m.userAgent==w;return this.getBrowser=function(){var e={};return e[p]=n,e[f]=n,K.call(e,w,b.browser),e[c]=function(e){return typeof e===a?e.replace(/[^\d\.]/g,"").split(".")[0]:n}(e[f]),y&&m&&m.brave&&typeof m.brave.isBrave==o&&(e[p]="Brave"),e},this.getCPU=function(){var e={};return e[h]=n,K.call(e,w,b.cpu),e},this.getDevice=function(){var e={};return e[d]=n,e[u]=n,e[l]=n,K.call(e,w,b.device),y&&!e[l]&&_&&_.mobile&&(e[l]=v),y&&"Macintosh"==e[u]&&m&&typeof m.standalone!==i&&m.maxTouchPoints&&m.maxTouchPoints>2&&(e[u]="iPad",e[l]=g),e},this.getEngine=function(){var e={};return e[p]=n,e[f]=n,K.call(e,w,b.engine),e},this.getOS=function(){var e={};return e[p]=n,e[f]=n,K.call(e,w,b.os),y&&!e[p]&&_&&_.platform&&"Unknown"!=_.platform&&(e[p]=_.platform.replace(/chrome os/i,U).replace(/macos/i,B)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return w},this.setUA=function(e){return w=typeof e===a&&e.length>500?G(e,500):e,this},this.setUA(w),this};Z.VERSION="1.0.39",Z.BROWSER=z([p,f,c]),Z.CPU=z([h]),Z.DEVICE=z([u,d,l,m,v,w,g,_,b]),Z.ENGINE=Z.OS=z([p,f]),e.exports&&(t=e.exports=Z),t.UAParser=Z;var Q=typeof r!==i&&(r.jQuery||r.Zepto);if(Q&&!Q.ua){var Y=new Z;Q.ua=Y.getResult(),Q.ua.get=function(){return Y.getUA()},Q.ua.set=function(e){Y.setUA(e);var t=Y.getResult();for(var r in t)Q.ua[r]=t[r]}}}("object"==typeof window?window:f)}(m,m.exports);var v=h(m.exports),g="hinasdk_domain_test",w=Object.prototype.toString;function _(e){return"[object Object]"===w.call(e)}function b(e){return null!=e}function y(e){return Array.isArray(e)}function S(e){return"function"==typeof e}function E(e){return"string"==typeof e}function H(e){var t="";if(E(e))return e;if(null==e?void 0:e.stack)t=_(e.stack)?JSON.stringify(e.stack):e.stack;else{if(!e)return"未知js错误";t=_(e)?JSON.stringify(e):e.toString()}return t}function T(e){try{return JSON.parse(e)}catch(e){}return e}function R(e){try{return JSON.stringify(e)}catch(t){return e}}function x(e){return 0===Object.keys(e).length}function k(){return Date.now&&S(Date.now)?Date.now():(new Date).getTime()}function O(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Object.create(null);return e.forEach((function(e){e&&Object.keys(e).forEach((function(t){var n=e[t];_(n)?_(r[t])?r[t]=O(r[t],n):r[t]=O(n):r[t]=n}))})),r}function C(e,t){if(void 0===t&&(t=3),!e)return e;var r=e.toString(),n=r.indexOf(".");return r=-1!==n?r.substring(0,n+t+1):r.substring(0),parseFloat(r)}function P(){var e=function(e){e=e||window.location.hostname,/^[a-zA-Z0-9\u4e00-\u9fa5\-\\.]+$/.exec(e)||(e="");var t=e.split(".");if(t.length>=2&&!/^(\d+\.)+\d+$/.test(e))for(var r=".".concat(t.splice(t.length-1,1));t.length>0;)if(r=".".concat(t.splice(t.length-1,1)).concat(r),document.cookie="".concat(g,"=true; path=/; domain=").concat(r),-1!==document.cookie.indexOf("".concat(g,"=true")))return document.cookie="".concat(g,"=true; path=/; domain=").concat(r,"; max-age=0"),r;return""}();return""===e?"url解析失败":e}function A(){var e=k(),t=Math.floor(1e6*Math.random());return"".concat(e,"_").concat(t)}function I(){var e=k(),t=Math.floor(1e6*Math.random());return Number(String(e).slice(-5)+String(t).slice(0,4))}function N(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0}function L(e){try{return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x".concat(t)))})))}catch(t){return e}}function q(e){if(!e)return"";var t=e.match(/\/([^/]+)$/);return t?t[1]:""}function j(e){if(void 0===(null==e?void 0:e.stack)||!(null==e?void 0:e.stack))return[];for(var t,r=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,n=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,s=e.stack.split("\n"),a=[],c=0;c<s.length;c++){var u=s[c];(t=r.exec(u))||(t=n.exec(u))?a.push({source:t[2],filename:q(t[2]),lineno:t[3]?+t[3]:null,colno:t[4]?+t[4]:null}):(t=o.exec(u))?a.push({source:t[3],filename:q(t[3]),lineno:t[4]?+t[4]:null,colno:t[5]?+t[5]:null}):(t=i.exec(u))&&a.push({source:t[5],filename:q(t[5]),lineno:t[1]?+t[1]:null,colno:t[2]?+t[2]:null})}return a.length>0?[a[0]]:a}var D=function(e,t){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},D(e,t)};function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}"function"==typeof SuppressedError&&SuppressedError;var U=function(){function e(){this.name="CookieStorage"}return e.prototype.isSupport=function(e,t){var r=this;return void 0===e&&(e="cookie_support_test"),void 0===t&&(t="1"),navigator.cookieEnabled&&(r.set(e,t),r.get(e)===t&&(r.remove(e),!0))},e.prototype.get=function(e){var t,r,n=document.cookie.split(";");try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),i=o.next();!i.done;i=o.next()){var s=i.value.split("=");if(s[0].trim()===e)return decodeURIComponent(s[1])}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return null},e.prototype.set=function(e,t,r,n,o,i,s){n=n||"/",e=e.trim(),t=t.trim();var a="".concat(e,"=").concat(encodeURIComponent(t),"; path=").concat(n,";");r=b(r)?r:63072e8,a+=" max-age=".concat(r,";"),s&&(a+=" secure;"),o&&(a+=" domain=".concat(o,";")),["Strict","Lax","None"].includes(i)&&(a+=" SameSite=".concat(i,";")),document.cookie=a},e.prototype.remove=function(e,t){void 0===t&&(t="/"),this.set(e,"1",0,t)},e.prototype.setDomain=function(e,t,r){var n=P();"url解析失败"===n&&(n=""),this.set(e,t,r,"/",n)},e}(),B=function(){function e(){this.name="LocalStorage"}return e.prototype.isSupport=function(){var e=!0;try{var t="__localStorageSupport__",r="testIsSupportStorage";this.set(t,r),this.get(t)!==r&&(e=!1),this.remove(t)}catch(t){e=!1}return e},e.prototype.key=function(e){return window.localStorage.key(e)},e.prototype.get=function(e){return window.localStorage.getItem(e)},e.prototype.length=function(){return window.localStorage.length},e.prototype.set=function(e,t){try{window.localStorage.setItem(e,t)}catch(e){}},e.prototype.remove=function(e){window.localStorage.removeItem(e)},e.prototype.parse=function(e){var t=this.get(e);try{t=JSON.parse(t)}catch(e){t=""}return t},e}(),F=function(){function e(){this.name="MemoryStorage",this.data={}}return e.prototype.get=function(e){var t=this.data[e];return b(null==t?void 0:t.expireTime)?t.expireTime<k()?null:t.value:null==t?void 0:t.value},e.prototype.set=function(e,t,r){if(b(r)){var n=k()+1e3*r;this.data[e]={value:t,expireTime:n}}this.data[e]={value:t}},e.prototype.setDomain=function(e,t,r){this.set(e,t,r)},e}(),z=new v;function J(){if(void 0===navigator.connection)return"unknown";var e=navigator.connection;return e.effectiveType?e.effectiveType:e.type?e.type:"取值异常"}function V(){return"undefined"!=typeof console}var G=function(e){this.options=e},K=function(e){function t(t){var r=e.call(this,t)||this;return r.options=t,r}return M(t,e),t.prototype.run=function(){var e=this;return new Promise((function(t){var r=e.options,n=r.imgUseCrossOrigin,o=r.url,i=r.data,s=new Image;n&&(s.crossOrigin="anonymous");var a=-1===o.indexOf("?")?"?":"&";s.src="".concat(o).concat(a).concat(i);var c=function(e){s=null,t({type:e})};s.onload=function(){c("success")},s.onerror=function(){c("success")}}))},t}(G),W=function(e){function t(t){var r=e.call(this,t)||this;return r.options=t,r}return M(t,e),t.prototype.run=function(){var e=this;return new Promise((function(t){var r=e.options,n=r.url,o=r.data,i=r.timeout,s=r.credentials,a=r.contentType,c=r.customHeaders,u=void 0===c?{}:c,p=new XMLHttpRequest;p.open("POST",n,!0),p.timeout=i||2e4,p.isMonitor=!0,s&&(p.withCredentials=!0),p.setRequestHeader("Content-Type",a||"application/x-www-form-urlencoded"),_(u)&&!x(u)&&Object.keys(u).forEach((function(e){p.setRequestHeader(e,u[e])})),p.send(o||null),p.ontimeout=function(){p.abort()},p.onreadystatechange=function(){4===p.readyState&&(p.status>=200&&p.status<300||304===p.status?t({data:JSON.parse(p.responseText)||{},type:"success"}):t({type:"fail",msg:"网络异常, 请求失败，状态码=".concat(p.status)}))}}))},t}(G),X=function(e){function t(t){var r=e.call(this,t)||this;return r.options=t,r}return M(t,e),t.prototype.run=function(){var e=this;return new Promise((function(t){var r=e.options,n=r.url,o=r.data;navigator.sendBeacon&&t(navigator.sendBeacon(n,o)?{type:"success"}:{type:"fail",msg:"sendBeacon 请求失败"})}))},t}(G);function $(t,r){void 0===r&&(r=e.ConsoleTypes.LOG);var n=console[r]||console.log;"function"==typeof n&&n(t)}var Z=function(){function t(e){this.options=e,this.storeName="hinasdk_crossdata",this.state=this.getDefaultState(),this.isFirstTime=!1,this.isFirstDay=!1,this.isSetFirstVisit=!0}return t.prototype.getDefaultState=function(){return{accountId:null,deviceId:null,anonymousId:null,sessionId:null,firstVisitTime:k(),props:{}}},t.prototype.log=function(t,r){void 0===r&&(r=e.ConsoleTypes.LOG);var n=this.options.showLog;V()&&n&&$(t,r)},t.prototype.init=function(){var t,r=new U,n=new F,o=new B;r.isSupport()?this.storage=r:(this.log("Cookie storage is not supported, SDK internal cache has been enabled",e.ConsoleTypes.WARN),this.storage=n),o.isSupport()?this.localStorage=o:this.log("localStorage is not supported, SDK internal cache has been enabled",e.ConsoleTypes.WARN),!(t=this.storage.get(this.storeName))&&this.localStorage&&(t=this.localStorage.get(this.storeName)),t&&function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(t)&&(this.state=T(t)),t?(this.isSetFirstVisit=!1,this.save()):(this.isFirstDay=!0,this.isFirstTime=!0);var i=function(){var e=function(){for(var e=k(),t=0;e===k();)t++;return e.toString(16)+t.toString(16)},t=String(window.screen.height*window.screen.width);t=t&&/\d{5,}/.test(t)?t.toString(16):String(31242*Math.random()).replace(".","").slice(0,8);var r="".concat(e(),"-").concat(Math.random().toString(16).replace(".",""),"-").concat(function(){var e,t,r=navigator.userAgent,n=[],o=0;function i(e,t){var r,o=0;for(r=0;r<t.length;r++)o|=n[r]<<8*r;return e^o}for(e=0;e<r.length;e++)t=r.charCodeAt(e),n.unshift(255&t),n.length>=4&&(o=i(o,n),n=[]);return n.length>0&&(o=i(o,n)),o.toString(16)}(),"-").concat(t,"-").concat(e());return r||(String(Math.random())+String(Math.random())+String(Math.random())).slice(2,15)}();this.getAnonymousId()||this.setAnonymousId(i),this.getDeviceId()||this.setDeviceId(i)},t.prototype.clear=function(){this.state={},this.save()},t.prototype.save=function(){this.storage.setDomain(this.storeName,JSON.stringify(this.state)),this.localStorage&&this.localStorage.set(this.storeName,JSON.stringify(this.state))},t.prototype.set=function(e,t){this.state[e]=t,this.save()},t.prototype.checkSetValue=function(t,r){return!(!function(e){return"number"==typeof e}(r=null!=r?r:"")&&!E(r)&&(this.log("".concat(t,": id must be string or number"),e.ConsoleTypes.WARN),1))},t.prototype.setDeviceId=function(e){void 0===e&&(e=""),this.checkSetValue("deviceId",e)&&this.set("deviceId",e)},t.prototype.setAccountId=function(e){void 0===e&&(e=""),this.checkSetValue("accountId",e)&&this.set("accountId",e)},t.prototype.setAnonymousId=function(t){this.state.anonymousId?this.log("Current anonymousId is ".concat(this.getAnonymousId(),", it has been set"),e.ConsoleTypes.WARN):this.checkSetValue("anonymousId",t)&&this.set("anonymousId",t)},t.prototype.setSessionId=function(e){this.set("sessionId",e)},t.prototype.setProps=function(e){var t=O(this.state.props||{},e);for(var r in t)"string"==typeof t[r]&&(t[r]=t[r].slice(0,200));this.set("props",t)},t.prototype.getAnonymousId=function(){return this.state.anonymousId},t.prototype.getDeviceId=function(){return this.state.deviceId},t.prototype.getAccountId=function(){return this.state.accountId},t.prototype.getSessionId=function(){return this.state.sessionId||""},t.prototype.getSessionIdCreateTime=function(){var e=this.getSessionId().split("_")[0],t=Number(e);return Number.isNaN(t)?0:t},t.prototype.getCookie=function(){return this.storage.get(this.storeName)},t}(),Q=function(){function t(e,t,r,n){void 0===r&&(r="hinasdk_tab"),void 0===n&&(n="hinasdk_data_"),this.options=e,this.platform=t,this.batchKey=r,this.batchDataKey=n,this.init()}return t.prototype.log=function(t,r){void 0===r&&(r=e.ConsoleTypes.LOG);var n=this.options.showLog;V()&&n&&$(t,r)},t.prototype.init=function(){var t=new B;t.isSupport()?(this.localStorage=t,this.isSupport=!0):(this.isSupport=!1,this.log("批量发送功能需要使用localstorage存储数据，但是您的浏览器不支持localstorage，所以不能使用该功能",e.ConsoleTypes.WARN)),this.batchInterval()},t.prototype.getBatchConfig=function(){return this.options.batchSend},t.prototype.getStorageList=function(){if(!this.isSupport)return[];var e=[],t=this.localStorage.get(this.batchKey);return t&&(y(e=T(t))||(e=[])),e},t.prototype.batchInterval=function(){var e=this;if(this.isSupport){var t=this.getBatchConfig().sendInterval;setTimeout((function(){e.send().then((function(){e.batchInterval()}))}),t)}},t.prototype.send=function(){var e=this;return new Promise((function(t){var r=e.getStorageList();if(r.length>0&&e.isSupport){for(var n=e.getBatchConfig(),o=n.storageLimit,i=n.dataSendTimeout,s=k(),a=[],c={},u=r.length,p=0;p<u;p++){var l=r[p],d=l.dataKey,f=l.expireTime;f>=s?(c[d]={dataKey:d,expireTime:f},(b=e.localStorage.get(d))&&a.push(T(b))):(e.localStorage.remove(d),r.splice(p,1),u--,p--)}if(e.localStorage.set(e.batchKey,JSON.stringify(r)),(a=a.filter(Boolean)).length>o&&(a=a.slice(0,o)),0===a.length)t();else{var h=e.options,m=h.serverUrl,v=h.customHeaders,g=h.credentials,w=h.globalCallback,_=JSON.stringify(a),b=encodeURIComponent(L(_));new W({url:m,data:"data_list=".concat(b),timeout:i,credentials:g,customHeaders:v}).run().then((function(r){S(w)&&w(m,a,r.type,r.msg||""),"success"===r.type&&e.remove(c),t()}))}}else t()}))},t.prototype.remove=function(e){var t=this;if(this.isSupport){var r=this.getStorageList(),n=Object.keys(e);if(n.forEach((function(e){t.localStorage.remove(e)})),r.length===n.length)this.localStorage.set(this.batchKey,JSON.stringify([]));else{var o=r.filter((function(t){return!e[t.dataKey]}));this.localStorage.set(this.batchKey,JSON.stringify(o))}}},t.prototype.add=function(e){if(this.isSupport){var t=this.getBatchConfig(),r=t.sendInterval,n=t.storageLimit,o=this.batchDataKey+A(),i=this.getStorageList();i.unshift({dataKey:o,expireTime:k()+2*r}),this.localStorage.set(this.batchKey,JSON.stringify(i)),this.localStorage.set(o,JSON.stringify(e)),(i.length>n||"track_signup"===e.type||"H_pageview"===e.event)&&this.send()}},t}(),Y=function(){function t(e,t){void 0===t&&(t=!0),this.isReady=!1,this.consolePrefix="",this.useInstancing=!0,this.plugins=[],this.options=e,this.useInstancing=t}return t.prototype.log=function(t,r){void 0===r&&(r=e.ConsoleTypes.LOG);var n=this.options.showLog;V()&&n&&("string"==typeof t&&this.consolePrefix&&(t="".concat(this.consolePrefix,"：").concat(t)),$(t,r))},t.prototype.runPlugins=function(e){for(var t=this,r=function(r){var n=e[r];n.init((function(e){if(n.transform){var r=n.transform(e);r&&t.report(r)}}))},n=0;n<e.length;n++)r(n)},t.prototype.applyPlugins=function(t){var r=this;if(this.isReady){y(t)||(t=[t]);var n=[];t.forEach((function(e){var t=new e(r.options,r);r.plugins.push(t),n.push(t)})),this.runPlugins(n)}else this.log("请先初始化SDK实例",e.ConsoleTypes.WARN)},t}(),ee=function(e,t){return ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},ee(e,t)};"function"==typeof SuppressedError&&SuppressedError;var te=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(r,t),r.prototype.sendReportData=function(t,r,n){var o=this.options,i=o.batchSend,s=o.globalCallback,a=o.serverUrl,c=o.dataSendTimeout,u=o.sendType,p=o.customHeaders,l=o.credentials,d=o.imgUseCrossOrigin;if(u=n||u,a){if(_(t)&&!x(t))if(i)this.batchSender.add(t);else{var f=t;E(t)||(f=R(t));var h=L(f),m={data:"data=".concat(encodeURIComponent(h)),url:a,timeout:c,imgUseCrossOrigin:d,customHeaders:p,credentials:l};(u===e.ReportTypes.BEACON&&navigator.sendBeacon?new X(m):u===e.ReportTypes.IMAGE&&m.data.length<2048?new K(m):new W(m)).run().then((function(e){return S(s)&&s(a,t,e.type,e.msg||""),S(r)&&r(a,t,e.type,e.msg||""),e}))}}else this.log("当前 serverUrl 为空，network 中不会发数据，请配置正确的 serverUrl！",e.ConsoleTypes.WARN)},r}(Y),re=function(t){function n(e,r){var n=t.call(this,e,r)||this;return n.options=e,n.context=r,n.name="JsErrorPlugin",n.isReady=!1,n}return r(n,t),n.prototype.init=function(t){this.isReady||(this.isReady=!0,window.onerror=function(r,n,o,i,s){if("ResizeObserver loop limit exceeded"!==r.toString()){var a=H(s);t({H_js_error_id:N(a),H_error_category:e.ErrorTypes.JS_ERROR,H_error_type:s.name||e.ErrorTypes.JS_ERROR,H_error_message:s.message,H_error_stack:JSON.stringify({details:j(s),errorStack:a})})}})},n.prototype.transform=function(e){return this.context.getReportData("H_performance_js",e)},n}(d),ne=function(t){function n(e,r){var n=t.call(this,e,r)||this;return n.options=e,n.context=r,n.name="DomErrorPlugin",n.isReady=!1,n}return r(n,t),n.prototype.init=function(t){this.isReady||(this.isReady=!0,window.addEventListener("error",(function(r){if(r.target!==window){var n=r.target,o=n.src||n.href,i=function(e){var t=e.tagName.toLowerCase(),r=e.getAttributeNames(),n="";return r.forEach((function(t){n+=" ".concat(t,"='").concat(e.getAttribute(t),"'")})),"<".concat(t).concat(n,">")}(n);t({H_js_error_id:N(i),H_error_category:e.ErrorTypes.RESOURCE_ERROR,H_error_type:e.ErrorTypes.RESOURCE_ERROR,H_error_message:i,H_source_element:i,H_source_src:o})}}),!0))},n.prototype.transform=function(e){return this.context.getReportData("H_performance_js",e)},n}(d);function oe(){if(void 0!==window.performance&&"function"==typeof window.performance.getEntriesByType){var e=performance.getEntriesByType("navigation")[0],t=e.startTime,r=e.redirectStart,n=e.redirectEnd,o=e.fetchStart,i=e.domainLookupStart,s=e.domainLookupEnd,a=e.connectStart,c=e.secureConnectionStart,u=e.connectEnd,p=e.requestStart,l=e.responseStart,d=e.responseEnd,f=e.domInteractive,h=e.domContentLoadedEventEnd,m=e.loadEventStart,v=e.loadEventEnd,g=e.redirectCount,w=e.duration,_=e.unloadEventEnd,b=e.unloadEventStart;return{H_first_byte_time:C(l-t),H_unload_time:C(_-b),H_redirect_time:C(n-r),H_redirect_count:g,H_cache_check_time:C(i-o),H_dns_time:C(s-i),H_tcp_time:C(u-a),H_ssl_time:C(u-c),H_first_byte_response_time:C(l-r),H_dom_ready_time:C(h-o),H_request_time:C(l-p),H_content_transfer_time:C(d-l),H_dom_parsing_time:C(f-d),H_page_load_time:C(v-t),H_resource_load_time:C(m-h),H_resource_duration:w,H_load_event_time:C(v-m)}}var y=performance.timing,S=y.navigationStart,E=y.responseStart,H=y.unloadEventEnd,T=y.unloadEventStart,R=y.requestStart,x=y.responseEnd,k=y.redirectStart,O=y.redirectEnd,P=y.domainLookupStart,A=y.fetchStart,I=y.domainLookupEnd,N=y.connectStart,L=y.connectEnd,q=y.secureConnectionStart,j=y.domContentLoadedEventEnd,D=y.domInteractive,M=y.loadEventStart,U=y.loadEventEnd;return{H_first_byte_time:C(E-S),H_unload_time:C(H-T),H_redirect_time:C(O-k),H_cache_check_time:C(P-A),H_dns_time:C(I-P),H_tcp_time:C(L-N),H_ssl_time:C(L-q),H_first_byte_response_time:C(E-k),H_dom_ready_time:C(j-A),H_request_time:C(E-R),H_content_transfer_time:C(x-E),H_dom_parsing_time:C(D-x),H_page_load_time:C(U-S),H_resource_load_time:C(M-j),H_load_event_time:C(U-M)}}var ie,se,ae,ce,ue=-1,pe=function(e){addEventListener("pageshow",(function(t){t.persisted&&(ue=t.timeStamp,e(t))}),!0)},le=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},de=function(){var e=le();return e&&e.activationStart||0},fe=function(e,t){var r=le(),n="navigate";return ue>=0?n="back-forward-cache":r&&(document.prerendering||de()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},he=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch(e){}},me=function(e,t,r,n){var o,i;return function(s){t.value>=0&&(s||n)&&((i=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,r),e(t))}},ve=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},ge=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},we=function(e){var t=!1;return function(){t||(e(),t=!0)}},_e=-1,be=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},ye=function(e){"hidden"===document.visibilityState&&_e>-1&&(_e="visibilitychange"===e.type?e.timeStamp:0,Ee())},Se=function(){addEventListener("visibilitychange",ye,!0),addEventListener("prerenderingchange",ye,!0)},Ee=function(){removeEventListener("visibilitychange",ye,!0),removeEventListener("prerenderingchange",ye,!0)},He=function(){return _e<0&&(_e=be(),Se(),pe((function(){setTimeout((function(){_e=be(),Se()}),0)}))),{get firstHiddenTime(){return _e}}},Te=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},Re=[1800,3e3],xe=function(e,t){t=t||{},Te((function(){var r,n=He(),o=fe("FCP"),i=he("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(i.disconnect(),e.startTime<n.firstHiddenTime&&(o.value=Math.max(e.startTime-de(),0),o.entries.push(e),r(!0)))}))}));i&&(r=me(e,o,Re,t.reportAllChanges),pe((function(n){o=fe("FCP"),r=me(e,o,Re,t.reportAllChanges),ve((function(){o.value=performance.now()-n.timeStamp,r(!0)}))})))}))},ke=[.1,.25],Oe=[2500,4e3],Ce={},Pe=function(e,t){t=t||{},Te((function(){var r,n=He(),o=fe("LCP"),i=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<n.firstHiddenTime&&(o.value=Math.max(e.startTime-de(),0),o.entries=[e],r())}))},s=he("largest-contentful-paint",i);if(s){r=me(e,o,Oe,t.reportAllChanges);var a=we((function(){Ce[o.id]||(i(s.takeRecords()),s.disconnect(),Ce[o.id]=!0,r(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return function(e){var t=self.requestIdleCallback||self.setTimeout,r=-1;return e=we(e),"hidden"===document.visibilityState?e():(r=t(e),ge(e)),r}(a)}),!0)})),ge(a),pe((function(n){o=fe("LCP"),r=me(e,o,Oe,t.reportAllChanges),ve((function(){o.value=performance.now()-n.timeStamp,Ce[o.id]=!0,r(!0)}))}))}}))},Ae=[800,1800],Ie=function e(t){document.prerendering?Te((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},Ne=function(e,t){t=t||{};var r=fe("TTFB"),n=me(e,r,Ae,t.reportAllChanges);Ie((function(){var o=le();o&&(r.value=Math.max(o.responseStart-de(),0),r.entries=[o],n(!0),pe((function(){r=fe("TTFB",0),(n=me(e,r,Ae,t.reportAllChanges))(!0)})))}))},Le={passive:!0,capture:!0},qe=new Date,je=function(e,t){ie||(ie=t,se=e,ae=new Date,Ue(removeEventListener),De())},De=function(){if(se>=0&&se<ae-qe){var e={entryType:"first-input",name:ie.type,target:ie.target,cancelable:ie.cancelable,startTime:ie.timeStamp,processingStart:ie.timeStamp+se};ce.forEach((function(t){t(e)})),ce=[]}},Me=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var r=function(){je(e,t),o()},n=function(){o()},o=function(){removeEventListener("pointerup",r,Le),removeEventListener("pointercancel",n,Le)};addEventListener("pointerup",r,Le),addEventListener("pointercancel",n,Le)}(t,e):je(t,e)}},Ue=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,Me,Le)}))},Be=[100,300];function Fe(){return new Promise((function(e){!function(e,t){t=t||{},Te((function(){var r,n=He(),o=fe("FID"),i=function(e){e.startTime<n.firstHiddenTime&&(o.value=e.processingStart-e.startTime,o.entries.push(e),r(!0))},s=function(e){e.forEach(i)},a=he("first-input",s);r=me(e,o,Be,t.reportAllChanges),a&&(ge(we((function(){s(a.takeRecords()),a.disconnect()}))),pe((function(){var n;o=fe("FID"),r=me(e,o,Be,t.reportAllChanges),ce=[],se=-1,ie=null,Ue(addEventListener),n=i,ce.push(n),De()})))}))}((function(t){e(t.value)}))}))}function ze(){return new Promise((function(e){!function(e,t){t=t||{},xe(we((function(){var r,n=fe("CLS",0),o=0,i=[],s=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=i[0],r=i[i.length-1];o&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,i.push(e)):(o=e.value,i=[e])}})),o>n.value&&(n.value=o,n.entries=i,r())},a=he("layout-shift",s);a&&(r=me(e,n,ke,t.reportAllChanges),ge((function(){s(a.takeRecords()),r(!0)})),pe((function(){o=0,n=fe("CLS",0),r=me(e,n,ke,t.reportAllChanges),ve((function(){return r()}))})),setTimeout(r,0))})))}((function(t){e(t.value)}),{reportAllChanges:!0})}))}function Je(){return new Promise((function(e){if("PerformanceObserver"in window){var t=new PerformanceObserver((function(t){var r,n,o=t.getEntries();try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),s=i.next();!s.done;s=i.next()){var a=s.value;"first-paint"===a.name&&e(a.startTime)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}));t.observe({entryTypes:["paint"]})}else e(0)}))}var Ve=function(t){function n(e,r){var n=t.call(this,e,r)||this;return n.options=e,n.context=r,n.name="PerformancePlugin",n.isReady=!1,n}return r(n,t),n.prototype.init=function(t){if(!this.isReady){this.isReady=!0;var r=this.options.performanceOff;r.includes(e.PerformanceFeat.VITALS)||Promise.all([new Promise((function(e){Pe((function(t){e(t.value)}))})),Fe(),ze(),new Promise((function(e){Ne((function(t){e(t.value)}))})),new Promise((function(e){xe((function(t){e(t.value)}))})),Je()]).then((function(e){var t=p(e,6),r=t[0],n=t[1],o=t[2],i=t[3],s=t[4];return{H_first_paint_time:C(t[5]),H_first_contentful_paint_time:C(s),H_largest_contentful_paint_time:C(r),H_time_to_first_byte:C(i),H_first_input_delay:C(n),H_cumulative_layout_shift:C(o)}})).then((function(r){t(u({event:"H_performance_page",H_category:e.PerformanceFeat.VITALS},r))})),r.includes(e.PerformanceFeat.LONG_TASK)||function(e){if("PerformanceObserver"in window){var t=new PerformanceObserver((function(t){var r=t.getEntries(),n=0,o=[];r.forEach((function(e){var t=e.duration,r=e.name,i=e.startTime;n+=t,o.push({duration:C(t),startTime:C(i),name:r})})),e({H_long_task_time:C(n),H_long_task:r.length,H_long_task_list:o})}));t.observe({entryTypes:["longtask"]})}}((function(r){t(u({event:"H_performance_page",H_category:e.PerformanceFeat.LONG_TASK,H_url:window.location.href},r))})),window.addEventListener("load",(function(){r.includes(e.PerformanceFeat.BASIC)||t(u({event:"H_performance_loading",H_category:e.PerformanceFeat.BASIC},oe()))}))}},n.prototype.transform=function(e){return this.context.getReportData(e.event,e)},n}(d),Ge=function(t){function n(e,r){var n=t.call(this,e,r)||this;return n.options=e,n.context=r,n.name="FetchPlugin",n.isReady=!1,n}return r(n,t),n.prototype.init=function(t){if(window.fetch&&!this.isReady){this.isReady=!0;var r=this;!function(e,t,r,n){if(void 0!==e&&(t in e||n)){var o=r(e[t]);S(o)&&(e[t]=o)}}(window,"fetch",(function(n){return function(o,i){void 0===i&&(i={});var s=k(),a=i||{},c=a.headers,p=a.signal,l=a.method;return n(o,i).then((function(n){if(!n.ok){var a=u(u({},r.context.getRequestHeaders()),c||{}),p=k();n.clone().text().then((function(r){t({H_js_error_id:N("url=".concat(o,"&method=").concat(l)),H_error_category:e.ErrorTypes.FETCH_ERROR,H_error_type:e.ErrorTypes.FETCH_ERROR,H_error_message:o,H_request_url:o,H_request_headers:R(a),H_request_method:i.method.toLowerCase(),H_request_params:E(i.body)?i.body:"",H_response_status:n.status,H_response_status_text:n.statusText,H_request_time:s,H_response_time:p,H_response_data:r})}))}return n})).catch((function(n){if(p&&p.aborted)throw n;var a="";a=(a=n instanceof Error?null==n?void 0:n.message:R(n))||"网络错误，或者无法连接";var d=u(u({},r.context.getRequestHeaders()),c||{});throw t({H_js_error_id:N("url=".concat(o,"&method=").concat(l)),H_error_category:e.ErrorTypes.FETCH_ERROR,H_error_type:e.ErrorTypes.FETCH_ERROR,H_error_message:o,H_request_url:o,H_request_headers:R(d),H_request_method:i.method.toLowerCase(),H_request_params:E(i.body)?i.body:"",H_response_status:0,H_response_status_text:a,H_request_time:s,H_response_time:k(),H_response_data:a}),n}))}}))}},n.prototype.transform=function(e){return this.context.getReportData("H_performance_js",e)},n}(d),Ke=function(t){function n(e,r){var n=t.call(this,e,r)||this;return n.options=e,n.context=r,n.name="XhrPlugin",n.isReady=!1,n}return r(n,t),n.prototype.init=function(t){if(!this.isReady){this.isReady=!0;var r=this,n=XMLHttpRequest.prototype.open,o=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.H_request_method=e[0],this.H_request_url=e[1],this.H_request_time=k(),n.apply(this,e)},XMLHttpRequest.prototype.send=function(n){var i=this;this.addEventListener("abort",(function(){i.H_response_status_text="abort"})),this.addEventListener("error",(function(){i.H_response_status_text="error"})),this.addEventListener("timeout",(function(){i.H_response_status_text="timeout"})),this.addEventListener("loadend",(function(){var o=i,s=o.status,a=o.statusText,c=o.responseType,u=o.responseText,p=o.response,l=o.H_request_method,d=o.H_request_url,f=o.H_request_time,h=o.H_response_status_text;if(!(s>=200&&s<300)&&"abort"!==h&&!i.isMonitor){var m=c&&"text"!==c?p:u,v=h||a;"error"===h?v="网络错误，或者无法连接":"timeout"===h&&(v="请求超时"),t({H_js_error_id:N("url=".concat(d,"&method=").concat(l)),H_error_category:e.ErrorTypes.AJAX_ERROR,H_error_type:e.ErrorTypes.AJAX_ERROR,H_error_message:d,H_request_url:d,H_request_headers:R(r.context.getRequestHeaders()),H_request_method:l,H_request_params:_(n)?R(n):E(n)?n:"",H_response_status:s,H_response_status_text:v,H_request_time:f,H_response_time:k(),H_response_data:m&&R(m)})}delete i.H_request_method,delete i.H_request_url,delete i.H_request_time,delete i.H_response_status_text}));try{o.call(this,n)}catch(e){}}}},n.prototype.transform=function(e){return this.context.getReportData("H_performance_js",e)},n}(d),We=function(t){function n(e,r){var n=t.call(this,e,r)||this;return n.options=e,n.context=r,n.name="PromiseErrorPlugin",n.isReady=!1,n}return r(n,t),n.prototype.init=function(t){this.isReady||(this.isReady=!0,window.addEventListener("unhandledrejection",(function(r){var n=r.reason,o=e.ErrorTypes.PROMISE_ERROR,i="",s="";E(n)?i=n:void 0===n?i="undefined":(null==n?void 0:n.stack)?(o=n.name,i=n.message,s=JSON.stringify({errorStack:H(n),details:j(n)})):i=R(n);["axioserror","cancelederror","aborterror"].includes(o.toLowerCase())||t({H_js_error_id:N("message=".concat(i,"&stack=").concat(s)),H_error_category:e.ErrorTypes.PROMISE_ERROR,H_error_type:o||e.ErrorTypes.PROMISE_ERROR,H_error_message:i,H_error_stack:s})})))},n.prototype.transform=function(e){return this.context.getReportData("H_performance_js",e)},n}(d),Xe="4.0.0",$e=function(t){function n(e,r){void 0===r&&(r=!0);var n=t.call(this,e,r)||this;return n.consolePrefix="性能监控SDK",n.presetProps={},n.requestHeaders={},n.useInstancing&&n.init(e),n}return r(n,t),n.prototype.init=function(t){var r=this;if(this.isReady)this.log("Monitor has been initialized",e.ConsoleTypes.ERROR);else{var n={serverUrl:"",name:"",showLog:!1,errorCapture:!0,performance:!0,openPromiseCapture:!1,sendType:e.ReportTypes.BEACON,customHeaders:{},credentials:!1,dataSendTimeout:3e3,batchSend:!1,imgUseCrossOrigin:!1,performanceOff:[],plugins:[]};this.options=u(u({},n),t),this.initState(),this.normalizeConfig(),this.initPlugins(),this.isReady=!0,window.addEventListener("beforeunload",(function(){r.store.setSessionId("")}))}},n.prototype.initState=function(){this.store=new Z(this.options),this.store.init()},n.prototype.normalizeConfig=function(){var t=this.options,r=t.serverUrl,n=t.batchSend;""===(r=(r=r||"").trim())&&this.log("当前 serverUrl 为空，network 中不会发数据，请配置正确的 serverUrl！",e.ConsoleTypes.WARN),(!0===n||_(n)&&!x(n))&&(this.options.batchSend=u({dataSendTimeout:6e3,sendInterval:6e3,storageLimit:200},n),this.batchSender=new Q(this.options,e.PlatformTypes.WEB,"hinaepm_tab","hinaepm_data_"))},n.prototype.initPlugins=function(){var e=this,t=this.options,r=t.errorCapture,n=t.performance,o=t.openPromiseCapture,i=t.plugins,s=void 0===i?[]:i;s=s||[];var a=[],c=[];if(r&&(a=[new re(this.options,this),new ne(this.options,this),new Ge(this.options,this),new Ke(this.options,this)],!0===o)){var u=new We(this.options,this);a.push(u)}n&&(c=[new Ve(this.options,this)]);this.plugins=l(l([],p(a),!1),p(c),!1),s.forEach((function(t){var r=new t(e.options,e);e.plugins.push(r)})),this.runPlugins(this.plugins)},n.prototype.report=function(e,t,r){var n=this.options.beforeSend,o=e;S(n)&&(o=n(o)),this.log(o),this.sendReportData(o,t,r)},n.prototype.getReportData=function(e,t){var r=this.options.sourcemapVersion;r||(r="1.0.0");var n=this.store.getAnonymousId(),o=this.store.getAccountId(),i=this.store.getSessionId(),s=k(),a=u(u(u({},this.getReportProperties()),{H_js_sourcemap_version:r}),t||{}),c={anonymous_id:n,type:"track",event:e,time:s,_track_id:I(),properties:a};(o&&(c.account_id=o),i)?k()-this.store.getSessionIdCreateTime()>18e5&&(i=A(),this.store.setSessionId(i)):(i=A(),this.store.setSessionId(i));return a.H_session_id=i,c.send_time=k(),c},n.prototype.getReportProperties=function(){return u(u(u({},function(e){var t=z.getResult(),r=t.browser,n=t.device,o=t.os,i=t.ua,s={H_timezone_offset:(new Date).getTimezoneOffset(),H_viewport_width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,H_viewport_height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,H_screen_width:window.screen.width,H_screen_height:window.screen.height,H_lib_version:e,H_lib:"js",H_lib_method:"code",H_browser:r.name.toLowerCase(),H_browser_version:r.version,H_os:o.name,H_os_version:o.version,H_browser_user_agent:i,H_language:E(navigator.language)?navigator.language.toLowerCase():"取值异常",H_network_type:J()};return"mobile"===n.type?s.H_model=n.vendor?n.model:"UnknownPhone":s.H_model=n.model,s}(Xe)),this.getCommonProperties()),{H_url:window.location.href,H_title:document.title})},n.prototype.captureException=function(t,r,n){t instanceof Error||(t=new Error(t)),_(r)||(r={});var o=H(t),i=this.getReportData("H_performance_js",{H_js_error_id:N(o),H_error_category:e.ErrorTypes.CAPTURE_EXCEPTION,H_error_type:e.ErrorTypes.CAPTURE_EXCEPTION,H_error_message:t.message,H_error_stack:JSON.stringify({details:j(t),errorStack:o}),H_capture_extra:JSON.stringify(r)});this.report(i,n)},n.prototype.captureEvent=function(t,r){if(_(t)){var n=t.message,o=t.extra;_(o)||(o={});var i=this.getReportData("H_performance_js",{H_js_error_id:N(n||""),H_error_category:e.ErrorTypes.CAPTURE_EVENT,H_error_type:e.ErrorTypes.CAPTURE_EVENT,H_error_message:n||"",H_capture_message:n||"",H_capture_extra:JSON.stringify(o)});this.report(i,r)}else this.log("captureEvent event参数错误：event必须是一个对象")},n.prototype.setCommonProperties=function(e){_(e)&&!x(e)&&(this.presetProps=O(this.presetProps,e))},n.prototype.getCommonProperties=function(){return this.presetProps},n.prototype.clearCommonProperties=function(e){var t=this;void 0===e&&(e=!0),!0===e?this.presetProps={}:y(e)&&e.forEach((function(e){e in t.presetProps&&delete t.presetProps[e]}))},n.prototype.setRequestHeaders=function(e){void 0===e&&(e={}),_(e)&&!x(e)&&(this.requestHeaders=O(this.requestHeaders,e))},n.prototype.getRequestHeaders=function(){return this.requestHeaders},n.prototype.clearRequestHeaders=function(e){void 0===e&&(e=!0),!0===e?this.requestHeaders={}:y(e)&&e.forEach((function(e){}))},n}(te);var Ze=new $e({},!1);e.Monitor=$e,e.PluginBase=d,e.default=Ze,Object.defineProperty(e,"__esModule",{value:!0})}));
