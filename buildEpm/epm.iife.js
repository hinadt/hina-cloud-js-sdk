var hinaEpmStatistic=function(t){"use strict";var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},e(t,r)};function r(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var n,o,i,s=function(){return s=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},s.apply(this,arguments)};function a(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function u(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError,t.ConsoleTypes=void 0,(n=t.ConsoleTypes||(t.ConsoleTypes={})).LOG="log",n.INFO="info",n.WARN="warn",n.ERROR="error",n.ASSERT="assert",t.ReportTypes=void 0,(o=t.ReportTypes||(t.ReportTypes={})).BEACON="beacon",o.IMAGE="image",o.AJAX="ajax",t.VariablesTypes=void 0,(i=t.VariablesTypes||(t.VariablesTypes={})).INTEGER="INTEGER",i.STRING="STRING",i.BOOLEAN="BOOLEAN";var p=function(t,e){this.options=t,this.context=e,this.disabled=!1};u(u([],c(["utm_source","utm_medium","utm_campaign","utm_content","utm_term"]),!1),c(["ha_utm"]),!1);var d="hinasdk_domain_test",l=Object.prototype.toString;function h(t){return"[object Object]"===l.call(t)}function f(t){return null!=t}function m(t){return Array.isArray(t)}function _(t){return"function"==typeof t}function g(t){return"string"==typeof t}function y(t){var e="";if(g(t))return t;if(null==t?void 0:t.stack)e=h(t.stack)?JSON.stringify(t.stack):t.stack;else{if(!t)return"未知js错误";e=h(t)?JSON.stringify(t):t.toString()}return e}function v(t){try{return JSON.parse(t)}catch(t){}return t}function S(t){try{return JSON.stringify(t)}catch(e){return t}}function E(t){return 0===Object.keys(t).length}function H(){return Date.now&&_(Date.now)?Date.now():(new Date).getTime()}function w(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object.create(null);return t.forEach((function(t){t&&Object.keys(t).forEach((function(e){var n=t[e];h(n)?h(r[e])?r[e]=w(r[e],n):r[e]=w(n):r[e]=n}))})),r}function b(t,e){if(void 0===e&&(e=3),!t)return t;var r=t.toString(),n=r.indexOf(".");return r=-1!==n?r.substring(0,n+e+1):r.substring(0),parseFloat(r)}function R(){var t=function(t){t=t||window.location.hostname,/^[a-zA-Z0-9\u4e00-\u9fa5\-\\.]+$/.exec(t)||(t="");var e=t.split(".");if(e.length>=2&&!/^(\d+\.)+\d+$/.test(t))for(var r=".".concat(e.splice(e.length-1,1));e.length>0;)if(r=".".concat(e.splice(e.length-1,1)).concat(r),document.cookie="".concat(d,"=true; path=/; domain=").concat(r),-1!==document.cookie.indexOf("".concat(d,"=true")))return document.cookie="".concat(d,"=true; path=/; domain=").concat(r,"; max-age=0"),r;return""}();return""===t?"url解析失败":t}function T(){var t=H(),e=Math.floor(1e6*Math.random());return"".concat(t,"_").concat(e)}function x(){var t=H(),e=Math.floor(1e6*Math.random());return Number(String(t).slice(-5)+String(e).slice(0,4))}function O(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return e>>>0}function C(t){try{return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x".concat(e)))})))}catch(e){return t}}function P(t){if(!t)return"";var e=t.match(/\/([^/]+)$/);return e?e[1]:""}function I(t){if(void 0===(null==t?void 0:t.stack)||!(null==t?void 0:t.stack))return[];for(var e,r=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,n=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,o=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,s=t.stack.split("\n"),a=[],c=0;c<s.length;c++){var u=s[c];(e=r.exec(u))||(e=n.exec(u))?a.push({source:e[2],filename:P(e[2]),lineno:e[3]?+e[3]:null,colno:e[4]?+e[4]:null}):(e=o.exec(u))?a.push({source:e[3],filename:P(e[3]),lineno:e[4]?+e[4]:null,colno:e[5]?+e[5]:null}):(e=i.exec(u))&&a.push({source:e[5],filename:P(e[5]),lineno:e[1]?+e[1]:null,colno:e[2]?+e[2]:null})}return a.length>0?[a[0]]:a}var A=function(){function t(){this.name="CookieStorage"}return t.prototype.isSupport=function(t,e){var r=this;void 0===t&&(t="cookie_support_test"),void 0===e&&(e="1");return navigator.cookieEnabled&&(r.set(t,e),r.get(t)===e&&(r.remove(t),!0))},t.prototype.get=function(t){var e,r,n=document.cookie.split(";");try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var s=i.value.split("=");if(s[0].trim()===t)return decodeURIComponent(s[1])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return null},t.prototype.set=function(t,e,r,n,o,i,s){n=n||"/",t=t.trim(),e=e.trim();var a="".concat(t,"=").concat(encodeURIComponent(e),"; path=").concat(n,";");r=f(r)?r:63072e8,a+=" max-age=".concat(r,";"),s&&(a+=" secure;"),o&&(a+=" domain=".concat(o,";")),["Strict","Lax","None"].includes(i)&&(a+=" SameSite=".concat(i,";")),document.cookie=a},t.prototype.remove=function(t,e){void 0===e&&(e="/"),this.set(t,"1",0,e)},t.prototype.setDomain=function(t,e,r){var n=R();"url解析失败"===n&&(n=""),this.set(t,e,r,"/",n)},t}(),L=function(){function t(){this.name="LocalStorage"}return t.prototype.isSupport=function(){var t=!0;try{var e="__localStorageSupport__",r="testIsSupportStorage";this.set(e,r),this.get(e)!==r&&(t=!1),this.remove(e)}catch(e){t=!1}return t},t.prototype.key=function(t){return window.localStorage.key(t)},t.prototype.get=function(t){return window.localStorage.getItem(t)},t.prototype.length=function(){return window.localStorage.length},t.prototype.set=function(t,e){try{window.localStorage.setItem(t,e)}catch(t){}},t.prototype.remove=function(t){window.localStorage.removeItem(t)},t.prototype.parse=function(t){var e=this.get(t);try{e=JSON.parse(e)}catch(t){e=""}return e},t}(),q=function(){function t(){this.name="MemoryStorage",this.data={}}return t.prototype.get=function(t){var e=this.data[t];return f(null==e?void 0:e.expireTime)?e.expireTime<H()?null:e.value:null==e?void 0:e.value},t.prototype.set=function(t,e,r){if(f(r)){var n=H()+1e3*r;this.data[t]={value:e,expireTime:n}}this.data[t]={value:e}},t.prototype.setDomain=function(t,e,r){this.set(t,e,r)},t}();function k(e,r){if(void 0===r&&(r=t.ConsoleTypes.LOG),"undefined"!=typeof console){var n=console[r]||console.log;"function"==typeof n&&n(e)}}var N,D={all:N=N||new Map,on:function(t,e){var r=N.get(t);r?r.push(e):N.set(t,[e])},emit:function(t,e){var r=N.get(t);r&&r.forEach((function(t){t(e)}))},off:function(t,e){var r=N.get(t);if(r)if(e){var n=r.indexOf(e);n>=0&&r.splice(n,1)}else N.set(t,[])}},M=function(){function e(t,e){this.options=t,this.isFirstTime=!1,this.isFirstDay=!1,this.state=e}return e.prototype.log=function(e,r){void 0===r&&(r=t.ConsoleTypes.LOG),this.options.showLog&&k(e,r)},e.prototype.checkSetValue=function(e,r){return!(("number"!=typeof(n=r=null!=r?r:"")||Number.isNaN(n))&&!g(r))||(this.log("".concat(e,": id must be string or number"),t.ConsoleTypes.WARN),!1);var n},e.prototype.setDeviceId=function(t){void 0===t&&(t=""),this.checkSetValue("deviceId",t)&&this.set("deviceId",t)},e.prototype.setAccountId=function(t){void 0===t&&(t=""),this.checkSetValue("accountId",t)&&(this.set("accountId",t),D.emit("changeAccountId"))},e.prototype.setAnonymousId=function(e){this.state.anonymousId?this.log("Current anonymousId is ".concat(this.getAnonymousId(),", it has been set"),t.ConsoleTypes.WARN):this.checkSetValue("anonymousId",e)&&this.set("anonymousId",e)},e.prototype.setProps=function(t){var e=w(this.state.props||{},t);for(var r in e)"string"==typeof e[r]&&(e[r]=e[r].slice(0,200));this.set("props",e)},e.prototype.getAnonymousId=function(){return this.state.anonymousId},e.prototype.getDeviceId=function(){return this.state.deviceId},e.prototype.getAccountId=function(){return this.state.accountId},e.prototype.clear=function(){this.state={},this.save()},e.prototype.set=function(t,e){this.state[t]=e,this.save()},e.prototype.afterInit=function(t){t?(this.isFirstDay=function(t){var e;try{var r=new Date,n=r.getFullYear(),o=r.getMonth()+1,i=r.getDate(),s=new Date(t),a=s.getFullYear(),c=s.getMonth()+1,u=s.getDate();e=n===a&&o===c&&i===u}catch(t){e=!1}return e}(this.state.firstVisitTime),this.save()):(this.isFirstDay=!0,this.isFirstTime=!0);var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return"x"===t?e.toString(16):(3&e|8).toString(16)}));this.getAnonymousId()||this.setAnonymousId(e),this.getDeviceId()||this.setDeviceId(e)},e}(),j=function(e){function n(t){var r=this,n={accountId:null,deviceId:null,anonymousId:null,sessionId:null,firstVisitTime:H(),props:{}};return(r=e.call(this,t,n)||this).options=t,r.storeName="hinasdk_crossdata",r.hLatestUtm={},r.hUtm={},r.customUtm={},r}return r(n,e),n.prototype.getUtmFromProps=function(t){for(var e in this.state.props){var r=this.state.props[e];e.startsWith("H_latest_")?this.hLatestUtm[e]=r:e.startsWith("H_")&&(this.hUtm[e]=r),t.includes(e)&&(this.customUtm[e]=r)}},n.prototype.init=function(){var e,r=new A,n=new q,o=new L;r.isSupport()?this.storage=r:(this.log("Cookie storage is not supported, SDK internal cache has been enabled",t.ConsoleTypes.WARN),this.storage=n),o.isSupport()?this.localStorage=o:this.log("localStorage is not supported, SDK internal cache has been enabled",t.ConsoleTypes.WARN),!(e=this.storage.get(this.storeName))&&this.localStorage&&(e=this.localStorage.get(this.storeName)),e&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(e)?this.state=v(e):e=null,this.afterInit(e)},n.prototype.save=function(){this.storage.setDomain(this.storeName,JSON.stringify(this.state)),this.localStorage&&this.localStorage.set(this.storeName,JSON.stringify(this.state))},n.prototype.getCookie=function(){return this.storage.get(this.storeName)},n.prototype.setSessionId=function(t){this.set("sessionId",t)},n.prototype.getSessionId=function(){return this.state.sessionId||""},n.prototype.getSessionIdCreateTime=function(){var t=this.getSessionId().split("_")[0],e=Number(t);return Number.isNaN(e)?0:e},n}(M),F=function(){function t(){this.isReady=!1,this.isReady||this.init(),this.isReady=!0}return t.prototype.init=function(){this.os=this.getOs(),this.osVersion=this.getOsVersion();var t=this.getBrowser(),e=t.type,r=t.version;this.browserName=e,this.browserVersion=r,this.model=this.getModel()},t.prototype.getOs=function(){var t=navigator.userAgent;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)&&!window.MSStream?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":/CrOS/.test(t)?"Chrome OS":"取值异常"},t.prototype.getOsVersion=function(){var t=navigator.userAgent;if(/Windows/i.test(t)){var e=/Windows NT ([\d.]+)/;return t.match(e)?t.match(e)[1]:""}if(/(iPhone|iPad|iPod)/.test(t)&&!window.MSStream){e=/OS ([\d_]+)/;return t.match(e)?t.match(e)[1].replace(/_/g,"."):""}if(/Android/.test(t)){e=/Android ([\d.]+)/;return t.match(e)?t.match(e)[1]:""}if(/Mac/i.test(t)){e=/Mac OS X ([\d_]+)/;return t.match(e)?t.match(e)[1].replace(/_/g,"."):""}return""},t.prototype.getBrowser=function(){var t,e={type:"",version:""};try{var r=null===(t=navigator.userAgent)||void 0===t?void 0:t.toLowerCase(),n=[];if(null!==r.match(/baidubrowser/)?(e.type="baidu",n.push(/baidubrowser\/([\d.]+)/)):null!==r.match(/bidubrowser/)?(e.type="baidu",n.push(/bidubrowser\/([\d.]+)/)):null!==r.match(/edg/)?(e.type="edge",n.push(/edg\/([\d.]+)/)):null!==r.match(/edgios/)?(e.type="edge",n.push(/edgios\/([\d.]+)/)):null!==r.match(/liebaofast/)?(e.type="liebao",n.push(/liebaofast\/([\d.]+)/)):null!==r.match(/sogoumobilebrowser/)?(e.type="sogou",n.push(/sogoumobilebrowser\/([\d.]+)/)):null!==r.match(/lbbrowser/)?(e.type="liebao",n.push(/lbbrowser\/([\d.]+)/)):null!==r.match(/crios/)?(e.type="chrome",n.push(/crios\/([\d.]+)/)):null!==r.match(/qihoobrowser/)?(e.type="360",n.push(/qihoobrowser\/([\d.]+)/)):null!==r.match(/mxios/)?(e.type="maxthon",n.push(/mxios\/([\d.]+)/)):null!==r.match(/fxios/)?(e.type="firefox",n.push(/fxios\/([\d.\w]+)/)):null!==r.match(/edge/)?(e.type="edge",n.push(/edge\/([\d.]+)/)):null!==r.match(/metasr/)?(e.type="sogou",n.push(/metasr ([\d.]+)/)):null!==r.match(/micromessenger/)?(e.type="micromessenger",n.push(/micromessenger\/([\d.]+)/)):null!==r.match(/mqqbrowser/)?(e.type="qq",n.push(/mqqbrowser\/([\d.]+)/)):null!==r.match(/qqbrowserlite/)?(e.type="qq",n.push(/qqbrowserlite\/([\d.]+)/)):null!==r.match(/tencenttraveler/)?(e.type="qq",n.push(/tencenttraveler\/([\d.]+)/)):null!==r.match(/qqbrowser/)?(e.type="qq",n.push(/qqbrowser\/([\d.]+)/)):null!==r.match(/maxthon/)?(e.type="maxthon",n.push(/maxthon\/([\d.]+)/)):null!==r.match(/ubrowser/)?(e.type="uc",n.push(/ubrowser\/([\d.]+)/)):null!==r.match(/ucbrowser/)?(e.type="uc",n.push(/ucbrowser\/([\d.]+)/)):null!==r.match(/firefox/)?(e.type="firefox",n.push(/firefox\/([\d.]+)/)):null!==r.match(/opera/)?(e.type="opera",n.push(/opera\/([\d.]+)/)):null!==r.match(/opr/)?(e.type="opera",n.push(/opr\/([\d.]+)/)):null!==r.match(/chrome/)?(e.type="chrome",n.push(/chrome\/([\d.]+)/)):null!==r.match(/safari/)?(e.type="safari",n.push(/version\/([\d.]+)/)):null===r.match(/trident/)&&null===r.match(/msie/)||(e.type="ie"),"ie"===e.type){var o=r.match(/trident\/([\d.]+)/)?r.match(/trident\/([\d.]+)/)[1]:"",i=r.match(/msie ([\d.]+)/)?r.match(/msie ([\d.]+)/)[1]:"";""!==o?e.version=String(parseInt(o,10)+4):""!==i&&(e.version=i)}else n&&(e.version=r.match(n[0])?r.match(n[0])[1]:"")}catch(t){e.type="取值异常"}return e},t.prototype.getModel=function(){var t=navigator.userAgent;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)){if(/iPhone|iPad|iPod/i.test(t))return t.match(/iPhone|iPad|iPod/i)[0];if(/Android/i.test(t))return t.match(/Android/i)[0]}var e=t.match(/Mac/);if(e)return e[0];var r=t.match(/Windows/);if(r)return r[0];var n=t.match(/Linux/);return n?n[0]:"取值异常"},t}();var U,B,J=function(){function t(t){this.options=t}return t.prototype.run=function(){var t=this;return new Promise((function(e){var r=t.options,n=r.imgUseCrossOrigin,o=r.url,i=r.data,s=new Image;n&&(s.crossOrigin="anonymous");var a=-1===o.indexOf("?")?"?":"&";s.src="".concat(o).concat(a).concat(i);var c=function(t){s=null,e({type:t})};s.onload=function(){c("success")},s.onerror=function(){c("success")}}))},t}(),V=function(){function t(t){this.options=t}return t.prototype.run=function(){var t=this;return new Promise((function(e){var r=t.options,n=r.url,o=r.data,i=r.timeout,s=r.credentials,a=r.contentType,c=r.customHeaders,u=void 0===c?{}:c,p=new XMLHttpRequest;p.open("POST",n,!0),p.timeout=i||2e4,p.isMonitor=!0,s&&(p.withCredentials=!0),p.setRequestHeader("Content-Type",a||"application/x-www-form-urlencoded"),h(u)&&!E(u)&&Object.keys(u).forEach((function(t){p.setRequestHeader(t,u[t])})),p.send(o||null),p.ontimeout=function(){p.abort()},p.onreadystatechange=function(){4===p.readyState&&(p.status>=200&&p.status<300||304===p.status?e({data:JSON.parse(p.responseText)||{},type:"success"}):e({type:"fail",msg:"网络异常, 请求失败，状态码=".concat(p.status)}))}}))},t}(),W=function(){function t(t){this.options=t}return t.prototype.run=function(){var t=this;return new Promise((function(e){var r=t.options,n=r.url,o=r.data;navigator.sendBeacon&&e(navigator.sendBeacon(n,o)?{type:"success"}:{type:"fail",msg:"sendBeacon 请求失败"})}))},t}(),K=function(){function e(t,e,r){void 0===e&&(e="hinasdk_tab"),void 0===r&&(r="hinasdk_data_"),this.options=t,this.batchKey=e,this.batchDataKey=r,this.isSending=!1,this.init()}return e.prototype.log=function(e,r){void 0===r&&(r=t.ConsoleTypes.LOG),this.options.showLog&&k(e,r)},e.prototype.init=function(){var e=new L;e.isSupport()?(this.localStorage=e,this.isSupport=!0):(this.isSupport=!1,this.log("批量发送功能需要使用localstorage存储数据，但是您的浏览器不支持localstorage，所以不能使用该功能",t.ConsoleTypes.WARN)),this.batchInterval()},e.prototype.getBatchConfig=function(){return this.options.batchSend},e.prototype.getStorageList=function(){if(!this.isSupport)return[];var t=[],e=this.localStorage.get(this.batchKey);return e&&(m(t=v(e))||(t=[])),t},e.prototype.batchInterval=function(){var t=this;if(this.isSupport){var e=this.getBatchConfig().sendInterval;setTimeout((function(){t.send().then((function(){t.batchInterval()}))}),e)}},e.prototype.send=function(){var t=this;return new Promise((function(e){var r=t.getStorageList();if(r.length>0&&t.isSupport){for(var n=t.getBatchConfig().dataSendTimeout,o=H(),i=[],s={},a=r.length,c=0;c<a;c++){var u=r[c],p=u.dataKey,d=u.expireTime;if(d>=o)s[p]={dataKey:p,expireTime:d},(S=t.localStorage.get(p))&&i.push(v(S));else t.localStorage.remove(p),r.splice(c,1),a--,c--}if(t.localStorage.set(t.batchKey,JSON.stringify(r)),0===i.length)e();else{var l=t.options,h=l.serverUrl,f=l.customHeaders,m=l.credentials,g=l.globalCallback,y=JSON.stringify(i),S=encodeURIComponent(C(y));t.isSending=!0,new V({url:h,data:"data_list=".concat(S),timeout:n,credentials:m,customHeaders:f}).run().then((function(r){_(g)&&g(h,i,r.type,r.msg||""),"success"===r.type&&t.remove(s),e(),t.isSending=!1}))}}else e()}))},e.prototype.remove=function(t){var e=this;if(this.isSupport){var r=this.getStorageList(),n=Object.keys(t);if(n.forEach((function(t){e.localStorage.remove(t)})),r.length===n.length)this.localStorage.set(this.batchKey,JSON.stringify([]));else{var o=r.filter((function(e){return!t[e.dataKey]}));this.localStorage.set(this.batchKey,JSON.stringify(o))}}},e.prototype.add=function(t){if(this.isSupport){var e=this.getBatchConfig(),r=e.sendInterval,n=e.storageLimit,o=this.batchDataKey+T(),i=this.getStorageList();i.unshift({dataKey:o,expireTime:H()+2*r}),this.localStorage.set(this.batchKey,JSON.stringify(i)),this.localStorage.set(o,JSON.stringify(t)),!this.isSending&&(i.length>n||"track_signup"===t.type||"H_pageview"===t.event)&&this.send()}},e}(),G=function(){function e(t,e){void 0===e&&(e=!0),this.isReady=!1,this.consolePrefix="埋点SDK",this.useInstancing=!0,this.plugins=[],this.options=t,this.useInstancing=e}return e.prototype.log=function(e,r){void 0===r&&(r=t.ConsoleTypes.LOG),this.options.showLog&&("string"==typeof e&&this.consolePrefix&&(e="".concat(this.consolePrefix,"：").concat(e)),k(e,r))},e.prototype.runPlugins=function(t){var e=this;t.forEach((function(t){t.disabled||t.init((function(r){if(t.transform){var n=t.transform(r);n&&e.report(n)}}))}))},e.prototype.applyPlugins=function(e){var r=this;if(this.isReady){m(e)||(e=[e]);var n=[];e.forEach((function(t){var e=new t(r.options,r);r.plugins.push(e),n.push(e)})),this.runPlugins(n)}else this.log("请先初始化SDK实例",t.ConsoleTypes.WARN)},e}(),X=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return r(n,e),n.prototype.sendReportData=function(e,r,n){var o=this.options,i=o.batchSend,s=o.globalCallback,a=o.serverUrl,c=o.dataSendTimeout,u=o.sendType,p=o.customHeaders,d=o.credentials,l=o.imgUseCrossOrigin;if(u=n||u,a){if(h(e)&&!E(e))if(i)this.batchSender.add(e);else{var f=e;g(e)||(f=S(e));var m=C(f),y={data:"data=".concat(encodeURIComponent(m)),url:a,timeout:c,imgUseCrossOrigin:l,customHeaders:p,credentials:d};(u===t.ReportTypes.BEACON&&navigator.sendBeacon?new W(y):u===t.ReportTypes.IMAGE&&y.data.length<2048?new J(y):new V(y)).run().then((function(t){return _(s)&&s(a,e,t.type,t.msg||""),_(r)&&r(a,e,t.type,t.msg||""),t}))}}else this.log("当前 serverUrl 为空，network 中不会发数据，请配置正确的 serverUrl！",t.ConsoleTypes.WARN)},n}(G);t.PerformanceFeat=void 0,(U=t.PerformanceFeat||(t.PerformanceFeat={})).BASIC="basic",U.VITALS="vitals",U.RESOURCE="resource",U.LONG_TASK="longtask",t.ErrorTypes=void 0,(B=t.ErrorTypes||(t.ErrorTypes={})).JS_ERROR="JsError",B.RESOURCE_ERROR="ResourceError",B.FETCH_ERROR="FetchError",B.AJAX_ERROR="AjaxError",B.PROMISE_ERROR="PromiseError",B.WHITE_SCREEN_ERROR="WhiteScreenError",B.VUE_ERROR="VueError",B.REACT_ERROR="ReactError",B.CAPTURE_EVENT="CaptureEvent",B.CAPTURE_EXCEPTION="CaptureException";var z=function(e){function n(t,r){var n=e.call(this,t,r)||this;return n.options=t,n.context=r,n.name="JsErrorPlugin",n.isReady=!1,n}return r(n,e),n.prototype.init=function(e){this.isReady||(this.isReady=!0,window.onerror=function(r,n,o,i,s){if("ResizeObserver loop limit exceeded"!==r.toString()){var a=y(s);e({H_js_error_id:O(a),H_error_category:t.ErrorTypes.JS_ERROR,H_error_type:s.name||t.ErrorTypes.JS_ERROR,H_error_message:s.message,H_error_stack:JSON.stringify({details:I(s),errorStack:a})})}})},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(p),$=function(e){function n(t,r){var n=e.call(this,t,r)||this;return n.options=t,n.context=r,n.name="DomErrorPlugin",n.isReady=!1,n}return r(n,e),n.prototype.init=function(e){this.isReady||(this.isReady=!0,window.addEventListener("error",(function(r){if(r.target!==window){var n=r.target,o=n.src||n.href,i=(a=(s=n).tagName.toLowerCase(),c=s.getAttributeNames(),u="",c.forEach((function(t){u+=" ".concat(t,"='").concat(s.getAttribute(t),"'")})),"<".concat(a).concat(u,">"));e({H_js_error_id:O(i),H_error_category:t.ErrorTypes.RESOURCE_ERROR,H_error_type:t.ErrorTypes.RESOURCE_ERROR,H_error_message:i,H_source_element:i,H_source_src:o})}var s,a,c,u}),!0))},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(p);function Y(){if(void 0!==window.performance&&"function"==typeof window.performance.getEntriesByType){var t=performance.getEntriesByType("navigation")[0],e=t.startTime,r=t.redirectStart,n=t.redirectEnd,o=t.fetchStart,i=t.domainLookupStart,s=t.domainLookupEnd,a=t.connectStart,c=t.secureConnectionStart,u=t.connectEnd,p=t.requestStart,d=t.responseStart,l=t.responseEnd,h=t.domInteractive,f=t.domContentLoadedEventEnd,m=t.loadEventStart,_=t.loadEventEnd,g=t.redirectCount,y=t.duration,v=t.unloadEventEnd,S=t.unloadEventStart;return{H_first_byte_time:b(d-e),H_unload_time:b(v-S),H_redirect_time:b(n-r),H_redirect_count:g,H_cache_check_time:b(i-o),H_dns_time:b(s-i),H_tcp_time:b(u-a),H_ssl_time:b(u-c),H_first_byte_response_time:b(d-r),H_dom_ready_time:b(f-o),H_request_time:b(d-p),H_content_transfer_time:b(l-d),H_dom_parsing_time:b(h-l),H_page_load_time:b(_-e),H_resource_load_time:b(m-f),H_resource_duration:y,H_load_event_time:b(_-m)}}var E=performance.timing,H=E.navigationStart,w=E.responseStart,R=E.unloadEventEnd,T=E.unloadEventStart,x=E.requestStart,O=E.responseEnd,C=E.redirectStart,P=E.redirectEnd,I=E.domainLookupStart,A=E.fetchStart,L=E.domainLookupEnd,q=E.connectStart,k=E.connectEnd,N=E.secureConnectionStart,D=E.domContentLoadedEventEnd,M=E.domInteractive,j=E.loadEventStart,F=E.loadEventEnd;return{H_first_byte_time:b(w-H),H_unload_time:b(R-T),H_redirect_time:b(P-C),H_cache_check_time:b(I-A),H_dns_time:b(L-I),H_tcp_time:b(k-q),H_ssl_time:b(k-N),H_first_byte_response_time:b(w-C),H_dom_ready_time:b(D-A),H_request_time:b(w-x),H_content_transfer_time:b(O-w),H_dom_parsing_time:b(M-O),H_page_load_time:b(F-H),H_resource_load_time:b(j-D),H_load_event_time:b(F-j)}}var Z,Q,tt,et,rt=-1,nt=function(t){addEventListener("pageshow",(function(e){e.persisted&&(rt=e.timeStamp,t(e))}),!0)},ot=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},it=function(){var t=ot();return t&&t.activationStart||0},st=function(t,e){var r=ot(),n="navigate";return rt>=0?n="back-forward-cache":r&&(document.prerendering||it()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},at=function(t,e,r){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var n=new PerformanceObserver((function(t){Promise.resolve().then((function(){e(t.getEntries())}))}));return n.observe(Object.assign({type:t,buffered:!0},r||{})),n}}catch(t){}},ct=function(t,e,r,n){var o,i;return function(s){e.value>=0&&(s||n)&&((i=e.value-(o||0))||void 0===o)&&(o=e.value,e.delta=i,e.rating=function(t,e){return t>e[1]?"poor":t>e[0]?"needs-improvement":"good"}(e.value,r),t(e))}},ut=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},pt=function(t){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t()}))},dt=function(t){var e=!1;return function(){e||(t(),e=!0)}},lt=-1,ht=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},ft=function(t){"hidden"===document.visibilityState&&lt>-1&&(lt="visibilitychange"===t.type?t.timeStamp:0,_t())},mt=function(){addEventListener("visibilitychange",ft,!0),addEventListener("prerenderingchange",ft,!0)},_t=function(){removeEventListener("visibilitychange",ft,!0),removeEventListener("prerenderingchange",ft,!0)},gt=function(){return lt<0&&(lt=ht(),mt(),nt((function(){setTimeout((function(){lt=ht(),mt()}),0)}))),{get firstHiddenTime(){return lt}}},yt=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},vt=[1800,3e3],St=function(t,e){e=e||{},yt((function(){var r,n=gt(),o=st("FCP"),i=at("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(i.disconnect(),t.startTime<n.firstHiddenTime&&(o.value=Math.max(t.startTime-it(),0),o.entries.push(t),r(!0)))}))}));i&&(r=ct(t,o,vt,e.reportAllChanges),nt((function(n){o=st("FCP"),r=ct(t,o,vt,e.reportAllChanges),ut((function(){o.value=performance.now()-n.timeStamp,r(!0)}))})))}))},Et=[.1,.25],Ht=[2500,4e3],wt={},bt=function(t,e){e=e||{},yt((function(){var r,n=gt(),o=st("LCP"),i=function(t){e.reportAllChanges||(t=t.slice(-1)),t.forEach((function(t){t.startTime<n.firstHiddenTime&&(o.value=Math.max(t.startTime-it(),0),o.entries=[t],r())}))},s=at("largest-contentful-paint",i);if(s){r=ct(t,o,Ht,e.reportAllChanges);var a=dt((function(){wt[o.id]||(i(s.takeRecords()),s.disconnect(),wt[o.id]=!0,r(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,(function(){return function(t){var e=self.requestIdleCallback||self.setTimeout,r=-1;return t=dt(t),"hidden"===document.visibilityState?t():(r=e(t),pt(t)),r}(a)}),{once:!0,capture:!0})})),pt(a),nt((function(n){o=st("LCP"),r=ct(t,o,Ht,e.reportAllChanges),ut((function(){o.value=performance.now()-n.timeStamp,wt[o.id]=!0,r(!0)}))}))}}))},Rt=[800,1800],Tt=function t(e){document.prerendering?yt((function(){return t(e)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(e)}),!0):setTimeout(e,0)},xt=function(t,e){e=e||{};var r=st("TTFB"),n=ct(t,r,Rt,e.reportAllChanges);Tt((function(){var o=ot();o&&(r.value=Math.max(o.responseStart-it(),0),r.entries=[o],n(!0),nt((function(){r=st("TTFB",0),(n=ct(t,r,Rt,e.reportAllChanges))(!0)})))}))},Ot={passive:!0,capture:!0},Ct=new Date,Pt=function(t,e){Z||(Z=e,Q=t,tt=new Date,Lt(removeEventListener),It())},It=function(){if(Q>=0&&Q<tt-Ct){var t={entryType:"first-input",name:Z.type,target:Z.target,cancelable:Z.cancelable,startTime:Z.timeStamp,processingStart:Z.timeStamp+Q};et.forEach((function(e){e(t)})),et=[]}},At=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,e){var r=function(){Pt(t,e),o()},n=function(){o()},o=function(){removeEventListener("pointerup",r,Ot),removeEventListener("pointercancel",n,Ot)};addEventListener("pointerup",r,Ot),addEventListener("pointercancel",n,Ot)}(e,t):Pt(e,t)}},Lt=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(e){return t(e,At,Ot)}))},qt=[100,300];function kt(){return new Promise((function(t){!function(t,e){e=e||{},yt((function(){var r,n=gt(),o=st("FID"),i=function(t){t.startTime<n.firstHiddenTime&&(o.value=t.processingStart-t.startTime,o.entries.push(t),r(!0))},s=function(t){t.forEach(i)},a=at("first-input",s);r=ct(t,o,qt,e.reportAllChanges),a&&(pt(dt((function(){s(a.takeRecords()),a.disconnect()}))),nt((function(){var n;o=st("FID"),r=ct(t,o,qt,e.reportAllChanges),et=[],Q=-1,Z=null,Lt(addEventListener),n=i,et.push(n),It()})))}))}((function(e){t(e.value)}))}))}function Nt(){return new Promise((function(t){!function(t,e){e=e||{},St(dt((function(){var r,n=st("CLS",0),o=0,i=[],s=function(t){t.forEach((function(t){if(!t.hadRecentInput){var e=i[0],r=i[i.length-1];o&&t.startTime-r.startTime<1e3&&t.startTime-e.startTime<5e3?(o+=t.value,i.push(t)):(o=t.value,i=[t])}})),o>n.value&&(n.value=o,n.entries=i,r())},a=at("layout-shift",s);a&&(r=ct(t,n,Et,e.reportAllChanges),pt((function(){s(a.takeRecords()),r(!0)})),nt((function(){o=0,n=st("CLS",0),r=ct(t,n,Et,e.reportAllChanges),ut((function(){return r()}))})),setTimeout(r,0))})))}((function(e){t(e.value)}),{reportAllChanges:!0})}))}var Dt=function(e){function n(t,r){var n=e.call(this,t,r)||this;return n.options=t,n.context=r,n.name="PerformancePlugin",n.isReady=!1,n}return r(n,e),n.prototype.init=function(e){if(!this.isReady){this.isReady=!0;var r,n=this.options.performanceOff;n.includes(t.PerformanceFeat.VITALS)||Promise.all([new Promise((function(t){bt((function(e){t(e.value)}))})),kt(),Nt(),new Promise((function(t){xt((function(e){t(e.value)}))})),new Promise((function(t){St((function(e){t(e.value)}))})),new Promise((function(t){"PerformanceObserver"in window?new PerformanceObserver((function(e){var r,n,o=e.getEntries();try{for(var i=a(o),s=i.next();!s.done;s=i.next()){var c=s.value;"first-paint"===c.name&&t(c.startTime)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}})).observe({entryTypes:["paint"]}):t(0)}))]).then((function(t){var e=c(t,6),r=e[0],n=e[1],o=e[2],i=e[3],s=e[4];return{H_first_paint_time:b(e[5]),H_first_contentful_paint_time:b(s),H_largest_contentful_paint_time:b(r),H_time_to_first_byte:b(i),H_first_input_delay:b(n),H_cumulative_layout_shift:b(o)}})).then((function(r){e(s({event:"H_performance_page",H_category:t.PerformanceFeat.VITALS},r))})),n.includes(t.PerformanceFeat.LONG_TASK)||(r=function(r){e(s({event:"H_performance_page",H_category:t.PerformanceFeat.LONG_TASK,H_url:window.location.href},r))},"PerformanceObserver"in window&&new PerformanceObserver((function(t){var e=t.getEntries(),n=0,o=[];e.forEach((function(t){var e=t.duration,r=t.name,i=t.startTime;n+=e,o.push({duration:b(e),startTime:b(i),name:r})})),r({H_long_task_time:b(n),H_long_task:e.length,H_long_task_list:o})})).observe({entryTypes:["longtask"]})),window.addEventListener("load",(function(){n.includes(t.PerformanceFeat.BASIC)||e(s({event:"H_performance_loading",H_category:t.PerformanceFeat.BASIC},Y()))}))}},n.prototype.transform=function(t){return this.context.getReportData(t.event,t)},n}(p),Mt=function(e){function n(t,r){var n=e.call(this,t,r)||this;return n.options=t,n.context=r,n.name="FetchPlugin",n.isReady=!1,n}return r(n,e),n.prototype.init=function(e){if(window.fetch&&!this.isReady){this.isReady=!0;var r=this;!function(t,e,r,n){if(void 0!==t&&(e in t||n)){var o=r(t[e]);_(o)&&(t[e]=o)}}(window,"fetch",(function(n){return function(o,i){void 0===i&&(i={});var a=H(),c=i||{},u=c.headers,p=c.signal,d=c.method;return n(o,i).then((function(n){if(!n.ok){var c=s(s({},r.context.getRequestHeaders()),u||{}),p=H();n.clone().text().then((function(r){e({H_js_error_id:O("url=".concat(o,"&method=").concat(d)),H_error_category:t.ErrorTypes.FETCH_ERROR,H_error_type:t.ErrorTypes.FETCH_ERROR,H_error_message:o,H_request_url:o,H_request_headers:S(c),H_request_method:i.method.toLowerCase(),H_request_params:g(i.body)?i.body:"",H_response_status:n.status,H_response_status_text:n.statusText,H_request_time:a,H_response_time:p,H_response_data:r})}))}return n})).catch((function(n){if(p&&p.aborted)throw n;var c="";c=(c=n instanceof Error?null==n?void 0:n.message:S(n))||"网络错误，或者无法连接";var l=s(s({},r.context.getRequestHeaders()),u||{});throw e({H_js_error_id:O("url=".concat(o,"&method=").concat(d)),H_error_category:t.ErrorTypes.FETCH_ERROR,H_error_type:t.ErrorTypes.FETCH_ERROR,H_error_message:o,H_request_url:o,H_request_headers:S(l),H_request_method:i.method.toLowerCase(),H_request_params:g(i.body)?i.body:"",H_response_status:0,H_response_status_text:c,H_request_time:a,H_response_time:H(),H_response_data:c}),n}))}}))}},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(p),jt=function(e){function n(t,r){var n=e.call(this,t,r)||this;return n.options=t,n.context=r,n.name="XhrPlugin",n.isReady=!1,n}return r(n,e),n.prototype.init=function(e){if(!this.isReady){this.isReady=!0;var r=this,n=XMLHttpRequest.prototype.open,o=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.H_request_method=t[0],this.H_request_url=t[1],this.H_request_time=H(),n.apply(this,t)},XMLHttpRequest.prototype.send=function(n){var i=this;this.addEventListener("abort",(function(){i.H_response_status_text="abort"})),this.addEventListener("error",(function(){i.H_response_status_text="error"})),this.addEventListener("timeout",(function(){i.H_response_status_text="timeout"})),this.addEventListener("loadend",(function(){var o=i,s=o.status,a=o.statusText,c=o.responseType,u=o.responseText,p=o.response,d=o.H_request_method,l=o.H_request_url,f=o.H_request_time,m=o.H_response_status_text;if(!(s>=200&&s<300)&&"abort"!==m&&!i.isMonitor){var _=c&&"text"!==c?p:u,y=m||a;"error"===m?y="网络错误，或者无法连接":"timeout"===m&&(y="请求超时"),e({H_js_error_id:O("url=".concat(l,"&method=").concat(d)),H_error_category:t.ErrorTypes.AJAX_ERROR,H_error_type:t.ErrorTypes.AJAX_ERROR,H_error_message:l,H_request_url:l,H_request_headers:S(r.context.getRequestHeaders()),H_request_method:d,H_request_params:h(n)?S(n):g(n)?n:"",H_response_status:s,H_response_status_text:y,H_request_time:f,H_response_time:H(),H_response_data:_&&S(_)})}delete i.H_request_method,delete i.H_request_url,delete i.H_request_time,delete i.H_response_status_text}));try{o.call(this,n)}catch(t){}}}},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(p),Ft=function(e){function n(t,r){var n=e.call(this,t,r)||this;return n.options=t,n.context=r,n.name="PromiseErrorPlugin",n.isReady=!1,n}return r(n,e),n.prototype.init=function(e){this.isReady||(this.isReady=!0,window.addEventListener("unhandledrejection",(function(r){var n=r.reason,o=t.ErrorTypes.PROMISE_ERROR,i="",s="";g(n)?i=n:void 0===n?i="undefined":(null==n?void 0:n.stack)?(o=n.name,i=n.message,s=JSON.stringify({errorStack:y(n),details:I(n)})):i=S(n);["axioserror","cancelederror","aborterror"].includes(o.toLowerCase())||e({H_js_error_id:O("message=".concat(i,"&stack=").concat(s)),H_error_category:t.ErrorTypes.PROMISE_ERROR,H_error_type:o||t.ErrorTypes.PROMISE_ERROR,H_error_message:i,H_error_stack:s})})))},n.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},n}(p),Ut=function(e){function n(t,r){void 0===r&&(r=!0);var n=e.call(this,t,r)||this;return n.consolePrefix="性能监控SDK",n.generalProperties={H_lib_version:"4.0.3",H_lib:"js",H_lib_method:"code",H_timezone_offset:(new Date).getTimezoneOffset()},n.requestHeaders={},n.customProperties={},n.useInstancing&&n.init(t),n}return r(n,e),n.prototype.init=function(e){var r=this;if(this.isReady)this.log("Monitor has been initialized",t.ConsoleTypes.ERROR);else{var n={serverUrl:"",name:"",showLog:!1,errorCapture:!0,performance:!0,openPromiseCapture:!1,sendType:t.ReportTypes.BEACON,customHeaders:{},credentials:!1,dataSendTimeout:3e3,batchSend:!1,imgUseCrossOrigin:!1,performanceOff:[],plugins:[]};this.options=s(s({},n),e),this.initState(),this.normalizeConfig(),this.initPlugins(),this.isReady=!0,window.addEventListener("beforeunload",(function(){r.store.setSessionId("")}))}},n.prototype.initState=function(){this.store=new j(this.options),this.store.init()},n.prototype.normalizeConfig=function(){var e=this.options,r=e.serverUrl,n=e.batchSend;""===(r=(r=r||"").trim())&&this.log("当前 serverUrl 为空，network 中不会发数据，请配置正确的 serverUrl！",t.ConsoleTypes.WARN),(!0===n||h(n)&&!E(n))&&(this.options.batchSend=s({dataSendTimeout:6e3,sendInterval:6e3,storageLimit:200},n),this.batchSender=new K(this.options,"hinaepm_tab","hinaepm_data_"))},n.prototype.initPlugins=function(){var t=this,e=this.options,r=e.errorCapture,n=e.performance,o=e.openPromiseCapture,i=e.plugins,s=void 0===i?[]:i;s=s||[];var a=new z(this.options,this),c=new $(this.options,this),u=new Mt(this.options,this),p=new jt(this.options,this),d=new Ft(this.options,this),l=new Dt(this.options,this);a.disabled=!r,c.disabled=!r,u.disabled=!r,p.disabled=!r,d.disabled=!(r&&o),l.disabled=!n,this.plugins=[a,c,u,p,d,l],m(s)&&s.forEach((function(e){var r=new e(t.options,t);t.plugins.push(r)})),this.runPlugins(this.plugins)},n.prototype.report=function(t,e,r){var n=this.options.beforeSend,o=t;_(n)&&(o=n(o)),this.log(o),this.sendReportData(o,e,r)},n.prototype.getReportData=function(t,e){var r=this.options.sourcemapVersion;r||(r="1.0.0");var n=this.store.getAnonymousId(),o=this.store.getAccountId(),i=this.store.getSessionId(),a=H(),c=s(s(s(s({},this.getGeneralProperties()),this.customProperties),{H_js_sourcemap_version:r}),e||{}),u={anonymous_id:n,type:"track",event:t,time:a,_track_id:x(),properties:c};(o&&(u.account_id=o),i)?H()-this.store.getSessionIdCreateTime()>18e5&&(i=T(),this.store.setSessionId(i)):(i=T(),this.store.setSessionId(i));return c.H_session_id=i,u.send_time=H(),u},n.prototype.getGeneralProperties=function(){var t=new F;return this.generalProperties=s(s({},this.generalProperties),{H_viewport_width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,H_viewport_height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,H_screen_width:window.screen.width,H_screen_height:window.screen.height,H_browser:t.browserName,H_browser_version:t.browserVersion,H_os:t.os,H_os_version:t.osVersion,H_model:t.model,H_browser_user_agent:navigator.userAgent,H_language:g(navigator.language)?navigator.language.toLowerCase():"取值异常",H_url:window.location.href,H_title:document.title}),this.generalProperties},n.prototype.captureException=function(e,r,n){e instanceof Error||(e=new Error(e)),h(r)||(r={});var o=y(e),i=this.getReportData("H_performance_js",{H_js_error_id:O(o),H_error_category:t.ErrorTypes.CAPTURE_EXCEPTION,H_error_type:t.ErrorTypes.CAPTURE_EXCEPTION,H_error_message:e.message,H_error_stack:JSON.stringify({details:I(e),errorStack:o}),H_capture_extra:JSON.stringify(r)});this.report(i,n)},n.prototype.captureEvent=function(e,r){if(h(e)){var n=e.message,o=e.extra;h(o)||(o={});var i=this.getReportData("H_performance_js",{H_js_error_id:O(n||""),H_error_category:t.ErrorTypes.CAPTURE_EVENT,H_error_type:t.ErrorTypes.CAPTURE_EVENT,H_error_message:n||"",H_capture_message:n||"",H_capture_extra:JSON.stringify(o)});this.report(i,r)}else this.log("captureEvent event参数错误：event必须是一个对象")},n.prototype.setCommonProperties=function(t){h(t)&&!E(t)&&(this.customProperties=w(this.customProperties,t))},n.prototype.getCommonProperties=function(){return s(s({},this.getGeneralProperties()),this.customProperties)},n.prototype.clearCommonProperties=function(t){var e=this;void 0===t&&(t=!0),!0===t?this.customProperties={}:m(t)&&t.forEach((function(t){t in e.customProperties&&delete e.customProperties[t]}))},n.prototype.setRequestHeaders=function(t){void 0===t&&(t={}),h(t)&&!E(t)&&(this.requestHeaders=w(this.requestHeaders,t))},n.prototype.getRequestHeaders=function(){return this.requestHeaders},n.prototype.clearRequestHeaders=function(t){var e=this;void 0===t&&(t=!0),!0===t?this.requestHeaders={}:m(t)&&t.forEach((function(t){t in e.requestHeaders&&delete e.requestHeaders[t]}))},n.componentName="Monitor",n}(X);var Bt=new Ut({},!1);return t.Monitor=Ut,t.PluginBase=p,t.default=Bt,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
