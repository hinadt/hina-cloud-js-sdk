var hinaDataStatistic=function(t){"use strict";var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},e(t,r)};function r(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}var o,n,i,a,s,c,u=function(){return u=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},u.apply(this,arguments)};function l(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],o=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,n,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a}function d(t,e,r){if(r||2===arguments.length)for(var o,n=0,i=e.length;n<i;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError,t.ConsoleTypes=void 0,(o=t.ConsoleTypes||(t.ConsoleTypes={})).LOG="log",o.INFO="info",o.WARN="warn",o.ERROR="error",o.ASSERT="assert",t.ReportTypes=void 0,(n=t.ReportTypes||(t.ReportTypes={})).BEACON="beacon",n.IMAGE="image",n.AJAX="ajax",t.PlatformTypes=void 0,(i=t.PlatformTypes||(t.PlatformTypes={})).WEB="web",i.MINI_APP="mini_app",t.ErrorTypes=void 0,(a=t.ErrorTypes||(t.ErrorTypes={})).JS_ERROR="JsError",a.RESOURCE_ERROR="ResourceError",a.FETCH_ERROR="FetchError",a.AJAX_ERROR="AjaxError",a.PROMISE_ERROR="PromiseError",a.WHITE_SCREEN_ERROR="WhiteScreenError",a.VUE_ERROR="VueError",a.REACT_ERROR="ReactError",a.CAPTURE_EVENT="CaptureEvent",a.CAPTURE_EXCEPTION="CaptureException",t.PerformanceFeat=void 0,(s=t.PerformanceFeat||(t.PerformanceFeat={})).BASIC="basic",s.VITALS="vitals",s.RESOURCE="resource",s.LONG_TASK="longtask",t.VariablesTypes=void 0,(c=t.VariablesTypes||(t.VariablesTypes={})).INTEGER="INTEGER",c.STRING="STRING",c.BOOLEAN="BOOLEAN";var f=function(t,e){this.options=t,this.context=e},h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function g(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var v={exports:{}};!function(t,e){!function(r,o){var n="function",i="undefined",a="object",s="string",c="major",u="model",l="name",p="type",d="vendor",f="version",h="architecture",g="console",v="mobile",m="tablet",y="smarttv",_="wearable",w="embedded",b="Amazon",T="Apple",S="ASUS",k="BlackBerry",H="Browser",R="Chrome",E="Firefox",x="Google",C="Huawei",A="LG",P="Microsoft",O="Motorola",L="Opera",I="Samsung",N="Sharp",D="Sony",U="Xiaomi",j="Zebra",q="Facebook",B="Chromium OS",F="Mac OS",M=" Browser",W=function(t){for(var e={},r=0;r<t.length;r++)e[t[r].toUpperCase()]=t[r];return e},z=function(t,e){return typeof t===s&&-1!==V(e).indexOf(V(t))},V=function(t){return t.toLowerCase()},J=function(t,e){if(typeof t===s)return t=t.replace(/^\s\s*/,""),typeof e===i?t:t.substring(0,500)},K=function(t,e){for(var r,i,s,c,u,l,p=0;p<e.length&&!u;){var d=e[p],f=e[p+1];for(r=i=0;r<d.length&&!u&&d[r];)if(u=d[r++].exec(t))for(s=0;s<f.length;s++)l=u[++i],typeof(c=f[s])===a&&c.length>0?2===c.length?typeof c[1]==n?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==n||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):o:this[c[0]]=l?c[1].call(this,l,c[2]):o:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):o):this[c]=l||o;p+=2}},G=function(t,e){for(var r in e)if(typeof e[r]===a&&e[r].length>0){for(var n=0;n<e[r].length;n++)if(z(e[r][n],t))return"?"===r?o:r}else if(z(e[r],t))return"?"===r?o:r;return e.hasOwnProperty("*")?e["*"]:t},$={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,f],[/opios[\/ ]+([\w\.]+)/i],[f,[l,L+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[l,L+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[l,L]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[l,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[l,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[l,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[l,"UC"+H]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[l,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[l,"Smart Lenovo "+H]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+H],f],[/\bfocus\/([\w\.]+)/i],[f,[l,E+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[l,L+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[l,L+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[l,"MIUI "+H]],[/fxios\/([-\w\.]+)/i],[f,[l,E]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360"+M]],[/\b(qq)\/([\w\.]+)/i],[[l,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1"+M],f],[/samsungbrowser\/([\w\.]+)/i],[f,[l,I+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],f],[/metasr[\/ ]?([\d\.]+)/i],[f,[l,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[l,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[l,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,q],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[l,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[l,R+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,R+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[l,"Android "+H]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[f,G,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],f],[/(wolvic)\/([\w\.]+)/i],[l,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[l,E+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[l,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[l,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,V]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",V]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,V]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,I],[p,m]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,I],[p,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[d,T],[p,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,T],[p,m]],[/(macintosh);/i],[u,[d,T]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,N],[p,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,C],[p,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,C],[p,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[u,/_/g," "],[d,U],[p,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,U],[p,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[p,v]],[/\b(opd2\d{3}a?) bui/i],[u,[d,"OPPO"],[p,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[p,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[p,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,O],[p,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,O],[p,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,A],[p,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,A],[p,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[p,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[p,v]],[/(pixel c)\b/i],[u,[d,x],[p,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,x],[p,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,D],[p,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,D],[p,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[p,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,b],[p,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,b],[p,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[p,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,k],[p,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,S],[p,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,S],[p,v]],[/(nexus 9)/i],[u,[d,"HTC"],[p,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[p,v]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[u,[d,"TCL"],[p,m]],[/(itel) ((\w+))/i],[[d,V],u,[p,G,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[p,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[p,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[d,"Ulefone"],[p,v]],[/droid.+; (a(?:015|06[35]|142p?))/i],[u,[d,"Nothing"],[p,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[p,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[p,m]],[/(surface duo)/i],[u,[d,P],[p,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[p,v]],[/(u304aa)/i],[u,[d,"AT&T"],[p,v]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[p,v]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[p,m]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[p,m]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[p,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[p,m]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[p,m]],[/\b(k88) b/i],[u,[d,"ZTE"],[p,m]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[p,v]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[p,v]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[p,m]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[p,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[p,m]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[p,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[p,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[p,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[p,v]],[/\b(ph-1) /i],[u,[d,"Essential"],[p,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[p,m]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[p,m]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[p,m]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[p,m]],[/(sprint) (\w+)/i],[d,u,[p,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,P],[p,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,j],[p,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,j],[p,v]],[/smart-tv.+(samsung)/i],[d,[p,y]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,I],[p,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,A],[p,y]],[/(apple) ?tv/i],[d,[u,T+" TV"],[p,y]],[/crkey/i],[[u,R+"cast"],[d,x],[p,y]],[/droid.+aft(\w+)( bui|\))/i],[u,[d,b],[p,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[d,N],[p,y]],[/(bravia[\w ]+)( bui|\))/i],[u,[d,D],[p,y]],[/(mitv-\w{5}) bui/i],[u,[d,U],[p,y]],[/Hbbtv.*(technisat) (.*);/i],[d,u,[p,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,J],[u,J],[p,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[p,g]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[p,g]],[/(playstation [345portablevi]+)/i],[u,[d,D],[p,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,P],[p,g]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[u,[d,I],[p,_]],[/((pebble))app/i],[d,u,[p,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[d,T],[p,_]],[/droid.+; (glass) \d/i],[u,[d,x],[p,_]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,j],[p,_]],[/(quest( \d| pro)?)/i],[u,[d,q],[p,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[p,w]],[/(aeobc)\b/i],[u,[d,b],[p,w]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[p,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[p,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[l,[f,G,$]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,G,$],[l,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,F],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,f],[/\(bb(10);/i],[f,[l,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[l,E+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[l,R+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,B],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,f],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,f]]},Z=function(t,e){if(typeof t===a&&(e=t,t=o),!(this instanceof Z))return new Z(t,e).getResult();var g=typeof r!==i&&r.navigator?r.navigator:o,y=t||(g&&g.userAgent?g.userAgent:""),_=g&&g.userAgentData?g.userAgentData:o,w=e?function(t,e){var r={};for(var o in t)e[o]&&e[o].length%2==0?r[o]=e[o].concat(t[o]):r[o]=t[o];return r}(X,e):X,b=g&&g.userAgent==y;return this.getBrowser=function(){var t={};return t[l]=o,t[f]=o,K.call(t,y,w.browser),t[c]=function(t){return typeof t===s?t.replace(/[^\d\.]/g,"").split(".")[0]:o}(t[f]),b&&g&&g.brave&&typeof g.brave.isBrave==n&&(t[l]="Brave"),t},this.getCPU=function(){var t={};return t[h]=o,K.call(t,y,w.cpu),t},this.getDevice=function(){var t={};return t[d]=o,t[u]=o,t[p]=o,K.call(t,y,w.device),b&&!t[p]&&_&&_.mobile&&(t[p]=v),b&&"Macintosh"==t[u]&&g&&typeof g.standalone!==i&&g.maxTouchPoints&&g.maxTouchPoints>2&&(t[u]="iPad",t[p]=m),t},this.getEngine=function(){var t={};return t[l]=o,t[f]=o,K.call(t,y,w.engine),t},this.getOS=function(){var t={};return t[l]=o,t[f]=o,K.call(t,y,w.os),b&&!t[l]&&_&&_.platform&&"Unknown"!=_.platform&&(t[l]=_.platform.replace(/chrome os/i,B).replace(/macos/i,F)),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return y},this.setUA=function(t){return y=typeof t===s&&t.length>500?J(t,500):t,this},this.setUA(y),this};Z.VERSION="1.0.39",Z.BROWSER=W([l,f,c]),Z.CPU=W([h]),Z.DEVICE=W([u,d,p,g,v,y,m,_,w]),Z.ENGINE=Z.OS=W([l,f]),t.exports&&(e=t.exports=Z),e.UAParser=Z;var Y=typeof r!==i&&(r.jQuery||r.Zepto);if(Y&&!Y.ua){var Q=new Z;Y.ua=Q.getResult(),Y.ua.get=function(){return Q.getUA()},Y.ua.set=function(t){Q.setUA(t);var e=Q.getResult();for(var r in e)Y.ua[r]=e[r]}}}("object"==typeof window?window:h)}(v,v.exports);var m=g(v.exports),y=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],_=["www.baidu.","m.baidu.","m.sm.cn","so.com","sogou.com","youdao.com","google.","yahoo.com/","bing.com/","ask.com/"],w=["weibo.com","renren.com","kaixin001.com","douban.com","qzone.qq.com","zhihu.com","tieba.baidu.com","weixin.qq.com"],b={baidu:["wd","word","kw","keyword"],google:"q",bing:"q",yahoo:"p",sogou:["query","keyword"],so:"q",sm:"q"},T="hinasdk_domain_test",S=Object.prototype.toString;function k(t){return"[object Object]"===S.call(t)}function H(t){return null!=t}function R(t){return Array.isArray(t)}function E(t){return"function"==typeof t}function x(t){return"string"==typeof t}function C(t){return"number"==typeof t}function A(t){return"boolean"==typeof t}function P(t){var e="";if(x(t))return t;if(null==t?void 0:t.stack)e=k(t.stack)?JSON.stringify(t.stack):t.stack;else{if(!t)return"未知js错误";e=k(t)?JSON.stringify(t):t.toString()}return e}function O(){}function L(t){try{return JSON.parse(t)}catch(t){}return t}function I(t){try{return JSON.stringify(t)}catch(e){return t}}function N(t){return 0===Object.keys(t).length}function D(){return Date.now&&E(Date.now)?Date.now():(new Date).getTime()}function U(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object.create(null);return t.forEach((function(t){t&&Object.keys(t).forEach((function(e){var o=t[e];k(o)?k(r[e])?r[e]=U(r[e],o):r[e]=U(o):r[e]=o}))})),r}function j(t){return Object.keys(t).reduce((function(e,r){return H(t[r])&&""!==t[r]&&(e[r]=t[r]),e}),{})}function q(t){var e={};try{e=new URL(t)}catch(t){}return e}function B(t,e){if(void 0===e&&(e=3),!t)return t;var r=t.toString(),o=r.indexOf(".");return r=-1!==o?r.substring(0,o+e+1):r.substring(0),parseFloat(r)}function F(t){t=t||window.location.hostname,/^[a-zA-Z0-9\u4e00-\u9fa5\-\\.]+$/.exec(t)||(t="");var e=t.split(".");if(e.length>=2&&!/^(\d+\.)+\d+$/.test(t))for(var r=".".concat(e.splice(e.length-1,1));e.length>0;)if(r=".".concat(e.splice(e.length-1,1)).concat(r),document.cookie="".concat(T,"=true; path=/; domain=").concat(r),-1!==document.cookie.indexOf("".concat(T,"=true")))return document.cookie="".concat(T,"=true; path=/; domain=").concat(r,"; max-age=0"),r;return""}function M(){var t=F();return""===t?"url解析失败":t}function W(t){var e=t||document.referrer;return"string"!=typeof e?"referrer exception".concat(String(e)):(e.startsWith("https://www.baidu.com/")&&(e=e.split("?")[0]),"string"==typeof(e=e.slice(0,200))?e:"")}function z(t,e){return e&&"string"==typeof e||(e="hostname解析异常"),t&&(q(t).hostname||"")||e}function V(){var t=D(),e=Math.floor(1e6*Math.random());return"".concat(t,"_").concat(e)}function J(){var t=D(),e=Math.floor(1e6*Math.random());return Number(String(t).slice(-5)+String(e).slice(0,4))}function K(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return e>>>0}function G(t,e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t=decodeURIComponent(t);var r=new RegExp("[\\?&]".concat(e,"=([^&#]*)")).exec(t);return null===r||r&&"string"!=typeof r[1]&&r[1].length?"":decodeURIComponent(r[1])}function $(t){try{return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x".concat(e)))})))}catch(e){return t}}function X(t,e,r,o){if(void 0!==t&&(e in t||o)){var n=r(t[e]);E(n)&&(t[e]=n)}}function Z(t){if(!t)return"";var e=t.match(/\/([^/]+)$/);return e?e[1]:""}function Y(t){if(void 0===(null==t?void 0:t.stack)||!(null==t?void 0:t.stack))return[];for(var e,r=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,o=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,n=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,a=t.stack.split("\n"),s=[],c=0;c<a.length;c++){var u=a[c];(e=r.exec(u))||(e=o.exec(u))?s.push({source:e[2],filename:Z(e[2]),lineno:e[3]?+e[3]:null,colno:e[4]?+e[4]:null}):(e=n.exec(u))?s.push({source:e[3],filename:Z(e[3]),lineno:e[4]?+e[4]:null,colno:e[5]?+e[5]:null}):(e=i.exec(u))&&s.push({source:e[5],filename:Z(e[5]),lineno:e[1]?+e[1]:null,colno:e[2]?+e[2]:null})}return s.length>0?[s[0]]:s}var Q=function(t,e){return Q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},Q(t,e)};function tt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Q(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function et(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],o=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}"function"==typeof SuppressedError&&SuppressedError;var rt=function(){function t(){this.name="CookieStorage"}return t.prototype.isSupport=function(t,e){var r=this;return void 0===t&&(t="cookie_support_test"),void 0===e&&(e="1"),navigator.cookieEnabled&&(r.set(t,e),r.get(t)===e&&(r.remove(t),!0))},t.prototype.get=function(t){var e,r,o=document.cookie.split(";");try{for(var n=et(o),i=n.next();!i.done;i=n.next()){var a=i.value.split("=");if(a[0].trim()===t)return decodeURIComponent(a[1])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return null},t.prototype.set=function(t,e,r,o,n,i,a){o=o||"/",t=t.trim(),e=e.trim();var s="".concat(t,"=").concat(encodeURIComponent(e),"; path=").concat(o,";");r=H(r)?r:63072e8,s+=" max-age=".concat(r,";"),a&&(s+=" secure;"),n&&(s+=" domain=".concat(n,";")),["Strict","Lax","None"].includes(i)&&(s+=" SameSite=".concat(i,";")),document.cookie=s},t.prototype.remove=function(t,e){void 0===e&&(e="/"),this.set(t,"1",0,e)},t.prototype.setDomain=function(t,e,r){var o=M();"url解析失败"===o&&(o=""),this.set(t,e,r,"/",o)},t}(),ot=function(){function t(){this.name="LocalStorage"}return t.prototype.isSupport=function(){var t=!0;try{var e="__localStorageSupport__",r="testIsSupportStorage";this.set(e,r),this.get(e)!==r&&(t=!1),this.remove(e)}catch(e){t=!1}return t},t.prototype.key=function(t){return window.localStorage.key(t)},t.prototype.get=function(t){return window.localStorage.getItem(t)},t.prototype.length=function(){return window.localStorage.length},t.prototype.set=function(t,e){try{window.localStorage.setItem(t,e)}catch(t){}},t.prototype.remove=function(t){window.localStorage.removeItem(t)},t.prototype.parse=function(t){var e=this.get(t);try{e=JSON.parse(e)}catch(t){e=""}return e},t}(),nt=function(){function t(){this.name="MemoryStorage",this.data={}}return t.prototype.get=function(t){var e=this.data[t];return H(null==e?void 0:e.expireTime)?e.expireTime<D()?null:e.value:null==e?void 0:e.value},t.prototype.set=function(t,e,r){if(H(r)){var o=D()+1e3*r;this.data[t]={value:e,expireTime:o}}this.data[t]={value:e}},t.prototype.setDomain=function(t,e,r){this.set(t,e,r)},t}(),it=new m;function at(t){var e=it.getResult(),r=e.browser,o=e.device,n=e.os,i=e.ua,a={H_timezone_offset:(new Date).getTimezoneOffset(),H_viewport_width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0,H_viewport_height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0,H_screen_width:window.screen.width,H_screen_height:window.screen.height,H_lib_version:t,H_lib:"js",H_lib_method:"code",H_browser:r.name.toLowerCase(),H_browser_version:r.version,H_os:n.name,H_os_version:n.version,H_browser_user_agent:i,H_language:x(navigator.language)?navigator.language.toLowerCase():"取值异常",H_network_type:ct()};return"mobile"===o.type?a.H_model=o.vendor?o.model:"UnknownPhone":a.H_model=o.model,a}function st(){return document.documentElement.scrollTop||document.body.scrollTop||0}function ct(){if(void 0===navigator.connection)return"unknown";var t=navigator.connection;return t.effectiveType?t.effectiveType:t.type?t.type:"取值异常"}var ut=function(){function t(t){this.visibleHandler=function(){},this.hiddenHandler=function(){};var e=t.visible,r=t.hidden;E(e)&&(this.visibleHandler=e),E(r)&&(this.hiddenHandler=r),this.init()}return t.prototype.isSupport=function(){return void 0!==document.hidden},t.prototype.init=function(){var t=this;this.isSupport()?document.addEventListener("visibilitychange",(function(){document.hidden?t.hiddenHandler():t.visibleHandler()})):(window.addEventListener("focus",this.visibleHandler),window.addEventListener("blur",this.hiddenHandler))},t}();function lt(){return"undefined"!=typeof console}function pt(t){return 1===(null==t?void 0:t.nodeType)}function dt(t,e){var r;if("input"===(null===(r=t.tagName)||void 0===r?void 0:r.toLowerCase()))return(["button","submit"].includes(t.type)||e)&&t.value||"";var o="";return t.textContent?o=t.textContent.trim():t.innerText&&(o=t.innerText.trim()),o&&(o=o.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)),o||""}function ft(){var t=W(),e=M(),r=Math.round(st());return j({H_referrer:t,H_referrer_host:t?z(t):"",H_url:window.location.href,H_url_host:z(window.location.href,"url_host取值异常"),H_url_domain:e,H_url_path:window.location.pathname,H_url_hash:window.location.hash,H_title:document.title,H_viewport_position:r})}function ht(t,e){if(!t)return{};var r=document.documentElement.scrollLeft||document.body.scrollLeft||0,o=st(),n=e.getBoundingClientRect(),i=t.pageX||t.clientX+r||t.offsetX+((null==n?void 0:n.left)||0)+r,a=t.pageY||t.clientY+o||t.offsetY+((null==n?void 0:n.top)||0)+o;return{H_page_x:B(i,3),H_page_y:B(a,3)}}var gt=function(){function t(){}return t.getSourceFromReferrer=function(){var t=function(t,e){for(var r=0;r<t.length;r++)if(-1!==e.split("?")[0].indexOf(t[r]))return!0},e="(".concat(y.join("|"),")\\=[^&]+"),r=document.referrer||"",o=window.location.href;if(o){var n=o.match(new RegExp(e));return n&&n[0]?"付费广告流量":t(_,r)?"自然搜索流量":t(w,r)?"社交网站流量":""===r?"直接流量":"引荐流量"}return"获取url异常"},t.getReferSearchEngine=function(t){var e,r,o=z(t);if(!o||"hostname解析异常"===o)return"";var n={baidu:[/^.*\.baidu\.com$/],bing:[/^.*\.bing\.com$/],google:[/^www\.google\.com$/,/^www\.google\.com\.[a-z]{2}$/,/^www\.google\.[a-z]{2}$/],sm:[/^m\.sm\.cn$/],so:[/^.+\.so\.com$/],sogou:[/^.*\.sogou\.com$/],yahoo:[/^.*\.yahoo\.com$/]};for(var i in n){var a=n[i];try{for(var s=(e=void 0,et(a)),c=s.next();!c.done;c=s.next())if(c.value.test(o))return i}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}}return"未知搜索引擎"},t.getKeywordFromReferrer=function(){var t=document.referrer||"";if(0===t.indexOf("http")){var e=this.getReferSearchEngine(t),r=function(t){t=t||"";var e={};return new URLSearchParams(t).forEach((function(t,r){e[r]=t})),e}(q(t).search);if(N(r))return"未取到值";for(var o in b){var n=b[o];if(o===e)if(R(n))for(var i=0;i<n.length;i++){var a=r[n[i]];if(a)return a}else if(r[n])return r[n]}return"未取到值"}return""===t?"未取到值_直接打开":"未取到值_非http的url"},t}();function vt(t){void 0===t&&(t="");var e=function(){var t={};return y.forEach((function(e){var r=G(window.location.href,e);r.length&&(t[e]=r)})),t}(),r={};return Object.keys(e).forEach((function(o){r[t+o]=e[o]})),r}function mt(t,e){void 0===t&&(t=""),void 0===e&&(e=[]);var r={};return e.forEach((function(e){var o=G(window.location.href,e);o&&(r[e]=o,r["".concat(t).concat(e)]=o)})),r}var yt=function(t){this.options=t},_t=function(t){function e(e){var r=t.call(this,e)||this;return r.options=e,r}return tt(e,t),e.prototype.run=function(){var t=this;return new Promise((function(e){var r=t.options,o=r.imgUseCrossOrigin,n=r.url,i=r.data,a=new Image;o&&(a.crossOrigin="anonymous");var s=-1===n.indexOf("?")?"?":"&";a.src="".concat(n).concat(s).concat(i);var c=function(t){a=null,e({type:t})};a.onload=function(){c("success")},a.onerror=function(){c("success")}}))},e}(yt),wt=function(t){function e(e){var r=t.call(this,e)||this;return r.options=e,r}return tt(e,t),e.prototype.run=function(){var t=this;return new Promise((function(e){var r=t.options,o=r.url,n=r.data,i=r.timeout,a=r.credentials,s=r.contentType,c=r.customHeaders,u=void 0===c?{}:c,l=new XMLHttpRequest;l.open("POST",o,!0),l.timeout=i||2e4,l.isMonitor=!0,a&&(l.withCredentials=!0),l.setRequestHeader("Content-Type",s||"application/x-www-form-urlencoded"),k(u)&&!N(u)&&Object.keys(u).forEach((function(t){l.setRequestHeader(t,u[t])})),l.send(n||null),l.ontimeout=function(){l.abort()},l.onreadystatechange=function(){4===l.readyState&&(l.status>=200&&l.status<300||304===l.status?e({data:JSON.parse(l.responseText)||{},type:"success"}):e({type:"fail",msg:"网络异常, 请求失败，状态码=".concat(l.status)}))}}))},e}(yt),bt=function(t){function e(e){var r=t.call(this,e)||this;return r.options=e,r}return tt(e,t),e.prototype.run=function(){var t=this;return new Promise((function(e){var r=t.options,o=r.url,n=r.data;navigator.sendBeacon&&e(navigator.sendBeacon(o,n)?{type:"success"}:{type:"fail",msg:"sendBeacon 请求失败"})}))},e}(yt);var Tt=function(t){return{all:t=t||new Map,on:function(e,r){var o=t.get(e);o?o.push(r):t.set(e,[r])},emit:function(e,r){var o=t.get(e);o&&o.forEach((function(t){t(r)}))},off:function(e,r){var o=t.get(e);if(o)if(r){var n=o.indexOf(r);n>=0&&o.splice(n,1)}else t.set(e,[])}}}();function St(e,r){void 0===r&&(r=t.ConsoleTypes.LOG);var o=console[r]||console.log;"function"==typeof o&&o(e)}var kt=function(){function e(t){this.options=t,this.storeName="hinasdk_crossdata",this.state=this.getDefaultState(),this.isFirstTime=!1,this.isFirstDay=!1,this.isSetFirstVisit=!0}return e.prototype.getDefaultState=function(){return{accountId:null,deviceId:null,anonymousId:null,sessionId:null,firstVisitTime:D(),props:{}}},e.prototype.log=function(e,r){void 0===r&&(r=t.ConsoleTypes.LOG);var o=this.options.showLog;lt()&&o&&St(e,r)},e.prototype.init=function(){var e,r=new rt,o=new nt,n=new ot;r.isSupport()?this.storage=r:(this.log("Cookie storage is not supported, SDK internal cache has been enabled",t.ConsoleTypes.WARN),this.storage=o),n.isSupport()?this.localStorage=n:this.log("localStorage is not supported, SDK internal cache has been enabled",t.ConsoleTypes.WARN),!(e=this.storage.get(this.storeName))&&this.localStorage&&(e=this.localStorage.get(this.storeName)),e&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(e)&&(this.state=L(e)),e?(this.isSetFirstVisit=!1,this.save()):(this.isFirstDay=!0,this.isFirstTime=!0);var i=function(){var t=function(){for(var t=D(),e=0;t===D();)e++;return t.toString(16)+e.toString(16)},e=String(window.screen.height*window.screen.width);e=e&&/\d{5,}/.test(e)?e.toString(16):String(31242*Math.random()).replace(".","").slice(0,8);var r="".concat(t(),"-").concat(Math.random().toString(16).replace(".",""),"-").concat(function(){var t,e,r=navigator.userAgent,o=[],n=0;function i(t,e){var r,n=0;for(r=0;r<e.length;r++)n|=o[r]<<8*r;return t^n}for(t=0;t<r.length;t++)e=r.charCodeAt(t),o.unshift(255&e),o.length>=4&&(n=i(n,o),o=[]);return o.length>0&&(n=i(n,o)),n.toString(16)}(),"-").concat(e,"-").concat(t());return r||(String(Math.random())+String(Math.random())+String(Math.random())).slice(2,15)}();this.getAnonymousId()||this.setAnonymousId(i),this.getDeviceId()||this.setDeviceId(i)},e.prototype.clear=function(){this.state={},this.save()},e.prototype.save=function(){this.storage.setDomain(this.storeName,JSON.stringify(this.state)),this.localStorage&&this.localStorage.set(this.storeName,JSON.stringify(this.state))},e.prototype.set=function(t,e){this.state[t]=e,this.save()},e.prototype.checkSetValue=function(e,r){return!(!C(r=null!=r?r:"")&&!x(r)&&(this.log("".concat(e,": id must be string or number"),t.ConsoleTypes.WARN),1))},e.prototype.setDeviceId=function(t){void 0===t&&(t=""),this.checkSetValue("deviceId",t)&&this.set("deviceId",t)},e.prototype.setAccountId=function(t){void 0===t&&(t=""),this.checkSetValue("accountId",t)&&this.set("accountId",t)},e.prototype.setAnonymousId=function(e){this.state.anonymousId?this.log("Current anonymousId is ".concat(this.getAnonymousId(),", it has been set"),t.ConsoleTypes.WARN):this.checkSetValue("anonymousId",e)&&this.set("anonymousId",e)},e.prototype.setSessionId=function(t){this.set("sessionId",t)},e.prototype.setProps=function(t){var e=U(this.state.props||{},t);for(var r in e)"string"==typeof e[r]&&(e[r]=e[r].slice(0,200));this.set("props",e)},e.prototype.getAnonymousId=function(){return this.state.anonymousId},e.prototype.getDeviceId=function(){return this.state.deviceId},e.prototype.getAccountId=function(){return this.state.accountId},e.prototype.getSessionId=function(){return this.state.sessionId||""},e.prototype.getSessionIdCreateTime=function(){var t=this.getSessionId().split("_")[0],e=Number(t);return Number.isNaN(e)?0:e},e.prototype.getCookie=function(){return this.storage.get(this.storeName)},e}(),Ht=function(){function e(t,e,r,o){void 0===r&&(r="hinasdk_tab"),void 0===o&&(o="hinasdk_data_"),this.options=t,this.platform=e,this.batchKey=r,this.batchDataKey=o,this.init()}return e.prototype.log=function(e,r){void 0===r&&(r=t.ConsoleTypes.LOG);var o=this.options.showLog;lt()&&o&&St(e,r)},e.prototype.init=function(){var e=new ot;e.isSupport()?(this.localStorage=e,this.isSupport=!0):(this.isSupport=!1,this.log("批量发送功能需要使用localstorage存储数据，但是您的浏览器不支持localstorage，所以不能使用该功能",t.ConsoleTypes.WARN)),this.batchInterval()},e.prototype.getBatchConfig=function(){return this.options.batchSend},e.prototype.getStorageList=function(){if(!this.isSupport)return[];var t=[],e=this.localStorage.get(this.batchKey);return e&&(R(t=L(e))||(t=[])),t},e.prototype.batchInterval=function(){var t=this;if(this.isSupport){var e=this.getBatchConfig().sendInterval;setTimeout((function(){t.send().then((function(){t.batchInterval()}))}),e)}},e.prototype.send=function(){var t=this;return new Promise((function(e){var r=t.getStorageList();if(r.length>0&&t.isSupport){for(var o=t.getBatchConfig(),n=o.storageLimit,i=o.dataSendTimeout,a=D(),s=[],c={},u=r.length,l=0;l<u;l++){var p=r[l],d=p.dataKey,f=p.expireTime;f>=a?(c[d]={dataKey:d,expireTime:f},(w=t.localStorage.get(d))&&s.push(L(w))):(t.localStorage.remove(d),r.splice(l,1),u--,l--)}if(t.localStorage.set(t.batchKey,JSON.stringify(r)),(s=s.filter(Boolean)).length>n&&(s=s.slice(0,n)),0===s.length)e();else{var h=t.options,g=h.serverUrl,v=h.customHeaders,m=h.credentials,y=h.globalCallback,_=JSON.stringify(s),w=encodeURIComponent($(_));new wt({url:g,data:"data_list=".concat(w),timeout:i,credentials:m,customHeaders:v}).run().then((function(r){E(y)&&y(g,s,r.type,r.msg||""),"success"===r.type&&t.remove(c),e()}))}}else e()}))},e.prototype.remove=function(t){var e=this;if(this.isSupport){var r=this.getStorageList(),o=Object.keys(t);if(o.forEach((function(t){e.localStorage.remove(t)})),r.length===o.length)this.localStorage.set(this.batchKey,JSON.stringify([]));else{var n=r.filter((function(e){return!t[e.dataKey]}));this.localStorage.set(this.batchKey,JSON.stringify(n))}}},e.prototype.add=function(t){if(this.isSupport){var e=this.getBatchConfig(),r=e.sendInterval,o=e.storageLimit,n=this.batchDataKey+V(),i=this.getStorageList();i.unshift({dataKey:n,expireTime:D()+2*r}),this.localStorage.set(this.batchKey,JSON.stringify(i)),this.localStorage.set(n,JSON.stringify(t)),(i.length>o||"track_signup"===t.type||"H_pageview"===t.event)&&this.send()}},e}(),Rt=function(){function e(t,e){void 0===e&&(e=!0),this.isReady=!1,this.consolePrefix="",this.useInstancing=!0,this.plugins=[],this.options=t,this.useInstancing=e}return e.prototype.log=function(e,r){void 0===r&&(r=t.ConsoleTypes.LOG);var o=this.options.showLog;lt()&&o&&("string"==typeof e&&this.consolePrefix&&(e="".concat(this.consolePrefix,"：").concat(e)),St(e,r))},e.prototype.runPlugins=function(t){for(var e=this,r=function(r){var o=t[r];o.init((function(t){if(o.transform){var r=o.transform(t);r&&e.report(r)}}))},o=0;o<t.length;o++)r(o)},e.prototype.applyPlugins=function(e){var r=this;if(this.isReady){R(e)||(e=[e]);var o=[];e.forEach((function(t){var e=new t(r.options,r);r.plugins.push(e),o.push(e)})),this.runPlugins(o)}else this.log("请先初始化SDK实例",t.ConsoleTypes.WARN)},e}(),Et=function(t,e){return Et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},Et(t,e)};"function"==typeof SuppressedError&&SuppressedError;var xt,Ct,At,Pt,Ot=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}Et(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(r,e),r.prototype.sendReportData=function(e,r,o){var n=this.options,i=n.batchSend,a=n.globalCallback,s=n.serverUrl,c=n.dataSendTimeout,u=n.sendType,l=n.customHeaders,p=n.credentials,d=n.imgUseCrossOrigin;if(u=o||u,s){if(k(e)&&!N(e))if(i)this.batchSender.add(e);else{var f=e;x(e)||(f=I(e));var h=$(f),g={data:"data=".concat(encodeURIComponent(h)),url:s,timeout:c,imgUseCrossOrigin:d,customHeaders:l,credentials:p};(u===t.ReportTypes.BEACON&&navigator.sendBeacon?new bt(g):u===t.ReportTypes.IMAGE&&g.data.length<2048?new _t(g):new wt(g)).run().then((function(t){return E(a)&&a(s,e,t.type,t.msg||""),E(r)&&r(s,e,t.type,t.msg||""),t}))}}else this.log("当前 serverUrl 为空，network 中不会发数据，请配置正确的 serverUrl！",t.ConsoleTypes.WARN)},r}(Rt),Lt=-1,It=function(t){addEventListener("pageshow",(function(e){e.persisted&&(Lt=e.timeStamp,t(e))}),!0)},Nt=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Dt=function(){var t=Nt();return t&&t.activationStart||0},Ut=function(t,e){var r=Nt(),o="navigate";return Lt>=0?o="back-forward-cache":r&&(document.prerendering||Dt()>0?o="prerender":document.wasDiscarded?o="restore":r.type&&(o=r.type.replace(/_/g,"-"))),{name:t,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:o}},jt=function(t,e,r){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var o=new PerformanceObserver((function(t){Promise.resolve().then((function(){e(t.getEntries())}))}));return o.observe(Object.assign({type:t,buffered:!0},r||{})),o}}catch(t){}},qt=function(t,e,r,o){var n,i;return function(a){e.value>=0&&(a||o)&&((i=e.value-(n||0))||void 0===n)&&(n=e.value,e.delta=i,e.rating=function(t,e){return t>e[1]?"poor":t>e[0]?"needs-improvement":"good"}(e.value,r),t(e))}},Bt=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},Ft=function(t){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t()}))},Mt=function(t){var e=!1;return function(){e||(t(),e=!0)}},Wt=-1,zt=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Vt=function(t){"hidden"===document.visibilityState&&Wt>-1&&(Wt="visibilitychange"===t.type?t.timeStamp:0,Kt())},Jt=function(){addEventListener("visibilitychange",Vt,!0),addEventListener("prerenderingchange",Vt,!0)},Kt=function(){removeEventListener("visibilitychange",Vt,!0),removeEventListener("prerenderingchange",Vt,!0)},Gt=function(){return Wt<0&&(Wt=zt(),Jt(),It((function(){setTimeout((function(){Wt=zt(),Jt()}),0)}))),{get firstHiddenTime(){return Wt}}},$t=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},Xt=[1800,3e3],Zt=function(t,e){e=e||{},$t((function(){var r,o=Gt(),n=Ut("FCP"),i=jt("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(i.disconnect(),t.startTime<o.firstHiddenTime&&(n.value=Math.max(t.startTime-Dt(),0),n.entries.push(t),r(!0)))}))}));i&&(r=qt(t,n,Xt,e.reportAllChanges),It((function(o){n=Ut("FCP"),r=qt(t,n,Xt,e.reportAllChanges),Bt((function(){n.value=performance.now()-o.timeStamp,r(!0)}))})))}))},Yt=[.1,.25],Qt=[2500,4e3],te={},ee=function(t,e){e=e||{},$t((function(){var r,o=Gt(),n=Ut("LCP"),i=function(t){e.reportAllChanges||(t=t.slice(-1)),t.forEach((function(t){t.startTime<o.firstHiddenTime&&(n.value=Math.max(t.startTime-Dt(),0),n.entries=[t],r())}))},a=jt("largest-contentful-paint",i);if(a){r=qt(t,n,Qt,e.reportAllChanges);var s=Mt((function(){te[n.id]||(i(a.takeRecords()),a.disconnect(),te[n.id]=!0,r(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,(function(){return function(t){var e=self.requestIdleCallback||self.setTimeout,r=-1;return t=Mt(t),"hidden"===document.visibilityState?t():(r=e(t),Ft(t)),r}(s)}),!0)})),Ft(s),It((function(o){n=Ut("LCP"),r=qt(t,n,Qt,e.reportAllChanges),Bt((function(){n.value=performance.now()-o.timeStamp,te[n.id]=!0,r(!0)}))}))}}))},re=[800,1800],oe=function t(e){document.prerendering?$t((function(){return t(e)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(e)}),!0):setTimeout(e,0)},ne=function(t,e){e=e||{};var r=Ut("TTFB"),o=qt(t,r,re,e.reportAllChanges);oe((function(){var n=Nt();n&&(r.value=Math.max(n.responseStart-Dt(),0),r.entries=[n],o(!0),It((function(){r=Ut("TTFB",0),(o=qt(t,r,re,e.reportAllChanges))(!0)})))}))},ie={passive:!0,capture:!0},ae=new Date,se=function(t,e){xt||(xt=e,Ct=t,At=new Date,le(removeEventListener),ce())},ce=function(){if(Ct>=0&&Ct<At-ae){var t={entryType:"first-input",name:xt.type,target:xt.target,cancelable:xt.cancelable,startTime:xt.timeStamp,processingStart:xt.timeStamp+Ct};Pt.forEach((function(e){e(t)})),Pt=[]}},ue=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,e){var r=function(){se(t,e),n()},o=function(){n()},n=function(){removeEventListener("pointerup",r,ie),removeEventListener("pointercancel",o,ie)};addEventListener("pointerup",r,ie),addEventListener("pointercancel",o,ie)}(e,t):se(e,t)}},le=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(e){return t(e,ue,ie)}))},pe=[100,300],de=function(t,e){e=e||{},$t((function(){var r,o=Gt(),n=Ut("FID"),i=function(t){t.startTime<o.firstHiddenTime&&(n.value=t.processingStart-t.startTime,n.entries.push(t),r(!0))},a=function(t){t.forEach(i)},s=jt("first-input",a);r=qt(t,n,pe,e.reportAllChanges),s&&(Ft(Mt((function(){a(s.takeRecords()),s.disconnect()}))),It((function(){var o;n=Ut("FID"),r=qt(t,n,pe,e.reportAllChanges),Pt=[],Ct=-1,xt=null,le(addEventListener),o=i,Pt.push(o),ce()})))}))},fe=function(t,e){return fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},fe(t,e)};function he(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}fe(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var ge=function(){return ge=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},ge.apply(this,arguments)};function ve(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,n,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return a}function me(t,e,r){if(2===arguments.length)for(var o,n=0,i=e.length;n<i;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;var ye=function(e){function r(t,r){var o=e.call(this,t,r)||this;return o.options=t,o.context=r,o.name="JsErrorPlugin",o.isReady=!1,o}return he(r,e),r.prototype.init=function(e){this.isReady||(this.isReady=!0,window.onerror=function(r,o,n,i,a){if("ResizeObserver loop limit exceeded"!==r.toString()){var s=P(a);e({H_js_error_id:K(s),H_error_category:t.ErrorTypes.JS_ERROR,H_error_type:a.name||t.ErrorTypes.JS_ERROR,H_error_message:a.message,H_error_stack:JSON.stringify({details:Y(a),errorStack:s})})}})},r.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},r}(f),_e=function(e){function r(t,r){var o=e.call(this,t,r)||this;return o.options=t,o.context=r,o.name="DomErrorPlugin",o.isReady=!1,o}return he(r,e),r.prototype.init=function(e){this.isReady||(this.isReady=!0,window.addEventListener("error",(function(r){if(r.target!==window){var o=r.target,n=o.src||o.href,i=function(t){var e=t.tagName.toLowerCase(),r=t.getAttributeNames(),o="";return r.forEach((function(e){o+=" ".concat(e,"='").concat(t.getAttribute(e),"'")})),"<".concat(e).concat(o,">")}(o);e({H_js_error_id:K(i),H_error_category:t.ErrorTypes.RESOURCE_ERROR,H_error_type:t.ErrorTypes.RESOURCE_ERROR,H_error_message:i,H_source_element:i,H_source_src:n})}}),!0))},r.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},r}(f);var we=function(e){function r(t,r){var o=e.call(this,t,r)||this;return o.options=t,o.context=r,o.name="PerformancePlugin",o.isReady=!1,o}return he(r,e),r.prototype.init=function(e){if(!this.isReady){this.isReady=!0;var r=this.options.performanceOff;r.includes(t.PerformanceFeat.VITALS)||Promise.all([new Promise((function(t){ee((function(e){t(e.value)}))})),new Promise((function(t){de((function(e){t(e.value)}))})),new Promise((function(t){!function(t,e){e=e||{},Zt(Mt((function(){var r,o=Ut("CLS",0),n=0,i=[],a=function(t){t.forEach((function(t){if(!t.hadRecentInput){var e=i[0],r=i[i.length-1];n&&t.startTime-r.startTime<1e3&&t.startTime-e.startTime<5e3?(n+=t.value,i.push(t)):(n=t.value,i=[t])}})),n>o.value&&(o.value=n,o.entries=i,r())},s=jt("layout-shift",a);s&&(r=qt(t,o,Yt,e.reportAllChanges),Ft((function(){a(s.takeRecords()),r(!0)})),It((function(){n=0,o=Ut("CLS",0),r=qt(t,o,Yt,e.reportAllChanges),Bt((function(){return r()}))})),setTimeout(r,0))})))}((function(e){t(e.value)}),{reportAllChanges:!0})})),new Promise((function(t){ne((function(e){t(e.value)}))})),new Promise((function(t){Zt((function(e){t(e.value)}))})),new Promise((function(t){"PerformanceObserver"in window?new PerformanceObserver((function(e){var r,o,n=e.getEntries();try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],o=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),a=i.next();!a.done;a=i.next()){var s=a.value;"first-paint"===s.name&&t(s.startTime)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}})).observe({entryTypes:["paint"]}):t(0)}))]).then((function(t){var e=ve(t,6),r=e[0],o=e[1],n=e[2],i=e[3],a=e[4];return{H_first_paint_time:B(e[5]),H_first_contentful_paint_time:B(a),H_largest_contentful_paint_time:B(r),H_time_to_first_byte:B(i),H_first_input_delay:B(o),H_cumulative_layout_shift:B(n)}})).then((function(r){e(ge({event:"H_performance_page",H_category:t.PerformanceFeat.VITALS},r))})),r.includes(t.PerformanceFeat.LONG_TASK)||function(t){if("PerformanceObserver"in window){var e=new PerformanceObserver((function(e){var r=e.getEntries(),o=0,n=[];r.forEach((function(t){var e=t.duration,r=t.name,i=t.startTime;o+=e,n.push({duration:B(e),startTime:B(i),name:r})})),t({H_long_task_time:B(o),H_long_task:r.length,H_long_task_list:n})}));e.observe({entryTypes:["longtask"]})}}((function(r){e(ge({event:"H_performance_page",H_category:t.PerformanceFeat.LONG_TASK,H_url:window.location.href},r))})),window.addEventListener("load",(function(){r.includes(t.PerformanceFeat.BASIC)||e(ge({event:"H_performance_loading",H_category:t.PerformanceFeat.BASIC},function(){if(void 0!==window.performance&&"function"==typeof window.performance.getEntriesByType){var t=performance.getEntriesByType("navigation")[0],e=t.startTime,r=t.redirectStart,o=t.redirectEnd,n=t.fetchStart,i=t.domainLookupStart,a=t.domainLookupEnd,s=t.connectStart,c=t.secureConnectionStart,u=t.connectEnd,l=t.requestStart,p=t.responseStart,d=t.responseEnd,f=t.domInteractive,h=t.domContentLoadedEventEnd,g=t.loadEventStart,v=t.loadEventEnd,m=t.redirectCount,y=t.duration,_=t.unloadEventEnd,w=t.unloadEventStart;return{H_first_byte_time:B(p-e),H_unload_time:B(_-w),H_redirect_time:B(o-r),H_redirect_count:m,H_cache_check_time:B(i-n),H_dns_time:B(a-i),H_tcp_time:B(u-s),H_ssl_time:B(u-c),H_first_byte_response_time:B(p-r),H_dom_ready_time:B(h-n),H_request_time:B(p-l),H_content_transfer_time:B(d-p),H_dom_parsing_time:B(f-d),H_page_load_time:B(v-e),H_resource_load_time:B(g-h),H_resource_duration:y,H_load_event_time:B(v-g)}}var b=performance.timing,T=b.navigationStart,S=b.responseStart,k=b.unloadEventEnd,H=b.unloadEventStart,R=b.requestStart,E=b.responseEnd,x=b.redirectStart,C=b.redirectEnd,A=b.domainLookupStart,P=b.fetchStart,O=b.domainLookupEnd,L=b.connectStart,I=b.connectEnd,N=b.secureConnectionStart,D=b.domContentLoadedEventEnd,U=b.domInteractive,j=b.loadEventStart,q=b.loadEventEnd;return{H_first_byte_time:B(S-T),H_unload_time:B(k-H),H_redirect_time:B(C-x),H_cache_check_time:B(A-P),H_dns_time:B(O-A),H_tcp_time:B(I-L),H_ssl_time:B(I-N),H_first_byte_response_time:B(S-x),H_dom_ready_time:B(D-P),H_request_time:B(S-R),H_content_transfer_time:B(E-S),H_dom_parsing_time:B(U-E),H_page_load_time:B(q-T),H_resource_load_time:B(j-D),H_load_event_time:B(q-j)}}()))}))}},r.prototype.transform=function(t){return this.context.getReportData(t.event,t)},r}(f),be=function(e){function r(t,r){var o=e.call(this,t,r)||this;return o.options=t,o.context=r,o.name="FetchPlugin",o.isReady=!1,o}return he(r,e),r.prototype.init=function(e){if(window.fetch&&!this.isReady){this.isReady=!0;var r=this;X(window,"fetch",(function(o){return function(n,i){void 0===i&&(i={});var a=D(),s=i||{},c=s.headers,u=s.signal,l=s.method;return o(n,i).then((function(o){if(!o.ok){var s=ge(ge({},r.context.getRequestHeaders()),c||{}),u=D();o.clone().text().then((function(r){e({H_js_error_id:K("url=".concat(n,"&method=").concat(l)),H_error_category:t.ErrorTypes.FETCH_ERROR,H_error_type:t.ErrorTypes.FETCH_ERROR,H_error_message:n,H_request_url:n,H_request_headers:I(s),H_request_method:i.method.toLowerCase(),H_request_params:x(i.body)?i.body:"",H_response_status:o.status,H_response_status_text:o.statusText,H_request_time:a,H_response_time:u,H_response_data:r})}))}return o})).catch((function(o){if(u&&u.aborted)throw o;var s="";s=(s=o instanceof Error?null==o?void 0:o.message:I(o))||"网络错误，或者无法连接";var p=ge(ge({},r.context.getRequestHeaders()),c||{});throw e({H_js_error_id:K("url=".concat(n,"&method=").concat(l)),H_error_category:t.ErrorTypes.FETCH_ERROR,H_error_type:t.ErrorTypes.FETCH_ERROR,H_error_message:n,H_request_url:n,H_request_headers:I(p),H_request_method:i.method.toLowerCase(),H_request_params:x(i.body)?i.body:"",H_response_status:0,H_response_status_text:s,H_request_time:a,H_response_time:D(),H_response_data:s}),o}))}}))}},r.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},r}(f),Te=function(e){function r(t,r){var o=e.call(this,t,r)||this;return o.options=t,o.context=r,o.name="XhrPlugin",o.isReady=!1,o}return he(r,e),r.prototype.init=function(e){if(!this.isReady){this.isReady=!0;var r=this,o=XMLHttpRequest.prototype.open,n=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.H_request_method=t[0],this.H_request_url=t[1],this.H_request_time=D(),o.apply(this,t)},XMLHttpRequest.prototype.send=function(o){var i=this;this.addEventListener("abort",(function(){i.H_response_status_text="abort"})),this.addEventListener("error",(function(){i.H_response_status_text="error"})),this.addEventListener("timeout",(function(){i.H_response_status_text="timeout"})),this.addEventListener("loadend",(function(){var n=i,a=n.status,s=n.statusText,c=n.responseType,u=n.responseText,l=n.response,p=n.H_request_method,d=n.H_request_url,f=n.H_request_time,h=n.H_response_status_text;if(!(a>=200&&a<300||"abort"===h||i.isMonitor)){var g=c&&"text"!==c?l:u,v=h||s;"error"===h?v="网络错误，或者无法连接":"timeout"===h&&(v="请求超时"),e({H_js_error_id:K("url=".concat(d,"&method=").concat(p)),H_error_category:t.ErrorTypes.AJAX_ERROR,H_error_type:t.ErrorTypes.AJAX_ERROR,H_error_message:d,H_request_url:d,H_request_headers:I(r.context.getRequestHeaders()),H_request_method:p,H_request_params:k(o)?I(o):x(o)?o:"",H_response_status:a,H_response_status_text:v,H_request_time:f,H_response_time:D(),H_response_data:g&&I(g)})}delete i.H_request_method,delete i.H_request_url,delete i.H_request_time,delete i.H_response_status_text}));try{n.call(this,o)}catch(t){}}}},r.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},r}(f),Se=function(e){function r(t,r){var o=e.call(this,t,r)||this;return o.options=t,o.context=r,o.name="PromiseErrorPlugin",o.isReady=!1,o}return he(r,e),r.prototype.init=function(e){this.isReady||(this.isReady=!0,window.addEventListener("unhandledrejection",(function(r){var o=r.reason,n=t.ErrorTypes.PROMISE_ERROR,i="",a="";x(o)?i=o:void 0===o?i="undefined":(null==o?void 0:o.stack)?(n=o.name,i=o.message,a=JSON.stringify({errorStack:P(o),details:Y(o)})):i=I(o),["axioserror","cancelederror","aborterror"].includes(n.toLowerCase())||e({H_js_error_id:K("message=".concat(i,"&stack=").concat(a)),H_error_category:t.ErrorTypes.PROMISE_ERROR,H_error_type:n||t.ErrorTypes.PROMISE_ERROR,H_error_message:i,H_error_stack:a})})))},r.prototype.transform=function(t){return this.context.getReportData("H_performance_js",t)},r}(f),ke=function(e){function r(t,r){void 0===r&&(r=!0);var o=e.call(this,t,r)||this;return o.consolePrefix="性能监控SDK",o.presetProps={},o.requestHeaders={},o.useInstancing&&o.init(t),o}return he(r,e),r.prototype.init=function(e){var r=this;if(this.isReady)this.log("Monitor has been initialized",t.ConsoleTypes.ERROR);else{var o={serverUrl:"",name:"",showLog:!1,errorCapture:!0,performance:!0,openPromiseCapture:!1,sendType:t.ReportTypes.BEACON,customHeaders:{},credentials:!1,dataSendTimeout:3e3,batchSend:!1,imgUseCrossOrigin:!1,performanceOff:[],plugins:[]};this.options=ge(ge({},o),e),this.initState(),this.normalizeConfig(),this.initPlugins(),this.isReady=!0,window.addEventListener("beforeunload",(function(){r.store.setSessionId("")}))}},r.prototype.initState=function(){this.store=new kt(this.options),this.store.init()},r.prototype.normalizeConfig=function(){var e=this.options,r=e.serverUrl,o=e.batchSend;""===(r=(r=r||"").trim())&&this.log("当前 serverUrl 为空，network 中不会发数据，请配置正确的 serverUrl！",t.ConsoleTypes.WARN),(!0===o||k(o)&&!N(o))&&(this.options.batchSend=ge({dataSendTimeout:6e3,sendInterval:6e3,storageLimit:200},o),this.batchSender=new Ht(this.options,t.PlatformTypes.WEB,"hinaepm_tab","hinaepm_data_"))},r.prototype.initPlugins=function(){var t=this,e=this.options,r=e.errorCapture,o=e.performance,n=e.openPromiseCapture,i=e.plugins,a=void 0===i?[]:i;a=a||[];var s=[],c=[];if(r&&(s=[new ye(this.options,this),new _e(this.options,this),new be(this.options,this),new Te(this.options,this)],!0===n)){var u=new Se(this.options,this);s.push(u)}o&&(c=[new we(this.options,this)]),this.plugins=me(me([],ve(s),!1),ve(c),!1),a.forEach((function(e){var r=new e(t.options,t);t.plugins.push(r)})),this.runPlugins(this.plugins)},r.prototype.report=function(t,e,r){var o=this.options.beforeSend,n=t;E(o)&&(n=o(n)),this.log(n),this.sendReportData(n,e,r)},r.prototype.getReportData=function(t,e){var r=this.options.sourcemapVersion;r||(r="1.0.0");var o=this.store.getAnonymousId(),n=this.store.getAccountId(),i=this.store.getSessionId(),a=D(),s=ge(ge(ge({},this.getReportProperties()),{H_js_sourcemap_version:r}),e||{}),c={anonymous_id:o,type:"track",event:t,time:a,_track_id:J(),properties:s};return n&&(c.account_id=n),i?D()-this.store.getSessionIdCreateTime()>18e5&&(i=V(),this.store.setSessionId(i)):(i=V(),this.store.setSessionId(i)),s.H_session_id=i,c.send_time=D(),c},r.prototype.getReportProperties=function(){return ge(ge(ge({},at("4.0.0")),this.getCommonProperties()),{H_url:window.location.href,H_title:document.title})},r.prototype.captureException=function(e,r,o){e instanceof Error||(e=new Error(e)),k(r)||(r={});var n=P(e),i=this.getReportData("H_performance_js",{H_js_error_id:K(n),H_error_category:t.ErrorTypes.CAPTURE_EXCEPTION,H_error_type:t.ErrorTypes.CAPTURE_EXCEPTION,H_error_message:e.message,H_error_stack:JSON.stringify({details:Y(e),errorStack:n}),H_capture_extra:JSON.stringify(r)});this.report(i,o)},r.prototype.captureEvent=function(e,r){if(k(e)){var o=e.message,n=e.extra;k(n)||(n={});var i=this.getReportData("H_performance_js",{H_js_error_id:K(o||""),H_error_category:t.ErrorTypes.CAPTURE_EVENT,H_error_type:t.ErrorTypes.CAPTURE_EVENT,H_error_message:o||"",H_capture_message:o||"",H_capture_extra:JSON.stringify(n)});this.report(i,r)}else this.log("captureEvent event参数错误：event必须是一个对象")},r.prototype.setCommonProperties=function(t){k(t)&&!N(t)&&(this.presetProps=U(this.presetProps,t))},r.prototype.getCommonProperties=function(){return this.presetProps},r.prototype.clearCommonProperties=function(t){var e=this;void 0===t&&(t=!0),!0===t?this.presetProps={}:R(t)&&t.forEach((function(t){t in e.presetProps&&delete e.presetProps[t]}))},r.prototype.setRequestHeaders=function(t){void 0===t&&(t={}),k(t)&&!N(t)&&(this.requestHeaders=U(this.requestHeaders,t))},r.prototype.getRequestHeaders=function(){return this.requestHeaders},r.prototype.clearRequestHeaders=function(t){void 0===t&&(t=!0),!0===t?this.requestHeaders={}:R(t)&&t.forEach((function(t){}))},r}(Ot);new ke({},!1);var He=["mark","/mark","strong","b","em","i","u","abbr","ins","del","s","sup"],Re=["a","input","button","textarea"],Ee=["abtestExperimentId","paramName","valueType","defaultValue","callback","timeoutMilliseconds","customProperties","customIds"],xe=function(e){function o(t,r){var o=e.call(this,t,r)||this;return o.options=t,o.context=r,o.name="ClickTrackPlugin",o.isReady=!1,o.isTrackList={a:!0,button:!0},o}return r(o,e),o.prototype.init=function(e){var r=this,o=this.options.autoTrackConfig,n=o.clickAutoTrack,i=o.isCollectUrl,a=o.isCollectElement,s=o.addCustomProperty;!0===n&&(this.isReady?this.context.log("ClickTrack plugin：插件已经运行，无需重复执行",t.ConsoleTypes.WARN):(this.isReady=!0,document.addEventListener("click",(function(t){if(i()){var o=t||window.event;if(o){var n=o.target||o.srcElement,c=r.getTargetElement(n);if(c){if(E(a)&&!a(c))return!1;var u=r.getClickElementInfo(c),l=ht(o,c),p=l.H_page_x,d=l.H_page_y;if(u.H_page_x=p,u.H_page_y=d,E(s)){var f=s(c);k(f)&&(u=U(u,f))}e(u)}}}}),!0)))},o.prototype.transform=function(t){return this.context.getReportData("track","H_WebClick",t)},o.prototype.hasAttribute=function(t,e){var r;return t.hasAttribute?t.hasAttribute(e):t.attributes?!!(null===(r=t.attributes[e])||void 0===r?void 0:r.value):void 0},o.prototype.hasAttributes=function(t,e){if(R(e))for(var r=0;r<e.length;r++)if(this.hasAttribute(t,e[r]))return!0;return!1},o.prototype.hasElement=function(t){var e,r,o,n=function(t){var e=[t];try{if(!pt(t))return e;if(null===t||null===t.parentElement)return e;for(;null!==t.parentElement;)t=t.parentElement,e.push(t);return e}catch(t){}return e}(t),i=this.options.autoTrackConfig.trackAttr||[];if(R(n)&&n.length>0)try{for(var a=l(n),s=a.next();!s.done;s=a.next()){var c=s.value,u=c.tagName&&(null===(o=c.tagName)||void 0===o?void 0:o.toLowerCase());if(pt(c)&&(this.isTrackList[u]||this.hasAttributes(c,i)))return c}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}},o.prototype.getDivMaxLevel=function(){var t;return(null===(t=this.options.autoTrackConfig.collectTags.div)||void 0===t?void 0:t.maxLevel)||1},o.prototype.isStyleTag=function(t){var e,r=(null===(e=this.options.autoTrackConfig.collectTags.div)||void 0===e?void 0:e.ignoreTags)||[];return null==r?void 0:r.includes(t)},o.prototype.getCollectableParent=function(e){var r;try{var o=e.parentNode,n=o?null===(r=o.tagName)||void 0===r?void 0:r.toLowerCase():"";if("body"===n)return!1;var i=this.getDivMaxLevel();if("div"===n&&(i>1||this.isCollectableDiv(o)))return o;if(o&&this.isStyleTag(n))return this.getCollectableParent(o)}catch(e){this.context.log(e,t.ConsoleTypes.ERROR)}return!1},o.prototype.isCollectableDiv=function(e){var r;try{var o=e.children||[];if(0===o.length)return!0;for(var n=0;n<o.length;n++){var i=o[n];if(pt(i)){var a=null===(r=i.tagName)||void 0===r?void 0:r.toLowerCase(),s=this.getDivMaxLevel();if(!("div"===a&&s>1||this.isStyleTag(a)))return!1;if(!this.isCollectableDiv(i))return!1}}return!0}catch(e){this.context.log(e,t.ConsoleTypes.ERROR)}return!1},o.prototype.isDivLevelValid=function(t){for(var e=this.getDivMaxLevel(),r=t.getElementsByTagName("div"),o=r.length-1;o>=0;o--)if(this.getDivLevels(r[o],t)>e)return!1;return!0},o.prototype.getElementPath=function(t,e,r){for(var o,n,i=[];pt(t)&&t.parentNode;){if(t.id&&!e&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(t.id)){var a=t.tagName||"";i.unshift("".concat(a.toLowerCase(),"#").concat(t.id));break}if(r&&t===r){i.unshift(null===(o=t.tagName)||void 0===o?void 0:o.toLowerCase());break}if(t===document.body){i.unshift("body");break}i.unshift(null===(n=t.tagName)||void 0===n?void 0:n.toLowerCase()),t=t.parentNode}return i.join(" > ")},o.prototype.getDivLevels=function(t,e){var r=this.getElementPath(t,!0,e).split(" > "),o=0;return r.forEach((function(t){"div"===t&&o++})),o},o.prototype.getTargetElement=function(t){var e;if(!pt(t))return null;var r=null===(e=t.tagName)||void 0===e?void 0:e.toLowerCase();if(!x(r))return null;if(["body","html"].includes(r))return null;if(this.context.trackTags.includes(r)&&"div"!==r)return t;if("div"===r&&this.options.autoTrackConfig.collectTags.div&&(this.isDivLevelValid(t)&&(this.getDivMaxLevel()>1||this.isCollectableDiv(t))))return t;if(this.options.autoTrackConfig.collectTags.div&&this.isStyleTag(r)){var o=this.getCollectableParent(t);if(o&&this.isDivLevelValid(o))return o}return this.hasElement(t)||null},o.prototype.getClickElementInfo=function(t){var e=this.options.autoTrackConfig.isCollectInput,r=!1;E(e)&&(r=e(t));var o=this.getDomSelector(t),n=function(t,e){var r;return pt(t)?j({H_element_type:null===(r=t.tagName)||void 0===r?void 0:r.toLowerCase(),H_element_name:t.getAttribute("name"),H_element_id:t.getAttribute("id"),H_element_target_url:t.getAttribute("href"),H_element_class_name:t.getAttribute("className"),H_element_content:dt(t,e)}):{}}(t,r);return n.H_element_selector=o,n.H_element_path=this.getElementPath(t,!1),n},o.prototype.getDomSelector=function(t){for(var e,r=[];t;){if("body"===(null===(e=t.tagName)||void 0===e?void 0:e.toLowerCase())||!pt(t)){r.unshift("body");break}if(r.unshift(this.getSelector(t)),(null==t?void 0:t.getAttribute("id"))&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(t.getAttribute("id")))break;t=t.parentNode}return r.join(" > ")},o.prototype.getSelector=function(t){var e,r,o=null===(e=t.tagName)||void 0===e?void 0:e.toLowerCase(),n=-1;9!==(null===(r=t.parentNode)||void 0===r?void 0:r.nodeType)&&(n=this.getDomIndex(t));var i=t.getAttribute("id");return i&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(i)?"#".concat(i):o+(n>-1?":nth-of-type(".concat(n+1,")"):"")},o.prototype.getDomIndex=function(t){var e,r;if(t.parentNode)for(var o=0,n=null===(e=t.tagName)||void 0===e?void 0:e.toLowerCase(),i=t.parentNode.children,a=0;a<i.length;a++){var s=i[a];if((null===(r=s.tagName)||void 0===r?void 0:r.toLowerCase())===n){if(s===t)return o;o++}}return-1},o}(f),Ce=function(e){function o(t,r){var o=e.call(this,t,r)||this;return o.options=t,o.context=r,o.name="StayTrackPlugin",o.isReady=!1,o.timer=null,o.previousTime=D(),o.previousOffsetTop=0,o}return r(o,e),o.prototype.init=function(e){var r=this,o=this.options,n=o.autoTrackConfig,i=o.stayAutoTrackConfig;if(!0===n.stayAutoTrack)if(this.isReady)this.context.log("StayTrack plugin：插件已经运行，无需重复执行",t.ConsoleTypes.WARN);else{this.isReady=!0;var a=i.isCollectUrl;E(a)||(a=function(){return!0}),this.timer&&(clearTimeout(this.timer),this.timer=null),this.previousTime=D(),window.addEventListener("load",(function(){r.previousOffsetTop=st()})),window.addEventListener("scroll",(function(){a()&&(r.timer||(r.timer=setTimeout((function(){r.run(e),clearTimeout(r.timer),r.timer=null}),1e3)))})),window.addEventListener("unload",(function(){a()&&r.run(e,!0)}))}},o.prototype.transform=function(t){return this.context.getReportData("track","H_WebStay",t)},o.prototype.run=function(t,e){void 0===e&&(e=!1);var r=this.options.autoTrackConfig,o=r.stayDelayTime,n=r.maxStayPageDuration,i=st(),a=D(),s=a-this.previousTime;(e||s>o&&i!==this.previousOffsetTop)&&t({H_viewport_position:this.previousOffsetTop,event_duration:Math.min(s/1e3,n)});this.previousTime=a,this.previousOffsetTop=i},o}(f),Ae=function(e){function o(t,r){var o=e.call(this,t,r)||this;return o.options=t,o.context=r,o.name="PageLeave",o.isReady=!1,o.pageId=J(),o.storageName="hinasdk_pageleave_",o.heartbeatIntervalTime=5e3,o.maxDuration=432e3,o.heartbeatIntervalTimer=null,o.startTime=D(),o.url=window.location.href,o.pageShowStatus=!0,o}return r(o,e),o.prototype.init=function(){if(this.options.autoTrackConfig.pageLeaveAutoTrack)if(this.context.store.localStorage)if(this.isReady)this.context.log("PageLeave plugin：插件已经运行，无需重复执行",t.ConsoleTypes.WARN);else{this.isReady=!0;var e=this.normalizePageLeaveAutoTrack(),r=e.heartbeat_interval_time,o=e.max_duration;r&&r>0&&(this.heartbeatIntervalTime=1e3*r),o&&o>0&&(this.maxDuration=Number(o)),this.startTime=D(),this.addPageLeaveEventListener(),document.hidden?this.pageShowStatus=!1:this.startHeartBeatInterval()}else this.context.log("PageLeave plugin需要使用localstorage存储数据，但是您的浏览器不支持localstorage，所以不能使用该功能",t.ConsoleTypes.WARN)},o.prototype.transform=function(){},o.prototype.normalizePageLeaveAutoTrack=function(){var t=this.options.autoTrackConfig.pageLeaveAutoTrack;return k(t)?t:{}},o.prototype.addPageLeaveEventListener=function(){this.addPageStartListener(),this.addPageSwitchListener(),this.addSinglePageListener(),this.addPageEndListener()},o.prototype.addPageStartListener=function(){var t=this;"onpageshow"in window&&window.addEventListener("pageshow",(function(){t.pageStartHandler()}))},o.prototype.addPageSwitchListener=function(){var t=this;new ut({visible:function(){t.pageStartHandler(),t.startHeartBeatInterval()},hidden:function(){t.url=window.location.href,t.pageEndHandler(),t.stopHeartBeatInterval()}})},o.prototype.addSinglePageListener=function(){var t=this;Tt.on("urlChange",(function(e){var r=e.fromHref;r!==e.toHref&&(t.url=r,t.pageEndHandler(),t.stopHeartBeatInterval(),t.pageStartHandler(),t.startHeartBeatInterval())}))},o.prototype.addPageEndListener=function(){var t=this,e=["pagehide","beforeunload","unload"];e.forEach((function(r){"on".concat(e)in window&&window.addEventListener(r,(function(){t.pageEndHandler(),t.stopHeartBeatInterval()}))}))},o.prototype.pageStartHandler=function(){this.startTime=D(),this.pageShowStatus=!document.hidden,this.url=window.location.href},o.prototype.pageEndHandler=function(){if(this.pageShowStatus){if(this.pageShowStatus=!1,this.isCollectUrl()){var t=this.getPageLeaveProperties(),e=this.context.getReportData("track","H_WebPageLeave",t);this.context.report(e)}this.delHeartBeatData()}},o.prototype.startHeartBeatInterval=function(){var t=this;this.heartbeatIntervalTimer&&this.stopHeartBeatInterval(),this.isCollectUrl()&&(this.heartbeatIntervalTimer=setInterval((function(){t.saveHeartBeatData()}),this.heartbeatIntervalTime),this.saveHeartBeatData("first_heartbeat")),this.reissueHeartBeatData()},o.prototype.reissueHeartBeatData=function(){for(var t=this.context.store.localStorage,e=t.length(),r=0;r<e;r++){var o=t.key(r);if(o&&o!==this.storageName+this.pageId&&o.includes(this.storageName)){var n=L(t.get(o));k(n)&&D()-n.time>n.heartbeat_interval_time+5e3&&(delete n.heartbeat_interval_time,this.context.report(n)),this.delHeartBeatData(o)}}},o.prototype.stopHeartBeatInterval=function(){this.heartbeatIntervalTimer&&(clearInterval(this.heartbeatIntervalTimer),this.heartbeatIntervalTimer=null)},o.prototype.delHeartBeatData=function(t){this.context.store.localStorage.remove(t||this.storageName+this.pageId)},o.prototype.isCollectUrl=function(){var t=this.normalizePageLeaveAutoTrack().isCollectUrl;return!E(t)||t(this.url)},o.prototype.saveHeartBeatData=function(t){var e=this.getPageLeaveProperties();e.H_time=D(),"first_heartbeat"===t&&(e.event_duration=3);var r=this.context.getReportData("track","H_WebPageLeave",e);r.heartbeat_interval_time=this.heartbeatIntervalTime,this.context.store.localStorage.set(this.storageName+this.pageId,JSON.stringify(r))},o.prototype.getPageLeaveProperties=function(){var t=(D()-this.startTime)/1e3;t=t<=0||t>this.maxDuration?0:B(t,3);var e=q(this.url),r=e.pathname,o=e.hash,n={H_url:this.url,H_url_path:r,H_url_hash:o};t&&(n.event_duration=t);var i=this.normalizePageLeaveAutoTrack().custom_props;return k(i)&&(n=u(u({},n),i||{})),n},o}(f),Pe=function(e){function o(t,r){var o=e.call(this,t,r)||this;return o.options=t,o.context=r,o.name="SiteLinker",o.isReady=!1,o.linker=[],o}return r(o,e),o.prototype.init=function(){if(this.options.siteLinkerConfig){var e=this.getLinkerConfig().linker;R(e)&&e.length>0?this.isReady?this.context.log("SiteLinker plugin：插件已经运行，无需重复执行",t.ConsoleTypes.WARN):(this.isReady=!0,this.resolveOption(),this.setRefferId(),this.addClickListen()):this.context.log("siteLinker plugin: 请配置正确的linker参数",t.ConsoleTypes.WARN)}},o.prototype.transform=function(){},o.prototype.getLinkerConfig=function(){var t=this.options.siteLinkerConfig||{},e=t.linker;return{linker:(void 0===e?[]:e)||[],re_login:t.re_login}},o.prototype.resolveOption=function(){for(var e=this.getLinkerConfig().linker,r=e.length,o=[],n=0;n<r;n++){var i=e[n],a=i.part_url,s=i.after_hash;/[A-Za-z0-9]+\./.test(a)&&A(s)?o.push({part_url:a,after_hash:s}):this.context.log("The configuration of linker ".concat(n+1," is not supported.Please check format"),t.ConsoleTypes.WARN)}this.linker=o},o.prototype.setRefferId=function(){var t=this.getLinkerConfig().re_login,e=this.getUrlId(),r=e.startsWith("a");if(""!==(e=e.substring(1))){var o=this.context.store.getAnonymousId(),n=this.context.store.getAccountId();if(r){if(e!==o&&(this.context.store.state.anonymousId=e,this.context.store.save()),n){var i=this.context.getReportData("track_signup","H_SignUp",{});this.context.report(i)}}else(!n||t&&n!==e)&&this.context.setUserUId(e)}},o.prototype.getUrlId=function(){var t=window.location.href.match(/_hnsdk=([au][^\?\#\&\=]+)/);return R(t)&&t[1]?function(t){var e=t;try{e=decodeURIComponent(t)}catch(t){}return e}(t[1]):""},o.prototype.getPartUrl=function(t){for(var e=this.linker.length,r=0;r<e;r++)if(t.includes(this.linker[r].part_url))return!0;return!1},o.prototype.getPartHash=function(t){for(var e=this.linker.length,r=0;r<e;r++)if(t.includes(this.linker[r].part_url))return this.linker[r].after_hash;return!1},o.prototype.getCurrentId=function(){var t=this.context.store.getAccountId(),e=this.context.store.getAnonymousId();return function(t){var e=t;try{e=encodeURIComponent(t)}catch(t){}return e}(t?"u".concat(t):"a".concat(e))},o.prototype.rewriteUrl=function(t,e){var r=/([^?#]+)(\?[^#]*)?(#.*)?/.exec(t),o="";if(r){var n=r[1]||"",i=r[2]||"",a=r[3]||"",s="_hnsdk=".concat(this.getCurrentId()),c=function(t){var e=t.split("&"),r=[];return e.forEach((function(t){t.includes("_hnsdk")?r.push(s):r.push(t)})),r.join("&")};if(this.getPartHash(t)){var u=a.includes("?"),l=a.indexOf("_hnsdk");o=u?l>=0?"".concat(n).concat(i,"#").concat(a.substring(1,l)).concat(c(a.substring(l,a.length))):"".concat(n).concat(i,"#").concat(a.substring(1),"&").concat(s):"".concat(n).concat(i,"#").concat(a.substring(1),"?").concat(s)}else{o=(u=/^\?(\w)+/.test(i))?i.includes("_hnsdk")?"".concat(n,"?").concat(c(i.substring(1))).concat(a):"".concat(n).concat(i,"&").concat(s).concat(a):"".concat(n,"?").concat(s).concat(a)}return e&&(e.href=o),o}},o.prototype.addClickListen=function(){var t=this,e=function(e){var r,o,n=e.target;if(n){var i=null===(r=n.tagName)||void 0===r?void 0:r.toLowerCase(),a=n.parentNode,s=null===(o=null==a?void 0:a.tagName)||void 0===o?void 0:o.toLowerCase();if("a"===i&&n.href||"a"===s&&a.href){var c=void 0,u=void 0;"a"===i&&n.href?(c=n.href,u=n):(c=a.href,u=a);var l=q(c).protocol;"http:"!==l&&"https:"!==l||t.getPartUrl(c)&&t.rewriteUrl(c,u)}}};"PointerEvent"in window?document.addEventListener("pointerdown",e):document.addEventListener("mousedown",e)},o}(f),Oe=function(e){function o(t,r){var o=e.call(this,t,r)||this;return o.options=t,o.context=r,o.name="HistoryPlugin",o.isReady=!1,o.lastHref=window.location.href,o.lastPath=window.location.pathname,o}return r(o,e),o.prototype.init=function(){if(window&&window.history.pushState&&window.history.replaceState)if(this.isReady)this.context.log("History plugin：插件已经运行，无需重复执行",t.ConsoleTypes.WARN);else{this.isReady=!0;var e=this,r=window.onpopstate,o=function(t,r){var o={fromPath:e.lastPath,fromHref:e.lastHref,toPath:t,toHref:r};e.lastPath=t,e.lastHref=r,Tt.emit("urlChange",u(u({},o),{mode:"history"}))};window.onpopstate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=window.location.pathname,i=window.location.href;o(n,i),r&&r.apply(this,t)},X(window.history,"pushState",n),X(window.history,"replaceState",n)}function n(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.apply(this,e);var n=window.location.pathname,i=window.location.href;o(n,i)}}},o.prototype.transform=function(){},o}(f),Le=function(e){function o(t,r){var o=e.call(this,t,r)||this;return o.options=t,o.context=r,o.name="HashPlugin",o.isReady=!1,o.lastHref=window.location.href,o.lastPath=window.location.hash,o}return r(o,e),o.prototype.init=function(){var e=this;this.isReady?this.context.log("Hash plugin：插件已经运行，无需重复执行",t.ConsoleTypes.WARN):(this.isReady=!0,window.addEventListener("hashchange",(function(t){var r=t.newURL,o=q(r).hash,n={fromPath:e.lastPath,fromHref:e.lastHref,toPath:o,toHref:r};e.lastHref=r,e.lastPath=o,Tt.emit("urlChange",u(u({},n),{mode:"hash"}))})))},o.prototype.transform=function(){},o}(f),Ie="4.0.1",Ne=function(e){function o(t,r){var o=e.call(this,t,r)||this;return o.options=t,o.context=r,o.name="HinaABTest",o.isReady=!1,o.platform=function(){var t,e=null===(t=it.getUA())||void 0===t?void 0:t.toLowerCase();return/android|webos|iphone|ipod|blackberry/i.test(e)?"H5":"Web"}(),o.projectKey="",o.storageName="hina_webjs_sdk_abtest",o}return r(o,e),o.prototype.init=function(){var e=this;if(this.context.store.localStorage){var r=this.options.abTestingPluginConfig,o=null==r?void 0:r.url;if(x(o)){var n=G(o,"project-key");if(n){this.projectKey=n;var i=q(o).protocol,a=q(window.location.href).protocol;if(i&&i!==a)this.context.log("A/B Testing 初始化失败，".concat(a," 页面必须使用 ").concat(a," 的 URL"),t.ConsoleTypes.WARN);else if(this.isReady)this.context.log("A/B Testing 插件已经运行，无需重复执行",t.ConsoleTypes.WARN);else{var s=this.context.getUserUid();this.context.log("当前accountId为：".concat(s),t.ConsoleTypes.INFO),Tt.on("changeAccountId",(function(){e.context.store.localStorage.set(e.storageName,"")})),this.isReady=!0}}else this.context.log("A/B Testing 初始化失败，请使用正确的 URL（必须包含 project-key）")}else this.context.log("A/B Testing 初始化失败，请使用正确的 URL！",t.ConsoleTypes.WARN)}else this.context.log("A/B Testing 初始化失败，浏览器不支持localStorage",t.ConsoleTypes.WARN)},o.prototype.transform=function(){},o.prototype.valueMatchType=function(e,r){switch(r){case t.VariablesTypes.INTEGER:return C(e);case t.VariablesTypes.STRING:return x(e);case t.VariablesTypes.BOOLEAN:return A(e);default:return!1}},o.prototype.normalizeParams=function(e,r,o){var n,i;void 0===o&&(o=Ee);var a={verify_success:!0,para:r};try{for(var s=l(o),c=s.next();!c.done;c=s.next()){var u=c.value;if(!a.verify_success)break;var p=r.customIds||{},d={};switch(u){case"abtestExperimentId":x(r.abtestExperimentId)&&r.abtestExperimentId.trim()||(this.context.log("".concat(e,"方法调用失败，").concat(u,"参数未正确配置！").concat(u,": ").concat(r.abtestExperimentId),t.ConsoleTypes.WARN),a.verify_success=!1);break;case"paramName":x(r.paramName)&&r.paramName.trim()||(this.context.log("".concat(e,"方法调用失败，").concat(u,"参数未正确配置！").concat(u,": ").concat(r.paramName),t.ConsoleTypes.WARN),a.verify_success=!1);break;case"valueType":[t.VariablesTypes.BOOLEAN,t.VariablesTypes.INTEGER,t.VariablesTypes.STRING].includes(r.valueType)||(this.context.log("".concat(e,"方法调用失败，").concat(u,"参数未正确配置！").concat(u,": ").concat(r.valueType),t.ConsoleTypes.WARN),a.verify_success=!1);break;case"defaultValue":this.valueMatchType(r.defaultValue,r.valueType)||(this.context.log("".concat(e,"方法调用失败，").concat(u,"类型必须与valueType一致！"),t.ConsoleTypes.WARN),a.verify_success=!1);break;case"callback":E(r.callback)||(this.context.log("".concat(e,"方法调用失败，").concat(u,"参数未正确配置")),r.callback=O,a.verify_success=!1);break;case"timeoutMilliseconds":(!C(r.timeoutMilliseconds)||r.timeoutMilliseconds<=0)&&(this.context.log("".concat(u,"参数错误：").concat(r.timeoutMilliseconds),t.ConsoleTypes.WARN),r.timeoutMilliseconds=3e3),r.timeoutMilliseconds<200&&(r.timeoutMilliseconds=200);break;case"customProperties":r.customProperties=k(r.customProperties)?r.customProperties:{};break;case"customIds":for(var f in p)(x(p[f])||C(p[f]))&&(d[f]=p[f]);r.customIds=d}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a},o.prototype.sendTriggerEvent=function(t){var e=t.abtest_experiment_group_id,r=t.abtest_experiment_id;this.context.track("H_ABTestTrigger",{H_abtest_experiment_id:r,H_abtest_experiment_group_id:e})},o.prototype.getExpResult=function(t,e){var r,o;void 0===e&&(e=[]);var n,i=t.abtestExperimentId,a=t.paramName,s=t.valueType;if(0===e.length){var c=this.getStorageData();k(c)&&(e=c.result||[])}try{for(var u=l(e),p=u.next();!p.done;p=u.next()){var d=p.value,f=d.abtest_experiment_id,h=d.abtest_experiment_group_id,g=d.is_white_list,v=d.variables;if(f===i){var m=v.find((function(t){return t.name===a&&t.type===s}));if(m){g||this.sendTriggerEvent({abtest_experiment_id:f,abtest_experiment_group_id:h}),n=m.value;break}}}}catch(t){r={error:t}}finally{try{p&&!p.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}return n},o.prototype.getStorageData=function(){var t=this.context.store.localStorage.get(this.storageName);return H(t)?L(t):null},o.prototype.saveResponseData=function(t){var e=this.getStorageData(),r={updateTime:D()};if(e&&k(e)){var o=[],n=e.result||[];t.forEach((function(t){var e=t.abtest_experiment_group_id,r=t.abtest_experiment_id,i=t.variables,a=n.find((function(t){return t.abtest_experiment_id===r&&t.abtest_experiment_group_id===e}));if(a){var s=[];i.forEach((function(t){var e=t.name,r=t.type,o=a.variables.findIndex((function(t){return t.name===e&&t.type===r}));o>=0?a.variables[o]=t:s.push(t)})),a.variables=d(d([],p(a.variables),!1),p(s),!1)}else o.push(t)})),r.result=d(d([],p(n),!1),p(o),!1)}else r.result=t;this.context.store.localStorage.set(this.storageName,JSON.stringify(r))},o.prototype.createRequestData=function(t){var e=t.paramName,r=t.customProperties,o=t.customIds,n={anonymous_id:this.context.store.getAnonymousId(),platform:this.platform,abtest_lib_version:Ie,param_name:e,properties:this.context.getPresetProperties()};return k(r)&&!N(r)&&(n.custom_properties=r),k(o)&&!N(o)&&(n.custom_ids=o),this.context.getUserUid()&&(n.login_id=this.context.getUserUid()),n},o.prototype.getResultFromServer=function(t){var e=this;return new Promise((function(r,o){var n=e.createRequestData(t);new wt({url:e.options.abTestingPluginConfig.url,data:JSON.stringify(n),contentType:"application/json",customHeaders:{"project-key":e.projectKey},timeout:t.timeoutMilliseconds}).run().then((function(t){var n=t.data;"SUCCESS"===(null==n?void 0:n.status)?(e.saveResponseData(n.results),r(n)):o()}))}))},o.prototype.asyncFetch=function(t){var e=this;return new Promise((function(r){e.getResultFromServer(t).then((function(t){r(t)})).catch((function(){t.callback(t.defaultValue)}))}))},o.prototype.preFetch=function(e,r){return this.isReady?!!k(r)||(this.context.log("".concat(e," 方法参数必须是对象"),t.ConsoleTypes.WARN),!1):(this.context.log("A/B Testing 插件尚未运行，请先执行该插件",t.ConsoleTypes.WARN),!1)},o.prototype.asyncFetchABTest=function(t){var e=this;if(this.preFetch("asyncFetchABTest",t)){var r=this.normalizeParams("asyncFetchABTest",t),o=r.verify_success,n=r.para;o?this.asyncFetch(n).then((function(t){var r=e.getExpResult(n,t.results);n.callback(r||n.defaultValue)})):n.callback(n.defaultValue)}},o.prototype.fetchCacheABTest=function(t){if(this.preFetch("fetchCacheABTest",t)){var e=this.normalizeParams("fetchCacheABTest",t),r=e.verify_success,o=e.para;if(r){var n=this.getExpResult(o);o.callback(n||o.defaultValue)}else o.callback(o.defaultValue)}},o.prototype.fastFetchABTest=function(t){var e=this;if(this.preFetch("fastFetchABTest",t)){var r=this.normalizeParams("fastFetchABTest",t),o=r.verify_success,n=r.para;if(o){var i=this.getExpResult(n);H(i)?n.callback(i):this.asyncFetch(n).then((function(){var t=e.getExpResult(n);n.callback(t||n.defaultValue)}))}else n.callback(n.defaultValue)}},o}(f),De=function(e){function o(t,r){void 0===r&&(r=!0);var o=e.call(this,t,r)||this;return o.consolePrefix="埋点SDK",o.trackTags=Re,o.presetProps={},o.useInstancing&&o.init(t),o}return r(o,e),o.prototype.init=function(e){if(this.isReady)this.log("hinaSDK has been initialized",t.ConsoleTypes.ERROR);else{var r={name:"",serverUrl:"",showLog:!1,autoTrackConfig:{clickAutoTrack:!0,stayAutoTrack:!0,isCollectUrl:function(){return!0},isCollectElement:function(){return!0},isCollectInput:function(){return!1},addCustomProperty:function(){},stayDelayTime:4e3,maxStayPageDuration:18e3,collectTags:{div:!1},trackAttr:["hn-click"],pageviewAutoTrack:!1,pageLeaveAutoTrack:!1},stayAutoTrackConfig:{isCollectUrl:function(){return!0}},maxStringLength:1024,imgUseCrossOrigin:!1,isSinglePage:!1,batchSend:!1,appJsBridge:!1,sendType:t.ReportTypes.BEACON,customHeaders:{},credentials:!1,dataSendTimeout:3e3,presetProperties:{latest_utm:!0,latest_traffic_source_type:!0,latest_search_keyword:!0,latest_referrer:!0,url:!0,title:!0},sourceChannel:[],plugins:[]},o=e.performanceErrorConfig,n=function(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(r[o[n]]=t[o[n]])}return r}(e,["performanceErrorConfig"]);this.options=U(r,n),this.options=u(u({},this.options),{performanceErrorConfig:o}),this.initState(),this.normalizeConfig(),this.initAdvProps(),this.initPlugins(),this.isReady=!0}},o.prototype.initState=function(){this.store=new kt(this.options),this.store.init()},o.prototype.normalizeConfig=function(){var e=this,r=this.options,o=r.serverUrl,n=r.sendType,i=r.batchSend,a=r.maxStringLength,s=r.isSinglePage,c=r.autoTrackConfig,l=void 0===c?{}:c,p=l.trackAttr,d=void 0===p?[]:p,f=l.collectTags,h=l.pageLeaveAutoTrack,g=l.pageviewAutoTrack;if(""===(o=(o=o||"").trim()))this.log("当前 serverUrl 为空，network 中不会发数据，请配置正确的 serverUrl！",t.ConsoleTypes.WARN);else{var v=q(window.location.href).protocol||"";(q(o).protocol||"")!==v&&this.log("SDK 检测到您的数据发送地址和当前页面地址的协议不一致，建议您修改成一致的协议。因为：https 下面发送 http 的图片请求会失败。",t.ConsoleTypes.WARN)}[t.ReportTypes.IMAGE,t.ReportTypes.AJAX,t.ReportTypes.BEACON].includes(n)||this.setConfig({sendType:t.ReportTypes.AJAX});var m=a;if(!C(a)||a<0?m=1024:a>5120&&(m=5120),this.options.maxStringLength=m,(!0===h||k(h)&&N(h))&&(this.options.autoTrackConfig.pageLeaveAutoTrack={heartbeat_interval_time:5e3,max_duration:432e3}),R(d)?(d=d.filter((function(t){return x(t)})),d.includes("hn-click")||d.push("hn-click")):d=["hn-click"],this.options.autoTrackConfig.trackAttr=d,k(f))if(!0===f.div)this.options.autoTrackConfig.collectTags.div={ignoreTags:He,maxLevel:1};else if(k(f.div)){var y=1,_=f.div;C(_.maxLevel)&&[1,2,3].includes(_.maxLevel)&&(y=_.maxLevel),this.options.autoTrackConfig.collectTags.div={ignoreTags:He,maxLevel:y}}else this.options.autoTrackConfig.collectTags.div=!1;else this.options.autoTrackConfig.collectTags={div:!1};this.updateTrackTags(),(!0===i||k(i)&&!N(i))&&(this.options.batchSend=u({dataSendTimeout:6e3,sendInterval:6e3,storageLimit:200},i),this.batchSender=new Ht(this.options,t.PlatformTypes.WEB,"hinasdk_tab","hinasdk_data_")),"auto"===g?this.autoTrack():("singlePage"===g||s)&&(this.autoTrack(),Tt.on("urlChange",(function(t){var r=t.fromHref;if(r!==t.toHref){if(E(s)){var o=s();k(o)&&(t=u(u({},t),o))}e.autoTrack(u(u({},t),{H_referrer:r}))}})))},o.prototype.updateTrackTags=function(){var t=this.options.autoTrackConfig.collectTags,e=d([],p(Re),!1);Object.keys(t||{}).forEach((function(r){var o=t[r];!0!==o&&!k(o)||e.includes(r)||e.push(r)})),this.trackTags=e},o.prototype.initAdvProps=function(){var t={},e=this.options,r=e.presetProperties,o=e.sourceChannel;Object.keys(r||{}).forEach((function(e){var o=r[e];if(e.includes("latest_")&&(e=e.slice(7),o)){var n=M();if("utm"!==e&&"url解析失败"===n)t["H_latest_".concat(e)]="url的domain解析失败";else if(function(t){return""===(t=t||document.referrer)||F(z(t))!==F()}())switch(e){case"traffic_source_type":t.H_latest_traffic_source_type=gt.getSourceFromReferrer();break;case"search_keyword":var i=gt.getKeywordFromReferrer();i&&(t.H_latest_search_keyword=i);break;case"referrer":t.H_latest_referrer=W()}}}));var n=this.store.state.props||{},i={};r.latest_utm&&(i=vt("H_latest_"));var a={};n.H_utm_source||(a=vt("H_"));var s={},c={};if(R(o)&&o.length>0){var l=o.filter((function(t){return!y.includes(t)}));l.length>0&&(n["H_".concat(l[0])]||(c=mt("H_",l)),s=mt("H_latest_",l))}this.store.state.props=u(u(u(u(u(u({},this.store.state.props),t),i),s),c),a),this.store.setProps(this.store.state.props)},o.prototype.initPlugins=function(){var t=this,e=this.options,r=e.serverUrl,o=e.name,n=e.showLog,i=e.sendType,a=e.customHeaders,s=e.credentials,c=e.dataSendTimeout,l=e.batchSend,p=e.imgUseCrossOrigin,d=e.globalCallback,f=e.plugins,h=void 0===f?[]:f,g=e.performanceErrorConfig,v=e.autoTrackConfig,m=e.siteLinkerConfig,y=e.abTestingPluginConfig;h=h||[];var _=v.pageLeaveAutoTrack,w=new xe(this.options,this),b=new Ce(this.options,this),T=new Oe(this.options,this),S=new Le(this.options,this);if(this.plugins=[w,b,T,S],k(_)&&!N(_)){var H=new Ae(this.options,this);this.plugins.push(H)}var E=(m||{}).linker;if(R(E)&&E.length>0){var x=new Pe(this.options,this);this.plugins.push(x)}if(k(y)&&!N(y)){var C=new Ne(this.options,this);this.plugins.push(C)}if(h.forEach((function(e){var r=new e(t.options,t);t.plugins.push(r)})),k(g)&&!N(g)){var A=u({serverUrl:r,name:o,showLog:n,sendType:i,customHeaders:a,credentials:s,dataSendTimeout:c,batchSend:l,imgUseCrossOrigin:p,globalCallback:d},g);this.epmInstance=new ke(A,!0)}this.runPlugins(this.plugins)},o.prototype.use=function(e,r){var o=this,n=this.options,i=n.autoTrackConfig,a=n.siteLinkerConfig,s=n.abTestingPluginConfig,c=i.pageLeaveAutoTrack,u=function(t){var e=new t(o.options,o);o.plugins.push(e),e.init()};if(this.isReady){if(k(r))return"PageLeave"===e?k(c)&&!N(c)?this.log("PageLeave插件已运行，无需重复执行",t.ConsoleTypes.WARN):(this.options.autoTrackConfig.pageLeaveAutoTrack=r,u(Ae)):"SiteLinker"===e?k(a)&&!N(a)?this.log("SiteLinker插件已插件已运行，无需重复执行",t.ConsoleTypes.WARN):(this.options.siteLinkerConfig=r,u(Pe)):"HinaABTest"===e&&(k(s)&&!N(s)?this.log("HinaABTest插件已运行，无需重复执行",t.ConsoleTypes.WARN):(this.options.abTestingPluginConfig=r,u(Ne))),this.getPluginInstance(e);this.log("".concat(e,"插件配置项必须是一个对象类型"),t.ConsoleTypes.WARN)}else this.log("请先初始化埋点SDK",t.ConsoleTypes.WARN)},o.prototype.getPluginInstance=function(t){return this.plugins.find((function(e){return e.name===t}))},o.prototype.setConfig=function(t){this.options=U(this.options,t),this.normalizeConfig()},o.prototype.getConfig=function(t){return t?this.options[t]:this.options},o.prototype.setUserUId=function(e,r){if(C(e=null!=e?e:"")||x(e))if(e=String(e).trim(),this.store.getAccountId()!==e){this.store.setAccountId(e);var o=this.getReportData("track_signup","H_SignUp",{});this.report(o,r),Tt.emit("changeAccountId")}else this.log("setUserUId: uid is equal to account_id, , failed to execute setUserUId",t.ConsoleTypes.WARN);else this.log("setUserUId: uid must be string or number",t.ConsoleTypes.WARN)},o.prototype.getUserUid=function(){return this.store.state.accountId},o.prototype.setDeviceUId=function(t){this.store.setDeviceId(t)},o.prototype.getDeviceUId=function(){return this.store.getDeviceId()},o.prototype.userSet=function(t,e){if(k(t)&&!N(t)){var r=this.getReportData("user_set","",t);this.report(r,e)}},o.prototype.userSetOnce=function(t,e){if(k(t)&&!N(t)){var r=this.getReportData("user_setOnce","",t);this.report(r,e)}},o.prototype.userAdd=function(e,r){var o,n=this;x(e)&&((o={})[e]=1,e=o);if(k(e)&&!N(e)&&function(e){for(var r in e)if(!/-*\d+/.test(String(e[r])))return n.log("userAdd属性的值只能是数字",t.ConsoleTypes.WARN),!1;return!0}(e)){var i=this.getReportData("user_add","",e);this.report(i,r)}},o.prototype.userAppend=function(t,e){var r={};if(k(t)&&(Object.keys(t).forEach((function(e){var o=t[e];R(o)?r[e]=o:r[e]=[o]})),!N(r))){var o=this.getReportData("user_append","",r);this.report(o,e)}},o.prototype.userUnset=function(e,r){var o=this,n={};if(x(e)&&(e=[e]),R(e)){if(e.forEach((function(e){x(e)?n[e]=!0:o.log("userUnset参数数组里面的值必须时string,已经过滤掉".concat(e),t.ConsoleTypes.WARN)})),!N(n)){var i=this.getReportData("user_unset","",n);this.report(i,r)}}else this.log("userUnset参数必须是数组或字符串",t.ConsoleTypes.WARN)},o.prototype.userDelete=function(t){var e=this.getReportData("user_delete","",{});this.report(e,t),this.store.setAccountId("")},o.prototype.registerCommonProperties=function(t){this.presetProps=U(this.presetProps,t)},o.prototype.getPresetProperties=function(){return{H_is_first_day:this.store.isFirstDay,H_is_first_time:this.store.isFirstTime,device_id:this.store.getDeviceId(),anonymous_id:this.store.getAnonymousId(),account_id:this.store.getAccountId(),properties:u(u(u({},this.presetProps),ft()),at(Ie))}},o.prototype.clearPageRegister=function(t){var e=this;void 0===t&&(t=!0),!0===t?this.presetProps={}:R(t)&&t.forEach((function(t){t in e.presetProps&&delete e.presetProps[t]}))},o.prototype.checkReportProperties=function(t){var e=this,r=this.options.maxStringLength;Object.keys(t).forEach((function(o){var n=t[o];if(x(n)&&n.length>r)e.log("属性 ".concat(o," 已经做截取")),t[o]=n.slice(0,r);else if(k(n))e.checkReportProperties(n);else if(E(n))try{t[o]=n(t),E(t[o])?(e.log("属性--".concat(o," 格式不满足要求, 已被删除")),delete t[o]):k(t[o])?e.checkReportProperties(t[o]):x(t[o])&&t[o].length>r&&(t[o]=t[o].slice(0,r))}catch(r){e.log("属性--".concat(o," 格式不满足要求, 已被删除")),delete t[o]}}))},o.prototype.track=function(e,r,o){if(o=o||function(){},x(e)){r=k(r)?r:{};var n=this.getReportData("track",e,r);this.report(n,o)}else this.log("track事件名必须是字符串，属性必须是是一个对象",t.ConsoleTypes.WARN)},o.prototype.quick=function(t,e,r){var o={};r=E(r)?r:O,k(e)?o=e:E(e)&&(r=e),this.autoTrack(o,r)},o.prototype.autoTrack=function(t,e){void 0===t&&(t={}),void 0===e&&(e=O);var r=this.getReportData("track","H_pageview",t);if(this.report(r,e),this.store.isSetFirstVisit){this.store.isSetFirstVisit=!1;var o=W();this.userSetOnce({H_first_referrer:o,H_first_referrer_host:o?z(o,"取值异常"):"",H_first_traffic_source_type:gt.getSourceFromReferrer(),H_first_search_keyword:gt.getKeywordFromReferrer(),H_first_visit_time:D(),H_first_browser_language:x(navigator.language)?navigator.language.toLowerCase():"取值异常"})}},o.prototype.report=function(e,r,o){var n,i,a=this.options,s=a.appJsBridge,c=a.serverUrl;if(this.log(e),s){var u=!0,l=null===window||void 0===window?void 0:window.Hina_Cloud_H5_Bridge;if(k(l)&&l.track)u=!1,l.track(e.event,e.type,JSON.stringify(e));else{var p=null===(i=null===(n=null===window||void 0===window?void 0:window.webkit)||void 0===n?void 0:n.messageHandlers)||void 0===i?void 0:i.hinaNativeTracker;if(null==p?void 0:p.postMessage){u=!1;var d=JSON.stringify({eventName:e.event,eventType:e.type,properties:e});p.postMessage(d)}}if(u)return void this.log("JSBridge 发送数据失败",t.ConsoleTypes.WARN);E(r)&&r(c,e)}else this.sendReportData(e,r,o)},o.prototype.getReportData=function(t,e,r){var o=this.store.getAnonymousId(),n=this.store.getAccountId(),i=D(),a=this.getReportProperties(t,e),s=u(u({},a),r||{});this.checkReportProperties(s);var c={anonymous_id:o,type:t,event:e,time:i,_track_id:J(),properties:s};return n&&(c.account_id=n),c.send_time=D(),c},o.prototype.getReportProperties=function(t,e){void 0===t&&(t=""),void 0===e&&(e="");var r=U(this.presetProps),o=u(u({device_id:this.store.getDeviceId()},this.store.state.props),r);return t&&"user"===t.slice(0,4)||(o=u(u(u({},o),ft()),at(Ie))),"track"===t&&(o.H_is_first_day=this.store.isFirstDay,this.store.isFirstDay=!1,"H_pageview"===e&&(o.H_is_first_time=this.store.isFirstTime,this.store.isFirstTime=!1)),o},o}(Ot);var Ue=new De({},!1);return t.HinaTrack=De,t.PluginBase=f,t.default=Ue,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
